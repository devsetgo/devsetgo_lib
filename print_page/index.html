
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Common functions for Python applications. This is to increase reusability and limit rewritting the same functions in multiple applications. It also allows for defects to be addressed quickly and then be propigated across applications.">
      
      
        <meta name="author" content="Mike Ryan">
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Print Site - DSG_LIB</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DSG_LIB" class="md-header__button md-logo" aria-label="DSG_LIB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DSG_LIB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/devsetgo/dsg_lib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devsetgo/dsg_lib
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart/" class="md-tabs__link">
        
  
    
  
  QuickStart

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../common_functions/logging/" class="md-tabs__link">
          
  
  Common Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../fastapi/http_codes/" class="md-tabs__link">
          
  
  FastAPI Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../database/base_schema/" class="md-tabs__link">
          
  
  Database Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../recipes/fastapi/" class="md-tabs__link">
          
  
  Recipes

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../contribute/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../release-notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Print Site

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DSG_LIB" class="md-nav__button md-logo" aria-label="DSG_LIB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DSG_LIB
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/devsetgo/dsg_lib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devsetgo/dsg_lib
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QuickStart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Common Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Common Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_functions/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_functions/file_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_functions/folder_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_functions/regex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RegEx Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common_functions/calendar_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calendar Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FastAPI Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            FastAPI Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fastapi/http_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP Codes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fastapi/system_health_endpoints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Health
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Database Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Database Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/base_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/database_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/async_database_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Database Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/database_operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/fastapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/asyncDatabase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/loggingExample/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/emailValidation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EmailValidation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Print Site
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Print Site
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      2. QuickStart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-common-functions" class="md-nav__link">
    <span class="md-ellipsis">
      I. Common Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. Common Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common_functions-logging" class="md-nav__link">
    <span class="md-ellipsis">
      3. Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common_functions-file_functions" class="md-nav__link">
    <span class="md-ellipsis">
      4. File Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common_functions-folder_functions" class="md-nav__link">
    <span class="md-ellipsis">
      5. Folder Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common_functions-regex" class="md-nav__link">
    <span class="md-ellipsis">
      6. RegEx Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common_functions-calendar_functions" class="md-nav__link">
    <span class="md-ellipsis">
      7. Calendar Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-fastapi-functions" class="md-nav__link">
    <span class="md-ellipsis">
      II. FastAPI Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="II. FastAPI Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fastapi-http_codes" class="md-nav__link">
    <span class="md-ellipsis">
      8. HTTP Codes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fastapi-system_health_endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      9. System Health
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-database-functions" class="md-nav__link">
    <span class="md-ellipsis">
      III. Database Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III. Database Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-base_schema" class="md-nav__link">
    <span class="md-ellipsis">
      10. Base Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-database_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      11. Database Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-async_database_setup" class="md-nav__link">
    <span class="md-ellipsis">
      12. Async Database Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-database_operations" class="md-nav__link">
    <span class="md-ellipsis">
      13. Database Operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-recipes" class="md-nav__link">
    <span class="md-ellipsis">
      IV. Recipes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV. Recipes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recipes-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      14. FastAPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipes-asyncdatabase" class="md-nav__link">
    <span class="md-ellipsis">
      15. Async Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipes-loggingexample" class="md-nav__link">
    <span class="md-ellipsis">
      16. Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipes-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      17. Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipes-emailvalidation" class="md-nav__link">
    <span class="md-ellipsis">
      18. EmailValidation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    <span class="md-ellipsis">
      V. About
    </span>
  </a>
  
    <nav class="md-nav" aria-label="V. About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contribute" class="md-nav__link">
    <span class="md-ellipsis">
      19. Contributing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release-notes" class="md-nav__link">
    <span class="md-ellipsis">
      20. Release Notes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            
<div>

    
        <h1>DSG_LIB</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>Common functions for Python applications. This is to increase reusability and limit rewritting the same functions in multiple applications. It also allows for defects to be addressed quickly and then be propigated across applications.</td>
    </tr>
    

    
    <tr>
        <td>Author(s)</td>
        <td>Mike Ryan</td>
    </tr>
    

    
    <tr>
        <td>Repository</td>
        <td><a href="https://github.com/devsetgo/dsg_lib">https://github.com/devsetgo/dsg_lib</a></td>
    </tr>
    

    
    <tr>
        <td>Copyright</td>
        <td>Copyright &copy; 2016 - 2024 Mike Ryan</td>
    </tr>
    

</table>





        </section>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="6">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><p><a href="https://pypi.python.org/pypi/devsetgo-lib/"><img alt="PyPI version fury.io" src="https://badge.fury.io/py/devsetgo-lib.svg" /></a>
<a href="https://pepy.tech/project/devsetgo-lib"><img alt="Downloads" src="https://static.pepy.tech/badge/devsetgo-lib" /></a>
<a href="https://pepy.tech/project/devsetgo-lib"><img alt="Downloads" src="https://static.pepy.tech/badge/devsetgo-lib/month" /></a>
<a href="https://pepy.tech/project/devsetgo-lib"><img alt="Downloads" src="https://static.pepy.tech/badge/devsetgo-lib/week" /></a></p>
<p>Support Python Versions</p>
<p><img alt="Static Badge" src="https://img.shields.io/badge/Python-3.12%20%7C%203.11%20%7C%203.10%20%7C%203.9-blue" />
<a href="https://github.com/astral-sh/ruff"><img alt="Ruff" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json" /></a></p>
<p>CI/CD Pipeline:</p>
<p><a href="https://github.com/devsetgo/devsetgo_lib/actions/workflows/testing.yml"><img alt="Testing - Main" src="https://github.com/devsetgo/devsetgo_lib/actions/workflows/testing.yml/badge.svg?branch=main" /></a>
<a href="https://github.com/devsetgo/devsetgo_lib/actions/workflows/testing.yml"><img alt="Testing - Dev" src="https://github.com/devsetgo/devsetgo_lib/actions/workflows/testing.yml/badge.svg?branch=dev" /></a></p>
<p>SonarCloud:</p>
<p><a href="https://sonarcloud.io/dashboard?id=devsetgo_devsetgo_lib"><img alt="Coverage" src="https://sonarcloud.io/api/project_badges/measure?project=devsetgo_devsetgo_lib&amp;metric=coverage" /></a>
<a href="https://sonarcloud.io/dashboard?id=devsetgo_devsetgo_lib"><img alt="Maintainability Rating" src="https://sonarcloud.io/api/project_badges/measure?project=devsetgo_devsetgo_lib&amp;metric=sqale_rating" /></a>
<a href="https://sonarcloud.io/dashboard?id=devsetgo_devsetgo_lib"><img alt="Quality Gate Status" src="https://sonarcloud.io/api/project_badges/measure?project=devsetgo_devsetgo_lib&amp;metric=alert_status" /></a>
<a href="https://sonarcloud.io/dashboard?id=devsetgo_devsetgo_lib"><img alt="Reliability Rating" src="https://sonarcloud.io/api/project_badges/measure?project=devsetgo_devsetgo_lib&amp;metric=reliability_rating" /></a>
<a href="https://sonarcloud.io/dashboard?id=devsetgo_devsetgo_lib"><img alt="Vulnerabilities" src="https://sonarcloud.io/api/project_badges/measure?project=devsetgo_devsetgo_lib&amp;metric=vulnerabilities" /></a></p>
<h1 id="index-devsetgo-common-library">DevSetGo Common Library<a class="headerlink" href="#index-devsetgo-common-library" title="Permanent link">&para;</a></h1>
<p><code>devsetgo_lib</code> is a versatile library designed to provide common functions for Python applications. Its main goal is to increase reusability and reduce the need to rewrite the same functions across multiple applications. This also allows for quick defect resolution and propagation of fixes across all dependent projects.</p>
<h2 id="index-key-features">Key Features<a class="headerlink" href="#index-key-features" title="Permanent link">&para;</a></h2>
<h3 id="index-common-functions"><strong>Common Functions</strong>:<a class="headerlink" href="#index-common-functions" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>File Operations</strong>:</p>
<ul>
<li><strong>CSV, JSON, and Text File Functions</strong>: Create, read, write, and manipulate various file types with ease.</li>
<li><strong>Folder Functions</strong>: Create and remove directories, list directory contents, and manage file system operations efficiently.</li>
</ul>
</li>
<li>
<p><strong>Logging</strong>:
    Comprehensive logging setup using the <a href="#." title="https://loguru.readthedocs.io/en/stable/overview.html">Loguru Library</a>. Provides extensive customization options for log configuration, including log rotation, retention, and formatting. Includes improvements for multiprocessing environments to ensure log messages are handled correctly across multiple processes.</p>
</li>
<li>
<p><strong>Calendar Functions</strong>:
      Convert between month names and numbers seamlessly.</p>
</li>
<li>
<p><strong>Pattern Matching</strong>:
      Powerful tools for searching patterns in text using regular expressions.</p>
</li>
</ul>
<h3 id="index-fastapi-endpoints"><strong>FastAPI Endpoints</strong>:<a class="headerlink" href="#index-fastapi-endpoints" title="Permanent link">&para;</a></h3>
<ul>
<li>Pre-built endpoints for system health checks, status, and uptime monitoring.</li>
<li>Functions to generate HTTP response codes easily.</li>
</ul>
<h3 id="index-async-database"><strong>Async Database</strong>:<a class="headerlink" href="#index-async-database" title="Permanent link">&para;</a></h3>
<ul>
<li>Configuration and management of asynchronous database sessions.</li>
<li>CRUD operations with async support.</li>
</ul>
<hr />
<h2 id="index-installation">Installation<a class="headerlink" href="#index-installation" title="Permanent link">&para;</a></h2>
<p>To install <code>devsetgo_lib</code>, use pip:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib

<span class="c1"># For async database setup with SQLite or PostgreSQL</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>sqlite<span class="o">]</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>postgres<span class="o">]</span>

<span class="c1"># Experimental support for other databases</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>oracle<span class="o">]</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>mssql<span class="o">]</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>mysql<span class="o">]</span>

<span class="c1"># For adding FastAPI endpoints</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>fastapi<span class="o">]</span>

<span class="c1"># Install everything</span>
pip<span class="w"> </span>install<span class="w"> </span>devsetgo-lib<span class="o">[</span>all<span class="o">]</span>
</code></pre></div>
<h2 id="index-usage">Usage<a class="headerlink" href="#index-usage" title="Permanent link">&para;</a></h2>
<p>Here's a quick example to demonstrate how you can use some of the key features of <code>devsetgo_lib</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">devsetgo_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span><span class="p">,</span> <span class="n">logging_config</span><span class="p">,</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">calendar_functions</span>

<span class="c1"># File Operations</span>
<span class="n">file_functions</span><span class="o">.</span><span class="n">create_sample_files</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">file_functions</span><span class="o">.</span><span class="n">read_from_file</span><span class="p">(</span><span class="s2">&quot;example.csv&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="c1"># Logging</span>
<span class="n">logging_config</span><span class="o">.</span><span class="n">config_log</span><span class="p">(</span><span class="n">logging_directory</span><span class="o">=</span><span class="s1">&#39;logs&#39;</span><span class="p">,</span> <span class="n">log_name</span><span class="o">=</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="n">logging_level</span><span class="o">=</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;app_logger&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is an info message&quot;</span><span class="p">)</span>

<span class="c1"># Pattern Matching</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Hello, my name is &#39;John Doe&#39; and I live in &#39;New York&#39;.&quot;</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">pattern_between_two_char</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="c1"># Calendar Functions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calendar_functions</span><span class="o">.</span><span class="n">get_month</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># Output: &#39;January&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calendar_functions</span><span class="o">.</span><span class="n">get_month_number</span><span class="p">(</span><span class="s1">&#39;January&#39;</span><span class="p">))</span>  <span class="c1"># Output: 1</span>
</code></pre></div>
<p>For detailed documentation on each module and function, please refer to the <a href="https://devsetgo.github.io/devsetgo_lib/print_page/">official documentation</a>.</p>
<h2 id="index-contributing">Contributing<a class="headerlink" href="#index-contributing" title="Permanent link">&para;</a></h2>
<p>We welcome contributions! Please see our <a href="#contributing.md">contributing guidelines</a> for more details.</p>
<h2 id="index-license">License<a class="headerlink" href="#index-license" title="Permanent link">&para;</a></h2>
<p>This project is licensed under the MIT License. See the <a href="#license">LICENSE</a> file for more details.</p>
<h2 id="index-contact">Contact<a class="headerlink" href="#index-contact" title="Permanent link">&para;</a></h2>
<p>For any questions or issues, please open an issue on GitHub or contact us at <a href="mailto:devsetgo@example.com">devsetgo@example.com</a>.</p></section><section class="print-page" id="quickstart"><h1 id="quickstart-quick-start">Quick Start<a class="headerlink" href="#quickstart-quick-start" title="Permanent link">&para;</a></h1>
<h3 id="quickstart-install">Install<a class="headerlink" href="#quickstart-install" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span>

<span class="c1"># Aysync database setup</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">sqlite</span><span class="p">]</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">postgres</span><span class="p">]</span>

<span class="c1"># Consider these experimental and untested</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">oracle</span><span class="p">]</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">mssql</span><span class="p">]</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">mysql</span><span class="p">]</span>

<span class="c1"># For adding FastAPI endpoints</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="n">fastapi</span><span class="p">]</span>

<span class="c1"># Install everything</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">devsetgo</span><span class="o">-</span><span class="n">lib</span><span class="p">[</span><span class="nb">all</span><span class="p">]</span>
</code></pre></div>
<p>See documentation for more examples of library use</p></section>
                        <h1 class='nav-section-title' id='section-common-functions'>
                            Common Functions <a class='headerlink' href='#section-common-functions' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="common_functions-logging"><h1 id="common_functions-logging-reference">Reference<a class="headerlink" href="#common_functions-logging-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="common_functions-logging-dsg_lib.common_functions.logging_config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.common_functions.logging_config</code>


<a href="#common_functions-logging-dsg_lib.common_functions.logging_config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module provides a comprehensive logging setup using the loguru library, facilitating easy logging management for Python applications.</p>
<p>The <code>config_log</code> function, central to this module, allows for extensive customization of logging behavior. It supports specifying the logging directory, log file name, logging level, and controls for log rotation, retention, and formatting among other features. Additionally, it offers advanced options like backtrace and diagnose for in-depth debugging, and the ability to append the application name to the log file for clearer identification.</p>
<p>Usage example:</p>
<div class="highlight"><pre><span></span><code>from dsg_lib.common_functions.logging_config import config_log

config_log(
    logging_directory=&#39;logs&#39;,  # Directory for storing logs
    log_name=&#39;log&#39;,  # Base name for log files
    logging_level=&#39;DEBUG&#39;,  # Minimum logging level
    log_rotation=&#39;100 MB&#39;,  # Size threshold for log rotation
    log_retention=&#39;30 days&#39;,  # Duration to retain old log files
    enqueue=True,  # Enqueue log messages
)

# Example log messages
logger.debug(&quot;This is a debug message&quot;)
logger.info(&quot;This is an info message&quot;)
logger.error(&quot;This is an error message&quot;)
logger.warning(&quot;This is a warning message&quot;)
logger.critical(&quot;This is a critical message&quot;)
</code></pre></div>


<details class="todo" open>
  <summary>Todo</summary>
  <ul>
<li>Add support for additional logging handlers.</li>
<li>Implement asynchronous logging.</li>
</ul>
</details>

<details class="author" open>
  <summary>Author</summary>
  <p>Mike Ryan</p>
</details>

<details class="date-created" open>
  <summary>Date Created</summary>
  <p>2021/07/16</p>
</details>

<details class="date-updated" open>
  <summary>Date Updated</summary>
  <p>2024/07/27</p>
</details>

<details class="license" open>
  <summary>License</summary>
  <p>MIT</p>
</details>


  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SafeFileSink</code>


<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>A class to handle safe file logging with rotation and retention policies.</p>
<p>This class provides mechanisms to manage log files by rotating them based on size and retaining them for a specified duration. It also supports optional compression of log files.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.path">path</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the log file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.rotation_size">rotation_size</span></code></td>
            <td>
                  <code><span data-autorefs-optional="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size threshold for log rotation in bytes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.retention_days">retention_days</span></code></td>
            <td>
                  <code><span data-autorefs-optional-hover="datetime.timedelta">timedelta</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The duration to retain old log files.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.compression">compression</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The compression method to use for old log files.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.parse_size">parse_size</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Parses a size string (e.g., '100MB') and returns the size in bytes.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.logging_config.SafeFileSink.parse_duration">parse_duration</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Parses a duration string (e.g., '7 days') and returns a timedelta object.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>safe_file_sink = SafeFileSink(
    path='logs/app.log',
    rotation='100 MB',
    retention='30 days',
    compression='zip'
)</p>
<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink--this-will-set-up-a-log-file-at-logsapplog-with-rotation-at-100-mb">This will set up a log file at 'logs/app.log' with rotation at 100 MB,<a class="headerlink" href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink--this-will-set-up-a-log-file-at-logsapplog-with-rotation-at-100-mb" title="Permanent link">&para;</a></h4>
<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink--retention-for-30-days-and-compression-using-zip">retention for 30 days, and compression using zip.<a class="headerlink" href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink--retention-for-30-days-and-compression-using-zip" title="Permanent link">&para;</a></h4>
</details>
              <details class="quote">
                <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SafeFileSink</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to handle safe file logging with rotation and retention policies.</span>

<span class="sd">    This class provides mechanisms to manage log files by rotating them based on size and retaining them for a specified duration. It also supports optional compression of log files.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        path (str): The path to the log file.</span>
<span class="sd">        rotation_size (int): The size threshold for log rotation in bytes.</span>
<span class="sd">        retention_days (timedelta): The duration to retain old log files.</span>
<span class="sd">        compression (str, optional): The compression method to use for old log files.</span>

<span class="sd">    Methods:</span>
<span class="sd">        parse_size(size_str): Parses a size string (e.g., &#39;100MB&#39;) and returns the size in bytes.</span>
<span class="sd">        parse_duration(duration_str): Parses a duration string (e.g., &#39;7 days&#39;) and returns a timedelta object.</span>

<span class="sd">    Example:</span>
<span class="sd">        safe_file_sink = SafeFileSink(</span>
<span class="sd">            path=&#39;logs/app.log&#39;,</span>
<span class="sd">            rotation=&#39;100 MB&#39;,</span>
<span class="sd">            retention=&#39;30 days&#39;,</span>
<span class="sd">            compression=&#39;zip&#39;</span>
<span class="sd">        )</span>

<span class="sd">        # This will set up a log file at &#39;logs/app.log&#39; with rotation at 100 MB,</span>
<span class="sd">        # retention for 30 days, and compression using zip.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">retention</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotation_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_size</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">retention_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="n">retention</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compression</span> <span class="o">=</span> <span class="n">compression</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_size</span><span class="p">(</span><span class="n">size_str</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses a size string and returns the size in bytes.</span>

<span class="sd">        Args:</span>
<span class="sd">            size_str (str): The size string (e.g., &#39;100MB&#39;).</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The size in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size_str</span> <span class="o">=</span> <span class="n">size_str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;MB&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="k">elif</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;GB&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="k">elif</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;KB&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_duration</span><span class="p">(</span><span class="n">duration_str</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses a duration string and returns a timedelta object.</span>

<span class="sd">        Args:</span>
<span class="sd">            duration_str (str): The duration string (e.g., &#39;7 days&#39;).</span>

<span class="sd">        Returns:</span>
<span class="sd">            timedelta: The duration as a timedelta object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">duration_str</span> <span class="o">=</span> <span class="n">duration_str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;day&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="s1">&#39;hour&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="s1">&#39;minute&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the logging of a message, including writing, rotating, and applying retention policies.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str): The log message to be written.</span>

<span class="sd">        This method ensures thread-safe logging by acquiring a lock before writing the message,</span>
<span class="sd">        rotating the logs if necessary, and applying the retention policy to remove old log files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">rotation_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotate_logs</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_retention</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">write_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes a log message to the log file.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str): The log message to be written.</span>

<span class="sd">        This method opens the log file in append mode and writes the message to it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rotates the log file if it exceeds the specified rotation size.</span>

<span class="sd">        This method checks the size of the current log file. If the file size exceeds the specified rotation size, it renames the current log file by appending a timestamp to its name. Optionally, it compresses the rotated log file using the specified compression method and removes the original uncompressed file.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            OSError: If there is an error renaming or compressing the log file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation_size</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">_%H%M%S&#39;</span><span class="p">)</span>
            <span class="n">rotated_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">rotated_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression</span><span class="p">,</span> <span class="n">root_dir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">),</span> <span class="n">base_dir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_retention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies the retention policy to remove old log files.</span>

<span class="sd">        This method iterates through the log files in the directory of the current log file. It checks the modification time of each log file and removes those that are older than the specified retention period.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            OSError: If there is an error removing a log file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">filename</span><span class="p">)</span>
                <span class="n">file_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="n">file_time</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">retention_days</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.__call__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.__call__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Handles the logging of a message, including writing, rotating, and applying retention policies.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log message to be written.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>This method ensures thread-safe logging by acquiring a lock before writing the message,
rotating the logs if necessary, and applying the retention policy to remove old log files.</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the logging of a message, including writing, rotating, and applying retention policies.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (str): The log message to be written.</span>

<span class="sd">    This method ensures thread-safe logging by acquiring a lock before writing the message,</span>
<span class="sd">    rotating the logs if necessary, and applying the retention policy to remove old log files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">rotation_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotate_logs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_retention</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.apply_retention" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">apply_retention</span><span class="p">()</span></code>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.apply_retention" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Applies the retention policy to remove old log files.</p>
<p>This method iterates through the log files in the directory of the current log file. It checks the modification time of each log file and removes those that are older than the specified retention period.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="OSError">OSError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is an error removing a log file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply_retention</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Applies the retention policy to remove old log files.</span>

<span class="sd">    This method iterates through the log files in the directory of the current log file. It checks the modification time of each log file and removes those that are older than the specified retention period.</span>

<span class="sd">    Args:</span>
<span class="sd">        None</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        OSError: If there is an error removing a log file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">filename</span><span class="p">)</span>
            <span class="n">file_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="n">file_time</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">retention_days</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.parse_duration" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">parse_duration</span><span class="p">(</span><span class="n">duration_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.parse_duration" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Parses a duration string and returns a timedelta object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>duration_str</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The duration string (e.g., '7 days').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>timedelta</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The duration as a timedelta object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">parse_duration</span><span class="p">(</span><span class="n">duration_str</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses a duration string and returns a timedelta object.</span>

<span class="sd">    Args:</span>
<span class="sd">        duration_str (str): The duration string (e.g., &#39;7 days&#39;).</span>

<span class="sd">    Returns:</span>
<span class="sd">        timedelta: The duration as a timedelta object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duration_str</span> <span class="o">=</span> <span class="n">duration_str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="s1">&#39;day&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">elif</span> <span class="s1">&#39;hour&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">elif</span> <span class="s1">&#39;minute&#39;</span> <span class="ow">in</span> <span class="n">duration_str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">duration_str</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.parse_size" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">parse_size</span><span class="p">(</span><span class="n">size_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.parse_size" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Parses a size string and returns the size in bytes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>size_str</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size string (e.g., '100MB').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size in bytes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">parse_size</span><span class="p">(</span><span class="n">size_str</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses a size string and returns the size in bytes.</span>

<span class="sd">    Args:</span>
<span class="sd">        size_str (str): The size string (e.g., &#39;100MB&#39;).</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The size in bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size_str</span> <span class="o">=</span> <span class="n">size_str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;MB&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="k">elif</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;GB&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="k">elif</span> <span class="n">size_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;KB&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size_str</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.rotate_logs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">rotate_logs</span><span class="p">()</span></code>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.rotate_logs" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Rotates the log file if it exceeds the specified rotation size.</p>
<p>This method checks the size of the current log file. If the file size exceeds the specified rotation size, it renames the current log file by appending a timestamp to its name. Optionally, it compresses the rotated log file using the specified compression method and removes the original uncompressed file.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="OSError">OSError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is an error renaming or compressing the log file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rotate_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotates the log file if it exceeds the specified rotation size.</span>

<span class="sd">    This method checks the size of the current log file. If the file size exceeds the specified rotation size, it renames the current log file by appending a timestamp to its name. Optionally, it compresses the rotated log file using the specified compression method and removes the original uncompressed file.</span>

<span class="sd">    Args:</span>
<span class="sd">        None</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        OSError: If there is an error renaming or compressing the log file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotation_size</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">_%H%M%S&#39;</span><span class="p">)</span>
        <span class="n">rotated_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">rotated_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression</span><span class="p">,</span> <span class="n">root_dir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">),</span> <span class="n">base_dir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rotated_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.write_message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">write_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.SafeFileSink.write_message" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Writes a log message to the log file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The log message to be written.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>This method opens the log file in append mode and writes the message to it.</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">write_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes a log message to the log file.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (str): The log message to be written.</span>

<span class="sd">    This method opens the log file in append mode and writes the message to it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="common_functions-logging-dsg_lib.common_functions.logging_config.config_log" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">config_log</span><span class="p">(</span><span class="n">logging_directory</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">log_name</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">logging_level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">,</span> <span class="n">log_rotation</span><span class="o">=</span><span class="s1">&#39;100 MB&#39;</span><span class="p">,</span> <span class="n">log_retention</span><span class="o">=</span><span class="s1">&#39;30 days&#39;</span><span class="p">,</span> <span class="n">log_backtrace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">log_format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log_serializer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">log_diagnose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">append_app_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enqueue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">intercept_standard_logging</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;zip&#39;</span><span class="p">)</span></code>

<a href="#common_functions-logging-dsg_lib.common_functions.logging_config.config_log" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Configures the logging settings for the application.</p>
<p>This function sets up the logging configuration, including the log directory, log file name, logging level, log rotation, retention policies, and other optional settings.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>logging_directory</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory where log files will be stored. Defaults to "log".</p>
              </div>
            </td>
            <td>
                  <code>&#39;log&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The base name of the log file. Defaults to "log".</p>
              </div>
            </td>
            <td>
                  <code>&#39;log&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>logging_level</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The logging level (e.g., "INFO", "DEBUG"). Defaults to "INFO".</p>
              </div>
            </td>
            <td>
                  <code>&#39;INFO&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_rotation</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size threshold for log rotation (e.g., "100 MB"). Defaults to "100 MB".</p>
              </div>
            </td>
            <td>
                  <code>&#39;100 MB&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_retention</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The duration to retain old log files (e.g., "30 days"). Defaults to "30 days".</p>
              </div>
            </td>
            <td>
                  <code>&#39;30 days&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_backtrace</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include backtrace information in logs. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_format</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format string for log messages. Defaults to a predefined format if not provided.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_serializer</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to serialize log messages. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>log_diagnose</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include diagnostic information in logs. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>app_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the application. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>append_app_name</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to append the application name to the log file name. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>enqueue</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enqueue log messages for asynchronous processing. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>intercept_standard_logging</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to intercept standard logging calls. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>compression</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The compression method for rotated log files (e.g., "zip"). Defaults to 'zip'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;zip&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>config_log(
    logging_directory='logs',
    log_name='app_log',
    logging_level='DEBUG',
    log_rotation='50 MB',
    log_retention='7 days',
    log_backtrace=True,
    log_format='{time} - {level} - {message}',
    log_serializer=True,
    log_diagnose=True,
    app_name='MyApp',
    append_app_name=True,
    enqueue=False,
    intercept_standard_logging=False,
    compression='gz'
)</p>
</details>      <p>This will configure the logging settings with the specified parameters, setting up a log file at 'logs/app_log' with rotation at 50 MB, retention for 7 days, and other specified options.</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/logging_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">config_log</span><span class="p">(</span>
    <span class="n">logging_directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
    <span class="n">log_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
    <span class="n">logging_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
    <span class="n">log_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;100 MB&quot;</span><span class="p">,</span>
    <span class="n">log_retention</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;30 days&quot;</span><span class="p">,</span>
    <span class="n">log_backtrace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">log_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_serializer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">log_diagnose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">app_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">append_app_name</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">enqueue</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">intercept_standard_logging</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">compression</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;zip&#39;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configures the logging settings for the application.</span>

<span class="sd">    This function sets up the logging configuration, including the log directory, log file name, logging level, log rotation, retention policies, and other optional settings.</span>

<span class="sd">    Args:</span>
<span class="sd">        logging_directory (str): The directory where log files will be stored. Defaults to &quot;log&quot;.</span>
<span class="sd">        log_name (str): The base name of the log file. Defaults to &quot;log&quot;.</span>
<span class="sd">        logging_level (str): The logging level (e.g., &quot;INFO&quot;, &quot;DEBUG&quot;). Defaults to &quot;INFO&quot;.</span>
<span class="sd">        log_rotation (str): The size threshold for log rotation (e.g., &quot;100 MB&quot;). Defaults to &quot;100 MB&quot;.</span>
<span class="sd">        log_retention (str): The duration to retain old log files (e.g., &quot;30 days&quot;). Defaults to &quot;30 days&quot;.</span>
<span class="sd">        log_backtrace (bool): Whether to include backtrace information in logs. Defaults to False.</span>
<span class="sd">        log_format (str, optional): The format string for log messages. Defaults to a predefined format if not provided.</span>
<span class="sd">        log_serializer (bool): Whether to serialize log messages. Defaults to False.</span>
<span class="sd">        log_diagnose (bool): Whether to include diagnostic information in logs. Defaults to False.</span>
<span class="sd">        app_name (str, optional): The name of the application. Defaults to None.</span>
<span class="sd">        append_app_name (bool): Whether to append the application name to the log file name. Defaults to False.</span>
<span class="sd">        enqueue (bool): Whether to enqueue log messages for asynchronous processing. Defaults to True.</span>
<span class="sd">        intercept_standard_logging (bool): Whether to intercept standard logging calls. Defaults to True.</span>
<span class="sd">        compression (str): The compression method for rotated log files (e.g., &quot;zip&quot;). Defaults to &#39;zip&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Example:</span>
<span class="sd">        config_log(</span>
<span class="sd">            logging_directory=&#39;logs&#39;,</span>
<span class="sd">            log_name=&#39;app_log&#39;,</span>
<span class="sd">            logging_level=&#39;DEBUG&#39;,</span>
<span class="sd">            log_rotation=&#39;50 MB&#39;,</span>
<span class="sd">            log_retention=&#39;7 days&#39;,</span>
<span class="sd">            log_backtrace=True,</span>
<span class="sd">            log_format=&#39;{time} - {level} - {message}&#39;,</span>
<span class="sd">            log_serializer=True,</span>
<span class="sd">            log_diagnose=True,</span>
<span class="sd">            app_name=&#39;MyApp&#39;,</span>
<span class="sd">            append_app_name=True,</span>
<span class="sd">            enqueue=False,</span>
<span class="sd">            intercept_standard_logging=False,</span>
<span class="sd">            compression=&#39;gz&#39;</span>
<span class="sd">        )</span>

<span class="sd">    This will configure the logging settings with the specified parameters, setting up a log file at &#39;logs/app_log&#39; with rotation at 50 MB, retention for 7 days, and other specified options.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># If the log_name ends with &quot;.log&quot;, remove the extension</span>
    <span class="k">if</span> <span class="n">log_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.log&quot;</span><span class="p">):</span>
        <span class="n">log_name</span> <span class="o">=</span> <span class="n">log_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.log&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># If the log_name ends with &quot;.json&quot;, remove the extension</span>
    <span class="k">if</span> <span class="n">log_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">):</span>
        <span class="n">log_name</span> <span class="o">=</span> <span class="n">log_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Set default log format if not provided</span>
    <span class="k">if</span> <span class="n">log_format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">log_format</span> <span class="o">=</span> <span class="s2">&quot;&lt;green&gt;{time:YYYY-MM-DD HH:mm:ss.SSSSSS}&lt;/green&gt; | &lt;level&gt;</span><span class="si">{level: &lt;8}</span><span class="s2">&lt;/level&gt; | &lt;cyan&gt; </span><span class="si">{name}</span><span class="s2">&lt;/cyan&gt;:&lt;cyan&gt;</span><span class="si">{function}</span><span class="s2">&lt;/cyan&gt;:&lt;cyan&gt;</span><span class="si">{line}</span><span class="s2">&lt;/cyan&gt; - &lt;level&gt;</span><span class="si">{message}</span><span class="s2">&lt;/level&gt;&quot;</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">if</span> <span class="n">log_serializer</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">log_format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{message}</span><span class="s2">&quot;</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">log_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_name</span><span class="si">}</span><span class="s2">.json&quot;</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_name</span><span class="si">}</span><span class="s2">.log&quot;</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Validate logging level</span>
    <span class="n">log_levels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">logging_level</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">log_levels</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid logging level: </span><span class="si">{</span><span class="n">logging_level</span><span class="si">}</span><span class="s2">. Valid levels are: </span><span class="si">{</span><span class="n">log_levels</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Generate unique trace ID</span>
    <span class="n">trace_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;app_name&quot;</span><span class="p">:</span> <span class="n">app_name</span><span class="p">,</span> <span class="s2">&quot;trace_id&quot;</span><span class="p">:</span> <span class="n">trace_id</span><span class="p">})</span>

    <span class="c1"># Append app name to log format if provided</span>
    <span class="k">if</span> <span class="n">app_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">log_format</span> <span class="o">+=</span> <span class="s2">&quot; | app_name: </span><span class="si">{extra[app_name]}</span><span class="s2">&quot;</span>

    <span class="c1"># Remove any previously added sinks</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>

    <span class="c1"># Append app name to log file name if required</span>
    <span class="k">if</span> <span class="n">append_app_name</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">app_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">log_name</span> <span class="o">=</span> <span class="n">log_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">app_name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="c1"># Construct log file path</span>
    <span class="n">log_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">logging_directory</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">log_name</span><span class="p">)</span>

    <span class="c1"># Add loguru logger with specified configuration</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">SafeFileSink</span><span class="p">(</span><span class="n">log_path</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">log_rotation</span><span class="p">,</span> <span class="n">retention</span><span class="o">=</span><span class="n">log_retention</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="n">compression</span><span class="p">),</span>
        <span class="n">level</span><span class="o">=</span><span class="n">logging_level</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">log_format</span><span class="p">,</span>
        <span class="n">enqueue</span><span class="o">=</span><span class="n">enqueue</span><span class="p">,</span>
        <span class="n">backtrace</span><span class="o">=</span><span class="n">log_backtrace</span><span class="p">,</span>
        <span class="n">serialize</span><span class="o">=</span><span class="n">log_serializer</span><span class="p">,</span>
        <span class="n">diagnose</span><span class="o">=</span><span class="n">log_diagnose</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">basic_config_handlers</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">class</span> <span class="nc">InterceptHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A logging handler that intercepts standard logging messages and redirects them to Loguru.</span>

<span class="sd">        This handler captures log messages from the standard logging module and forwards them to Loguru, preserving the log level and message details.</span>

<span class="sd">        Methods:</span>
<span class="sd">            emit(record):</span>
<span class="sd">                Emits a log record to Loguru.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Emits a log record to Loguru.</span>

<span class="sd">            This method captures the log record, determines the appropriate Loguru log level, and logs the message using Loguru. It also handles exceptions and finds the caller&#39;s frame to maintain accurate log information.</span>

<span class="sd">            Args:</span>
<span class="sd">                record (logging.LogRecord): The log record to be emitted.</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Get corresponding Loguru level if it exists</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">level</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">level</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">levelno</span>  <span class="c1"># pragma: no cover</span>

            <span class="c1"># Find caller from where originated the logged message</span>
            <span class="n">frame</span><span class="p">,</span> <span class="n">depth</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">currentframe</span><span class="p">(),</span> <span class="mi">2</span>
            <span class="k">while</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_filename</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="vm">__file__</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_back</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># pragma: no cover</span>

            <span class="c1"># Log the message using loguru</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">opt</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">record</span><span class="o">.</span><span class="n">exc_info</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="n">level</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">()</span>
            <span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">if</span> <span class="n">intercept_standard_logging</span><span class="p">:</span>
        <span class="c1"># Add interceptor handler to all existing loggers</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">loggerDict</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">InterceptHandler</span><span class="p">())</span>

        <span class="c1"># Add interceptor handler to the root logger</span>
        <span class="n">basic_config_handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">InterceptHandler</span><span class="p">())</span>

    <span class="c1"># Set the root logger&#39;s level to the lowest level possible</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">intercept_standard_logging</span><span class="p">:</span>
        <span class="c1"># Append an InterceptHandler instance to the handlers list if intercept_standard_logging is True</span>
        <span class="n">basic_config_handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">InterceptHandler</span><span class="p">())</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">basic_config_handlers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">handlers</span><span class="o">=</span><span class="n">basic_config_handlers</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging_level</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><section class="print-page" id="common_functions-file_functions"><h1 id="common_functions-file_functions-reference">Reference<a class="headerlink" href="#common_functions-file_functions-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="common_functions-file_functions-dsg_lib.common_functions.file_functions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.common_functions.file_functions</code>


<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>file_functions.py</p>
<p>This module provides a function to delete a file with a specified name from a
specified directory.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.file_functions.delete_file">delete_file</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>str) -&gt; str:
Deletes a file with the specified file name from the directory specified
by the <code>directory_to_files</code> variable. The file type is determined by the
file extension, and the file is deleted from the subdirectory
corresponding to the file type.</p>
<p>Args:
    file_name (str): The name of the file to be deleted.</p>
<p>Returns:
    str: A string indicating that the file has been deleted.</p>
<p>Raises:
    TypeError: If the file name is not a string. ValueError: If the file
    name contains a forward slash or backslash, or if the file type is
    not supported. FileNotFoundError: If the file does not exist.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">file_functions</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">)</span>

<span class="c1"># Outputs: &#39;complete&#39;</span>
</code></pre></div></p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.create_sample_files" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">create_sample_files</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.create_sample_files" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Create sample CSV and JSON files with random data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The base name for the sample files (without extension).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sample_size</code></td>
            <td>
                  <code><span data-autorefs-optional="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of rows to generate for the sample files.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an error occurs while creating the sample files.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
```python
from dsg_lib.common_functions import file_functions</p>
<p>file_functions.create_sample_files("test", 100)</p>
<h4 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.create_sample_files--creates-testcsv-and-testjson-each-with-100-rows-of-random-data">Creates 'test.csv' and 'test.json' each with 100 rows of random data ```<a class="headerlink" href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.create_sample_files--creates-testcsv-and-testjson-each-with-100-rows-of-random-data" title="Permanent link">&para;</a></h4>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_sample_files</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create sample CSV and JSON files with random data.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The base name for the sample files (without extension).</span>
<span class="sd">        sample_size (int): The number of rows to generate for the sample files.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If an error occurs while creating the sample files.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    file_functions.create_sample_files(&quot;test&quot;, 100)</span>

<span class="sd">    # Creates &#39;test.csv&#39; and &#39;test.json&#39; each with 100 rows of random data ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating sample files for </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> with </span><span class="si">{</span><span class="n">sample_size</span><span class="si">}</span><span class="s2"> rows.&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Generate the CSV data</span>
        <span class="n">csv_header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;birth_date&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">]</span>
        <span class="n">csv_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">csv_header</span><span class="p">]</span>

        <span class="c1"># Generate rows for CSV data</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">r_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">first_name</span><span class="p">[</span><span class="n">r_int</span><span class="p">]</span>
            <span class="n">row</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">generate_random_date</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
            <span class="n">csv_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="c1"># Save the CSV file</span>
        <span class="n">csv_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.csv&quot;</span>
        <span class="n">save_csv</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">csv_data</span><span class="p">)</span>

        <span class="c1"># Generate the JSON data</span>
        <span class="n">json_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Generate rows for JSON data</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sample_size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">r_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">first_name</span><span class="p">[</span><span class="n">r_int</span><span class="p">]</span>
            <span class="n">sample_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;birthday_date&quot;</span><span class="p">:</span> <span class="n">generate_random_date</span><span class="p">(),</span>
            <span class="p">}</span>
            <span class="n">json_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_dict</span><span class="p">)</span>

        <span class="c1"># Save the JSON file</span>
        <span class="n">json_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="n">save_json</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="n">json_data</span><span class="p">)</span>

        <span class="c1"># Log the data</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CSV Data: </span><span class="si">{</span><span class="n">csv_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON Data: </span><span class="si">{</span><span class="n">json_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error occurred while creating sample files: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.delete_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">delete_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.delete_file" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Deletes a file with the specified file name from the specified directory.
The file type is determined by the file extension.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>directory_to_files</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory where the file is located.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to be deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message indicating whether the file has been deleted successfully</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or an error occurred.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the directory or file name is not a string. ValueError: If</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>is not supported. FileNotFoundError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">file_functions</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">)</span>

<span class="c1"># Outputs: &#39;File deleted successfully&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a file with the specified file name from the specified directory.</span>
<span class="sd">    The file type is determined by the file extension.</span>

<span class="sd">    Args:</span>
<span class="sd">        directory_to_files (str): The directory where the file is located.</span>
<span class="sd">        file_name (str): The name of the file to be deleted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A message indicating whether the file has been deleted successfully</span>
<span class="sd">        or an error occurred.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the directory or file name is not a string. ValueError: If</span>
<span class="sd">        the file name contains a forward slash or backslash, or if the file type</span>
<span class="sd">        is not supported. FileNotFoundError: If the file does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    file_functions.delete_file(&quot;test.csv&quot;)</span>

<span class="sd">    # Outputs: &#39;File deleted successfully&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting file: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check that the file name is a string</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid string&quot;</span><span class="p">)</span>

    <span class="c1"># Split the file name into its name and extension components</span>
    <span class="n">file_name</span><span class="p">,</span> <span class="n">file_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

    <span class="c1"># Check that the file name does not contain a forward slash or backslash</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check that the file type is supported</span>
    <span class="k">if</span> <span class="n">file_ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">directory_map</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;unsupported file type: </span><span class="si">{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">. Supported file types are: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Construct the full file path</span>
    <span class="n">file_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="n">directory_to_files</span> <span class="o">/</span> <span class="n">directory_map</span><span class="p">[</span><span class="n">file_ext</span><span class="p">]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Check that the file exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file not found: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Delete the file</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file_name</span><span class="si">}{</span><span class="n">file_ext</span><span class="si">}</span><span class="s2"> deleted from file path: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Return a string indicating that the file has been deleted</span>
    <span class="k">return</span> <span class="s2">&quot;complete&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.generate_random_date" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">generate_random_date</span><span class="p">()</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.generate_random_date" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Generate a random datetime string in the format yyyy-mm-dd hh:mm:ss.ffffff.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A randomly generated datetime string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>
<span class="n">random_date</span> <span class="o">=</span> <span class="n">file_functions</span><span class="o">.</span><span class="n">generate_random_date</span><span class="p">()</span>
<span class="c1"># Returns: &#39;1992-03-15 10:30:45.123456&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_random_date</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a random datetime string in the format yyyy-mm-dd hh:mm:ss.ffffff.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A randomly generated datetime string.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>
<span class="sd">    random_date = file_functions.generate_random_date()</span>
<span class="sd">    # Returns: &#39;1992-03-15 10:30:45.123456&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Define the minimum and maximum years for the date range</span>
    <span class="n">min_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1905</span>
    <span class="n">max_year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>

    <span class="c1"># Generate random values for the year, month, day, hour, minute, and second</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">min_year</span><span class="p">,</span> <span class="n">max_year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">month</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
    <span class="n">day</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">28</span><span class="p">)</span>
    <span class="n">hour</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
    <span class="n">minute</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
    <span class="n">second</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>

    <span class="c1"># Create a datetime object with the random values</span>
    <span class="n">date_value</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>

    <span class="c1"># Format the datetime string and return it</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">date_value</span><span class="si">:</span><span class="s2">%Y-%m-%d %H:%M:%S.%f</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.open_csv" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">open_csv</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">quote_level</span><span class="o">=</span><span class="s1">&#39;minimal&#39;</span><span class="p">,</span> <span class="n">skip_initial_space</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.open_csv" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Opens a CSV file with the specified file name and returns its contents as a
list of dictionaries.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to open. Should include the '.csv'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extension.</code></td>
            <td>
                  <code>delimiter (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The character used to separate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fields</code></td>
            <td>
                  <code>in the CSV file. Defaults to &#39;,&#39;. quote_level (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>optional)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to skip initial whitespace in the CSV file. Defaults</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span data-autorefs-optional="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The contents of the CSV file as a list of dictionaries. Each</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary represents a row in the CSV file, where the keys are column</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>names and the values are the data for those columns.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>file_name</code> is not a string. ValueError: If <code>quote_level</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>is not a valid level. FileNotFoundError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span> <span class="n">data</span> <span class="o">=</span>
<span class="n">file_functions</span><span class="o">.</span><span class="n">open_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">quote_level</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
<span class="n">skip_initial_space</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Returns: [{&#39;column1&#39;: &#39;value1&#39;, &#39;column2&#39;:</span>
<span class="s1">&#39;value2&#39;</span><span class="p">}]</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_csv</span><span class="p">(</span>
    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
    <span class="n">quote_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;minimal&quot;</span><span class="p">,</span>
    <span class="n">skip_initial_space</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Opens a CSV file with the specified file name and returns its contents as a</span>
<span class="sd">    list of dictionaries.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to open. Should include the &#39;.csv&#39;</span>
<span class="sd">        extension. delimiter (str, optional): The character used to separate</span>
<span class="sd">        fields in the CSV file. Defaults to &#39;,&#39;. quote_level (str, optional):</span>
<span class="sd">        The quoting level used in the CSV file. Valid levels are &quot;none&quot;,</span>
<span class="sd">        &quot;minimal&quot;, and &quot;all&quot;. Defaults to &quot;minimal&quot;. skip_initial_space (bool,</span>
<span class="sd">        optional): Whether to skip initial whitespace in the CSV file. Defaults</span>
<span class="sd">        to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: The contents of the CSV file as a list of dictionaries. Each</span>
<span class="sd">        dictionary represents a row in the CSV file, where the keys are column</span>
<span class="sd">        names and the values are the data for those columns.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If `file_name` is not a string. ValueError: If `quote_level`</span>
<span class="sd">        is not a valid level. FileNotFoundError: If the file does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions data =</span>
<span class="sd">    file_functions.open_csv(&quot;test.csv&quot;, delimiter=&quot;;&quot;, quote_level=&quot;all&quot;,</span>
<span class="sd">    skip_initial_space=False)  # Returns: [{&#39;column1&#39;: &#39;value1&#39;, &#39;column2&#39;:</span>
<span class="sd">    &#39;value2&#39;}]</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># A dictionary that maps quote levels to csv quoting constants</span>
    <span class="n">quote_levels</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;none&quot;</span><span class="p">:</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span><span class="p">,</span>
        <span class="s2">&quot;minimal&quot;</span><span class="p">:</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">,</span>
        <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Check that file name is a string</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid string&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="c1"># Check that quote level is valid</span>
    <span class="n">quote_level</span> <span class="o">=</span> <span class="n">quote_level</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">quote_level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">quote_levels</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid quote level: </span><span class="si">{</span><span class="n">quote_level</span><span class="si">}</span><span class="s2">. Valid levels are: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">quote_levels</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="n">quoting</span> <span class="o">=</span> <span class="n">quote_levels</span><span class="p">[</span><span class="n">quote_level</span><span class="p">]</span>

    <span class="c1"># Add extension to file name and create file path</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.csv&quot;</span>
    <span class="n">file_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">directory_to_files</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;csv&quot;</span><span class="p">)</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_directory</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

    <span class="c1"># Check that file exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="c1"># Read CSV file</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="n">file_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span>
            <span class="n">f</span><span class="p">,</span>
            <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span>
            <span class="n">quoting</span><span class="o">=</span><span class="n">quoting</span><span class="p">,</span>
            <span class="n">skipinitialspace</span><span class="o">=</span><span class="n">skip_initial_space</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File opened: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.open_json" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">open_json</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.open_json" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Open a JSON file and load its contents into a dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the JSON file to open.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span data-autorefs-optional="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The contents of the JSON file as a dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file name is not a string. FileNotFoundError: If the</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_json</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a JSON file and load its contents into a dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the JSON file to open.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The contents of the JSON file as a dictionary.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the file name is not a string. FileNotFoundError: If the</span>
<span class="sd">        file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if file name is a string</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid string&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="n">file_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">directory_to_files</span><span class="p">)</span> <span class="o">/</span> <span class="n">directory_map</span><span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">]</span>
    <span class="n">file_save</span> <span class="o">=</span> <span class="n">file_directory</span> <span class="o">/</span> <span class="n">file_name</span>

    <span class="c1"># Check if path correct</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_save</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;file not found error: </span><span class="si">{</span><span class="n">file_save</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="c1"># open file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_save</span><span class="p">)</span> <span class="k">as</span> <span class="n">read_file</span><span class="p">:</span>
        <span class="c1"># load file into data variable</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">read_file</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File Opened: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.open_text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">open_text</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.open_text" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Opens a text file with the specified file name and returns its contents as a
string.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to open. Should include the '.txt'</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The contents of the text file as a string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the <code>file_name</code> parameter is not a string or contains a</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>forward slash. FileNotFoundError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">file_functions</span><span class="o">.</span><span class="n">open_text</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">)</span>
<span class="c1"># Returns: &#39;This is a test text file.&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">open_text</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Opens a text file with the specified file name and returns its contents as a</span>
<span class="sd">    string.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to open. Should include the &#39;.txt&#39;</span>
<span class="sd">        extension.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The contents of the text file as a string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the `file_name` parameter is not a string or contains a</span>
<span class="sd">        forward slash. FileNotFoundError: If the file does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>
<span class="sd">    data = file_functions.open_text(&quot;test.txt&quot;)</span>
<span class="sd">    # Returns: &#39;This is a test text file.&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Replace backslashes with forward slashes in the file name</span>
    <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Check that file_name does not contain invalid characters</span>
    <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain /&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain /&quot;</span><span class="p">)</span>

    <span class="c1"># Get the path to the text directory and the file path</span>
    <span class="n">file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory_to_files</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">)</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file_directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="c1"># Check if the file exists</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file not found error: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Open the file and read the data</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File opened: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.save_csv" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">save_csv</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">root_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.save_csv" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Saves a list of dictionaries as a CSV file with the specified file name in
the specified directory. Each dictionary in the list should represent a row
in the CSV file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to save the data in. Should</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>include</code></td>
            <td>
                  <code>the &#39;.csv&#39; extension. data (list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to be saved. Each</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>optional)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The root directory where the file will be saved. If None, the</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>(str,</code></td>
            <td>
                  <code><span data-autorefs-optional="optional">optional</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The character used to separate fields in the CSV file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>Defaults</code></td>
            <td>
                  <code>to &#39;,&#39;. quotechar (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The character used to quote</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message indicating whether the file has been saved successfully</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or an error occurred.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data is not a list, or the file name, delimiter, or</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>quotechar is not a string. ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file name does not end</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example: ```python
from dsg_lib.common_functions import file_functions</p>
<p>data = [{"column1": "value1", "column2": "value2"}]</p>
<p>file_functions.save_csv("test.csv", data, "/path/to/directory", delimiter=";", quotechar="'")</p>
<h4 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.save_csv--saves-data-to-pathtodirectorytestcsv">Saves data to '/path/to/directory/test.csv'<a class="headerlink" href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.save_csv--saves-data-to-pathtodirectorytestcsv" title="Permanent link">&para;</a></h4>
<p>```</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_csv</span><span class="p">(</span>
    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">root_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
    <span class="n">quotechar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves a list of dictionaries as a CSV file with the specified file name in</span>
<span class="sd">    the specified directory. Each dictionary in the list should represent a row</span>
<span class="sd">    in the CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to save the data in. Should</span>
<span class="sd">        include the &#39;.csv&#39; extension. data (list): The data to be saved. Each</span>
<span class="sd">        element of the list should be a dictionary where the keys are column</span>
<span class="sd">        names and the values are the data for those columns. root_folder (str,</span>
<span class="sd">        optional): The root directory where the file will be saved. If None, the</span>
<span class="sd">        file will be saved in the current directory. Defaults to None. delimiter</span>
<span class="sd">        (str, optional): The character used to separate fields in the CSV file.</span>
<span class="sd">        Defaults to &#39;,&#39;. quotechar (str, optional): The character used to quote</span>
<span class="sd">        fields in the CSV file. Defaults to &#39;&quot;&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A message indicating whether the file has been saved successfully</span>
<span class="sd">        or an error occurred.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the data is not a list, or the file name, delimiter, or</span>
<span class="sd">        quotechar is not a string. ValueError: If the file name does not end</span>
<span class="sd">        with &#39;.csv&#39;.</span>

<span class="sd">    Example: ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    data = [{&quot;column1&quot;: &quot;value1&quot;, &quot;column2&quot;: &quot;value2&quot;}]</span>

<span class="sd">    file_functions.save_csv(&quot;test.csv&quot;, data, &quot;/path/to/directory&quot;, delimiter=&quot;;&quot;, quotechar=&quot;&#39;&quot;)</span>

<span class="sd">    # Saves data to &#39;/path/to/directory/test.csv&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set the root folder to directory_to_files if None</span>
    <span class="k">if</span> <span class="n">root_folder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">root_folder</span> <span class="o">=</span> <span class="n">directory_to_files</span>

    <span class="c1"># Create the csv directory if it does not exist</span>
    <span class="n">csv_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root_folder</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;csv&quot;</span>
    <span class="n">csv_directory</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Check that delimiter and quotechar are single characters</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delimiter</span><span class="si">}</span><span class="s2"> can only be a single character&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">quotechar</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">quotechar</span><span class="si">}</span><span class="s2"> can only be a single character&quot;</span><span class="p">)</span>

    <span class="c1"># Check that data is a list</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> is not a valid list&quot;</span><span class="p">)</span>

    <span class="c1"># Check that file_name is a string and does not contain invalid characters</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid file name&quot;</span><span class="p">)</span>

    <span class="c1"># Add extension to file_name if needed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">):</span>
        <span class="n">file_name</span> <span class="o">+=</span> <span class="s2">&quot;.csv&quot;</span>

    <span class="c1"># Create the file path</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">csv_directory</span> <span class="o">/</span> <span class="n">file_name</span>

    <span class="c1"># Write data to file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
        <span class="n">csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="n">quotechar</span><span class="p">)</span>
        <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File Create: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;complete&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.save_json" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">save_json</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">root_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.save_json" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Saves a dictionary or a list as a JSON file with the specified file name in
the specified directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to save the data in. Should</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>include</code></td>
            <td>
                  <code>the &#39;.json&#39; extension. data (list or dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The data to be</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>saved.</code></td>
            <td>
                  <code>root_folder (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The root directory where the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message indicating whether the file has been saved successfully</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or an error occurred.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the data is not a list or a dictionary, or the file name</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>or directory is not a string. ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the file name contains a</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}</span>

<span class="n">file_functions</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="s2">&quot;test.json&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>

<span class="c1"># Saves data to &#39;/path/to/directory/test.json&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_json</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">root_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves a dictionary or a list as a JSON file with the specified file name in</span>
<span class="sd">    the specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to save the data in. Should</span>
<span class="sd">        include the &#39;.json&#39; extension. data (list or dict): The data to be</span>
<span class="sd">        saved. root_folder (str, optional): The root directory where the file</span>
<span class="sd">        will be saved. Defaults to None, which means the file will be saved in</span>
<span class="sd">        the &#39;data&#39; directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A message indicating whether the file has been saved successfully</span>
<span class="sd">        or an error occurred.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the data is not a list or a dictionary, or the file name</span>
<span class="sd">        or directory is not a string. ValueError: If the file name contains a</span>
<span class="sd">        forward slash or backslash, or if the file name does not end with</span>
<span class="sd">        &#39;.json&#39;.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    data = {&quot;key&quot;: &quot;value&quot;}</span>

<span class="sd">    file_functions.save_json(&quot;test.json&quot;, data, &quot;/path/to/directory&quot;)</span>

<span class="sd">    # Saves data to &#39;/path/to/directory/test.json&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Validate inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;data must be a list or a dictionary instead of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain / or </span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Add extension if not present in file_name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">file_name</span> <span class="o">+=</span> <span class="s2">&quot;.json&quot;</span>  <span class="c1"># pragma: no cover</span>

        <span class="k">if</span> <span class="n">root_folder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">root_folder</span> <span class="o">=</span> <span class="n">directory_to_files</span>

        <span class="c1"># Determine directory</span>
        <span class="n">json_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root_folder</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;json&quot;</span>

        <span class="c1"># Construct file path</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">json_directory</span> <span class="o">/</span> <span class="n">file_name</span>

        <span class="c1"># Create the json directory if it does not exist</span>
        <span class="n">json_directory</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Write data to file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">write_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">write_file</span><span class="p">)</span>

        <span class="c1"># Log success message</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File created: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;File saved successfully&quot;</span>

    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating file </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-file_functions-dsg_lib.common_functions.file_functions.save_text" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">save_text</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">root_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#common_functions-file_functions-dsg_lib.common_functions.file_functions.save_text" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Saves a string of text to a file with the specified file name in the
specified directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file to save the data in. Should not</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>include</code></td>
            <td>
                  <code>the &#39;.txt&#39; extension. data (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text data to be saved.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>root_folder</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The root directory where the file will be</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A message indicating whether the file has been saved successfully</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or an error occurred.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the <code>data</code> parameter is not a string, or the <code>file_name</code></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>contains a forward slash or backslash. FileNotFoundError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">file_functions</span><span class="o">.</span><span class="n">save_text</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;This is a test text file.&quot;</span><span class="p">,</span> <span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>

<span class="c1"># Saves data to &#39;/path/to/directory/test.txt&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/file_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_text</span><span class="p">(</span><span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">root_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves a string of text to a file with the specified file name in the</span>
<span class="sd">    specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_name (str): The name of the file to save the data in. Should not</span>
<span class="sd">        include the &#39;.txt&#39; extension. data (str): The text data to be saved.</span>
<span class="sd">        root_folder (str, optional): The root directory where the file will be</span>
<span class="sd">        saved. If None, the file will be saved in the current directory.</span>
<span class="sd">        Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A message indicating whether the file has been saved successfully</span>
<span class="sd">        or an error occurred.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the `data` parameter is not a string, or the `file_name`</span>
<span class="sd">        contains a forward slash or backslash. FileNotFoundError: If the</span>
<span class="sd">        directory does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    file_functions.save_text(&quot;test&quot;, &quot;This is a test text file.&quot;, &quot;/path/to/directory&quot;)</span>

<span class="sd">    # Saves data to &#39;/path/to/directory/test.txt&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If no root folder is provided, use the default directory</span>
    <span class="k">if</span> <span class="n">root_folder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">root_folder</span> <span class="o">=</span> <span class="n">directory_to_files</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Determine the directory for text files</span>
    <span class="n">text_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root_folder</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;text&quot;</span>

    <span class="c1"># Construct the file path for text files</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">text_directory</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.txt&quot;</span>

    <span class="c1"># Create the text directory if it does not exist</span>
    <span class="n">text_directory</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Check that data is a string and that file_name does not contain invalid</span>
    <span class="c1"># characters</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid string&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> is not a valid string&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain </span><span class="se">\\</span><span class="s2"> or /&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2"> cannot contain </span><span class="se">\\</span><span class="s2"> or /&quot;</span><span class="p">)</span>

    <span class="c1"># Open or create the file and write the data</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File created: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;complete&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><section class="print-page" id="common_functions-folder_functions"><h1 id="common_functions-folder_functions-reference">Reference<a class="headerlink" href="#common_functions-folder_functions-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="common_functions-folder_functions-dsg_lib.common_functions.folder_functions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.common_functions.folder_functions</code>


<a href="#common_functions-folder_functions-dsg_lib.common_functions.folder_functions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module contains functions for working with directories and files.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.folder_functions.last_data_files_changed">last_data_files_changed</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get the last modified file in a</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.folder_functions.get_directory_list">get_directory_list</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get a list of directories in the</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.folder_functions.specified directory. make_folder">specified directory. make_folder</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Make a folder in a</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.folder_functions.specific directory. remove_folder">specific directory. remove_folder</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Remove a folder from the</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">folder_functions</span>

<span class="c1"># Get the last modified file in a directory time_stamp, file_path =</span>
<span class="n">folder_functions</span><span class="o">.</span><span class="n">last_data_files_changed</span><span class="p">(</span><span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>  <span class="c1"># Returns:</span>
<span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;/path/to/directory/test.txt&#39;</span><span class="p">)</span>

<span class="c1"># Get a list of directories in the specified directory directories =</span>
<span class="n">folder_functions</span><span class="o">.</span><span class="n">get_directory_list</span><span class="p">(</span><span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>  <span class="c1"># Returns:</span>
<span class="p">[</span><span class="s1">&#39;/path/to/directory/dir1&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/directory/dir2&#39;</span><span class="p">]</span>

<span class="c1"># Make a folder in a specific directory</span>
<span class="n">folder_functions</span><span class="o">.</span><span class="n">make_folder</span><span class="p">(</span><span class="s2">&quot;/path/to/directory/new_folder&quot;</span><span class="p">)</span>  <span class="c1"># Creates a new</span>
<span class="n">folder</span> <span class="n">at</span> <span class="s1">&#39;/path/to/directory/new_folder&#39;</span>

<span class="c1"># Remove a folder from the specified directory</span>
<span class="n">folder_functions</span><span class="o">.</span><span class="n">remove_folder</span><span class="p">(</span><span class="s2">&quot;/path/to/directory/old_folder&quot;</span><span class="p">)</span>  <span class="c1"># Removes the</span>
<span class="n">folder</span> <span class="n">at</span> <span class="s1">&#39;/path/to/directory/old_folder&#39;</span>
</code></pre></div></p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="common_functions-folder_functions-dsg_lib.common_functions.folder_functions.get_directory_list" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">get_directory_list</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span></code>

<a href="#common_functions-folder_functions-dsg_lib.common_functions.folder_functions.get_directory_list" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Get a list of directories in the specified directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_directory</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path of the directory to check.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional-hover="typing.List">List</span>[<span data-autorefs-optional="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[str]: A list of directories in the specified directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the directory does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">directories</span> <span class="o">=</span> <span class="n">file_functions</span><span class="o">.</span><span class="n">get_directory_list</span><span class="p">(</span><span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>

<span class="c1"># Returns: [&#39;/path/to/directory/dir1&#39;, &#39;/path/to/directory/dir2&#39;]</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/folder_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_directory_list</span><span class="p">(</span><span class="n">file_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of directories in the specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_directory (str): The path of the directory to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: A list of directories in the specified directory.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the directory does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib import file_functions</span>

<span class="sd">    directories = file_functions.get_directory_list(&quot;/path/to/directory&quot;)</span>

<span class="sd">    # Returns: [&#39;/path/to/directory/dir1&#39;, &#39;/path/to/directory/dir2&#39;]</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a Path object for the specified directory</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Use a list comprehension to create a list of directories in the</span>
        <span class="c1"># specified directory</span>
        <span class="n">direct_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()]</span>

        <span class="c1"># Log a message indicating that the list of directories was retrieved</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved list of directories: </span><span class="si">{</span><span class="n">file_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Return the list of directories</span>
        <span class="k">return</span> <span class="n">direct_list</span>

    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Log an error message if the specified directory does not exist</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-folder_functions-dsg_lib.common_functions.folder_functions.last_data_files_changed" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">last_data_files_changed</span><span class="p">(</span><span class="n">directory_path</span><span class="p">)</span></code>

<a href="#common_functions-folder_functions-dsg_lib.common_functions.folder_functions.last_data_files_changed" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Get the last modified file in a directory and return its modification time
and path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>directory_path</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path of the directory to check.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional-hover="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[datetime, str]: A tuple containing the modification time and path</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>of the last modified file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the directory does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">time_stamp</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_functions</span><span class="o">.</span><span class="n">last_data_files_changed</span><span class="p">(</span><span class="s2">&quot;/path/to/directory&quot;</span><span class="p">)</span>

<span class="c1"># Returns: (datetime.datetime(2022, 1, 1, 12, 0, 0), &#39;/path/to/directory/test.txt&#39;)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/folder_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">last_data_files_changed</span><span class="p">(</span><span class="n">directory_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the last modified file in a directory and return its modification time</span>
<span class="sd">    and path.</span>

<span class="sd">    Args:</span>
<span class="sd">        directory_path (str): The path of the directory to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[datetime, str]: A tuple containing the modification time and path</span>
<span class="sd">        of the last modified file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the directory does not exist.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib import file_functions</span>

<span class="sd">    time_stamp, file_path = file_functions.last_data_files_changed(&quot;/path/to/directory&quot;)</span>

<span class="sd">    # Returns: (datetime.datetime(2022, 1, 1, 12, 0, 0), &#39;/path/to/directory/test.txt&#39;)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Use a generator expression to find the last modified file in the</span>
        <span class="c1"># directory</span>
        <span class="n">time</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">f</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">directory_path</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>

        <span class="c1"># Convert the modification time to a datetime object</span>
        <span class="n">time_stamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>

        <span class="c1"># Log a message to indicate that the directory was checked for the last</span>
        <span class="c1"># modified file</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory checked for last change: </span><span class="si">{</span><span class="n">directory_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Return the modification time and path of the last modified file</span>
        <span class="k">return</span> <span class="n">time_stamp</span><span class="p">,</span> <span class="n">file_path</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Log an error message if an exception occurs, and return a default</span>
        <span class="c1"># value to indicate an error</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-folder_functions-dsg_lib.common_functions.folder_functions.remove_folder" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">remove_folder</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span></code>

<a href="#common_functions-folder_functions-dsg_lib.common_functions.folder_functions.remove_folder" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Remove a folder from the specified directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>file_directory</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The directory containing the folder to be removed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the specified directory does not exist. OSError:</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">file_functions</span>

<span class="n">file_functions</span><span class="o">.</span><span class="n">remove_folder</span><span class="p">(</span><span class="s2">&quot;/path/to/directory/old_folder&quot;</span><span class="p">)</span>

<span class="c1"># Removes the folder at &#39;/path/to/directory/old_folder&#39;</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/folder_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_folder</span><span class="p">(</span><span class="n">file_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove a folder from the specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_directory (str): The directory containing the folder to be removed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the specified directory does not exist. OSError:</span>
<span class="sd">        If the specified folder could not be removed.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.common_functions import file_functions</span>

<span class="sd">    file_functions.remove_folder(&quot;/path/to/directory/old_folder&quot;)</span>

<span class="sd">    # Removes the folder at &#39;/path/to/directory/old_folder&#39;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a Path object for the specified directory</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_directory</span><span class="p">)</span>

        <span class="c1"># Use the rmdir method of the Path object to remove the folder</span>
        <span class="n">path</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>

        <span class="c1"># Log a message indicating that the folder was removed</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Folder removed: </span><span class="si">{</span><span class="n">file_directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Log an error message if the specified directory does not exist</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>

        <span class="c1"># Raise the FileNotFoundError exception to be handled by the calling</span>
        <span class="c1"># code</span>
        <span class="k">raise</span>

    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Log an error message if the folder could not be removed</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>

        <span class="c1"># Raise the OSError exception to be handled by the calling code</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><section class="print-page" id="common_functions-regex"><h1 id="common_functions-regex-reference">Reference<a class="headerlink" href="#common_functions-regex-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="common_functions-regex-dsg_lib.common_functions.patterns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.common_functions.patterns</code>


<a href="#common_functions-regex-dsg_lib.common_functions.patterns" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module contains functions for pattern searching in text using regular
expressions.</p>
<p>The main function in this module is <code>pattern_between_two_char</code>, which searches
for all patterns between two characters in a given string. The function uses
Python's built-in <code>re</code> module for regex searching and the <code>loguru</code> module for
logging.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.patterns.pattern_between_two_char">pattern_between_two_char</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>str, left_characters: str,</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.patterns.right_characters">right_characters</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>str) -&gt; dict:
Searches for all patterns between two characters (left and right) in a
given string using regular expressions.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">patterns</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Hello, my name is &#39;John Doe&#39; and I live in &#39;New York&#39;.&quot;</span> <span class="n">left_char</span> <span class="o">=</span>
<span class="s2">&quot;&#39;&quot;</span> <span class="n">right_char</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">pattern_between_two_char</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">left_char</span><span class="p">,</span> <span class="n">right_char</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="err">```</span> <span class="n">This</span> <span class="n">will</span> <span class="n">output</span><span class="p">:</span> <span class="err">```</span><span class="n">python</span> <span class="p">{</span>
    <span class="s1">&#39;found&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">],</span> <span class="s1">&#39;matched_found&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;pattern_parameters&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;left_character&#39;</span><span class="p">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;right_character&#39;</span><span class="p">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;regex_pattern&#39;</span><span class="p">:</span>
        <span class="s2">&quot;&#39;(.+?)&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;text_string&#39;</span><span class="p">:</span> <span class="s2">&quot;Hello, my name is &#39;John Doe&#39; and I live</span>
        <span class="ow">in</span> <span class="s1">&#39;New York&#39;</span><span class="o">.</span><span class="s2">&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>      <p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="common_functions-regex-dsg_lib.common_functions.patterns.pattern_between_two_char" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">pattern_between_two_char</span><span class="p">(</span><span class="n">text_string</span><span class="p">,</span> <span class="n">left_characters</span><span class="p">,</span> <span class="n">right_characters</span><span class="p">)</span></code>

<a href="#common_functions-regex-dsg_lib.common_functions.patterns.pattern_between_two_char" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Searches for all patterns between two characters (left and right) in a given
string using regular expressions.</p>
<p>This function takes a string and two characters as input, and returns a
dictionary containing all patterns found between the two characters in the
string. The dictionary also includes the number of matches found and the
regex pattern used for searching.</p>
<p>The function uses Python's built-in <code>re</code> module for regex searching and the
<code>loguru</code> module for logging.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>text_string</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string in which to search for patterns.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>left_characters</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The character(s) that appear(s) immediately to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>the</code></td>
            <td>
                  <code>left of the desired pattern. right_characters (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span data-autorefs-optional="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the following keys:
- "found": a list of strings containing all patterns found.
- "matched_found": the number of patterns found.
- "pattern_parameters": a dictionary with the following keys:
    - "left_character": the escaped left character string used to
      build the regex pattern.
    - "right_character": the escaped right character string used to
      build the regex pattern.
    - "regex_pattern": the final regex pattern used for searching.
    - "text_string": the escaped input string used for searching.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">patterns</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Hello, my name is &#39;John Doe&#39; and I live in &#39;New York&#39;.&quot;</span>
<span class="n">left_char</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span> <span class="n">right_char</span> <span class="o">=</span> <span class="s2">&quot;&#39;&quot;</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">pattern_between_two_char</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">left_char</span><span class="p">,</span> <span class="n">right_char</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="err">```</span> <span class="n">This</span> <span class="n">will</span> <span class="n">output</span><span class="p">:</span> <span class="err">```</span><span class="n">python</span> <span class="p">{</span>
    <span class="s1">&#39;found&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">],</span> <span class="s1">&#39;matched_found&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;pattern_parameters&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;left_character&#39;</span><span class="p">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;right_character&#39;</span><span class="p">:</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;regex_pattern&#39;</span><span class="p">:</span>
        <span class="s2">&quot;&#39;(.+?)&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;text_string&#39;</span><span class="p">:</span> <span class="s2">&quot;Hello, my name is &#39;John Doe&#39; and I</span>
        <span class="n">live</span> <span class="ow">in</span> <span class="s1">&#39;New York&#39;</span><span class="o">.</span><span class="s2">&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/patterns.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pattern_between_two_char</span><span class="p">(</span>
    <span class="n">text_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">left_characters</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">right_characters</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Searches for all patterns between two characters (left and right) in a given</span>
<span class="sd">    string using regular expressions.</span>

<span class="sd">    This function takes a string and two characters as input, and returns a</span>
<span class="sd">    dictionary containing all patterns found between the two characters in the</span>
<span class="sd">    string. The dictionary also includes the number of matches found and the</span>
<span class="sd">    regex pattern used for searching.</span>

<span class="sd">    The function uses Python&#39;s built-in `re` module for regex searching and the</span>
<span class="sd">    `loguru` module for logging.</span>

<span class="sd">    Args:</span>
<span class="sd">        text_string (str): The string in which to search for patterns.</span>
<span class="sd">        left_characters (str): The character(s) that appear(s) immediately to</span>
<span class="sd">        the left of the desired pattern. right_characters (str): The</span>
<span class="sd">        character(s) that appear(s) immediately to the right of the desired</span>
<span class="sd">        pattern.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary with the following keys:</span>
<span class="sd">            - &quot;found&quot;: a list of strings containing all patterns found.</span>
<span class="sd">            - &quot;matched_found&quot;: the number of patterns found.</span>
<span class="sd">            - &quot;pattern_parameters&quot;: a dictionary with the following keys:</span>
<span class="sd">                - &quot;left_character&quot;: the escaped left character string used to</span>
<span class="sd">                  build the regex pattern.</span>
<span class="sd">                - &quot;right_character&quot;: the escaped right character string used to</span>
<span class="sd">                  build the regex pattern.</span>
<span class="sd">                - &quot;regex_pattern&quot;: the final regex pattern used for searching.</span>
<span class="sd">                - &quot;text_string&quot;: the escaped input string used for searching.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.common_functions import patterns</span>

<span class="sd">        text = &quot;Hello, my name is &#39;John Doe&#39; and I live in &#39;New York&#39;.&quot;</span>
<span class="sd">        left_char = &quot;&#39;&quot; right_char = &quot;&#39;&quot;</span>

<span class="sd">        results = patterns.pattern_between_two_char(text, left_char, right_char)</span>

<span class="sd">        print(results) ``` This will output: ```python {</span>
<span class="sd">            &#39;found&#39;: [&#39;John Doe&#39;, &#39;New York&#39;], &#39;matched_found&#39;: 2,</span>
<span class="sd">            &#39;pattern_parameters&#39;: {</span>
<span class="sd">                &#39;left_character&#39;: &quot;&#39;&quot;, &#39;right_character&#39;: &quot;&#39;&quot;, &#39;regex_pattern&#39;:</span>
<span class="sd">                &quot;&#39;(.+?)&#39;&quot;, &#39;text_string&#39;: &quot;Hello, my name is &#39;John Doe&#39; and I</span>
<span class="sd">                live in &#39;New York&#39;.&quot;</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">left_characters</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">right_characters</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Left &#39;</span><span class="si">{</span><span class="n">left_characters</span><span class="si">}</span><span class="s2">&#39; and/or Right &#39;</span><span class="si">{</span><span class="n">right_characters</span><span class="si">}</span><span class="s2">&#39; characters must not be None or empty&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Escape input strings to safely use them in regex pattern</span>
        <span class="n">esc_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">text_string</span><span class="p">)</span>
        <span class="n">esc_left_char</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">left_characters</span><span class="p">)</span>
        <span class="n">esc_right_char</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">right_characters</span><span class="p">)</span>

        <span class="c1"># Create a regex pattern that matches all substrings between target</span>
        <span class="c1"># characters</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">esc_left_char</span><span class="si">}</span><span class="s2">(.+?)</span><span class="si">{</span><span class="n">esc_right_char</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Replace \w with . to match any printable UTF-8 character</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\w&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

        <span class="c1"># Search for all patterns and store them in pattern_list variable</span>
        <span class="n">pattern_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">esc_text</span><span class="p">)</span>

        <span class="c1"># Create a dictionary to store match details</span>
        <span class="n">results</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;found&quot;</span><span class="p">:</span> <span class="n">pattern_list</span><span class="p">,</span>
            <span class="s2">&quot;matched_found&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern_list</span><span class="p">),</span>
            <span class="s2">&quot;pattern_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;left_character&quot;</span><span class="p">:</span> <span class="n">esc_left_char</span><span class="p">,</span>
                <span class="s2">&quot;right_character&quot;</span><span class="p">:</span> <span class="n">esc_right_char</span><span class="p">,</span>
                <span class="s2">&quot;regex_pattern&quot;</span><span class="p">:</span> <span class="n">pattern</span><span class="p">,</span>
                <span class="s2">&quot;text_string&quot;</span><span class="p">:</span> <span class="n">esc_text</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="c1"># Log matched pattern(s) found using &#39;debug&#39; log level</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Matched pattern(s): </span><span class="si">{</span><span class="n">pattern_list</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Log successful function execution using &#39;info&#39; log level</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully executed &#39;pattern_between_two_char&#39; function&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># capture exception and return error in case of invalid input parameters</span>
        <span class="n">results</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="s2">&quot;matched_found&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;pattern_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;left_character&quot;</span><span class="p">:</span> <span class="n">left_characters</span><span class="p">,</span>
                <span class="s2">&quot;right_character&quot;</span><span class="p">:</span> <span class="n">right_characters</span><span class="p">,</span>
                <span class="s2">&quot;regex_pattern&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;text_string&quot;</span><span class="p">:</span> <span class="n">text_string</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="c1"># logger of regex error using &#39;critical&#39; log level</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to generate regex pattern with error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><section class="print-page" id="common_functions-calendar_functions"><h1 id="common_functions-calendar_functions-reference">Reference<a class="headerlink" href="#common_functions-calendar_functions-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.common_functions.calendar_functions</code>


<a href="#common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module provides two main functions to convert between month numbers and
their corresponding names.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.calendar_functions.get_month">get_month</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>int) -&gt; str:
Converts an integer month number to its corresponding month name.</p>
<p>Args:
    month (int): An integer between 1 and 12 representing the month
    number.</p>
<p>Returns:
    str: The full name of the month corresponding to the input month
    number.
         If the input is not within the range of 1-12, returns "Invalid
         month number". If the input is not an integer, returns "Invalid
         input, integer is required".</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.common_functions.calendar_functions.get_month_number">get_month_number</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>str) -&gt; int:
Converts a month name to its corresponding month number.</p>
<p>Args:
    month_name (str): A string containing the full name of a month.</p>
<p>Returns:
    int: The month number corresponding to the input month name.
         If the input is not a valid month name, returns -1. If the
         input is not a string, returns "Invalid input, string is
         required".</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions.calendar_functions</span> <span class="kn">import</span> <span class="n">get_month</span><span class="p">,</span>

<span class="n">get_month_number</span> <span class="nb">print</span><span class="p">(</span><span class="n">get_month</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Outputs: &#39;January&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_month_number</span><span class="p">(</span><span class="s1">&#39;January&#39;</span><span class="p">))</span>

<span class="c1"># Outputs: 1</span>
</code></pre></div></p>
<p>This module is part of the dsg_lib package and is used for handling and
converting between month numbers and names.</p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions.get_month" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">get_month</span><span class="p">(</span><span class="n">month</span><span class="p">)</span></code>

<a href="#common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions.get_month" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Converts an integer month number to its corresponding month name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>month</code></td>
            <td>
                  <code><span data-autorefs-optional="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An integer or integer-like float between 1 and 12</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full name of the month corresponding to the input month number.
 If the input is not within the range of 1-12, returns "Invalid
 month number". If the input is not an integer or integer-like
 float, returns "Invalid input, integer is required".</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/calendar_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_month</span><span class="p">(</span><span class="n">month</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts an integer month number to its corresponding month name.</span>

<span class="sd">    Args:</span>
<span class="sd">        month (int): An integer or integer-like float between 1 and 12</span>
<span class="sd">        representing the month number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The full name of the month corresponding to the input month number.</span>
<span class="sd">             If the input is not within the range of 1-12, returns &quot;Invalid</span>
<span class="sd">             month number&quot;. If the input is not an integer or integer-like</span>
<span class="sd">             float, returns &quot;Invalid input, integer is required&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Define a tuple containing the names of all months</span>
    <span class="n">months</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;January&quot;</span><span class="p">,</span>
        <span class="s2">&quot;February&quot;</span><span class="p">,</span>
        <span class="s2">&quot;March&quot;</span><span class="p">,</span>
        <span class="s2">&quot;April&quot;</span><span class="p">,</span>
        <span class="s2">&quot;May&quot;</span><span class="p">,</span>
        <span class="s2">&quot;June&quot;</span><span class="p">,</span>
        <span class="s2">&quot;July&quot;</span><span class="p">,</span>
        <span class="s2">&quot;August&quot;</span><span class="p">,</span>
        <span class="s2">&quot;September&quot;</span><span class="p">,</span>
        <span class="s2">&quot;October&quot;</span><span class="p">,</span>
        <span class="s2">&quot;November&quot;</span><span class="p">,</span>
        <span class="s2">&quot;December&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Convert integer-like floats to integers</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">month</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">month</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
        <span class="n">month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">)</span>

    <span class="c1"># Check if the input month is an integer</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">month</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid input: </span><span class="si">%s</span><span class="s2">, integer is required&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Invalid input, integer is required&quot;</span>

    <span class="c1"># Check if the input month is within the range of 1-12</span>
    <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">month</span> <span class="o">&lt;=</span> <span class="mi">12</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Returning month name for month number: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">months</span><span class="p">[</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Invalid input: </span><span class="si">%s</span><span class="s2">, month number should be between 1 and 12&quot;</span><span class="p">,</span> <span class="n">month</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Invalid month number&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions.get_month_number" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">get_month_number</span><span class="p">(</span><span class="n">month_name</span><span class="p">)</span></code>

<a href="#common_functions-calendar_functions-dsg_lib.common_functions.calendar_functions.get_month_number" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Converts a month name to its corresponding month number.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>month_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string containing the full name of a month.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span data-autorefs-optional="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The month number corresponding to the input month name.
 If the input is not a valid month name or not a string, returns -1.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/common_functions/calendar_functions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_month_number</span><span class="p">(</span><span class="n">month_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a month name to its corresponding month number.</span>

<span class="sd">    Args:</span>
<span class="sd">        month_name (str): A string containing the full name of a month.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The month number corresponding to the input month name.</span>
<span class="sd">             If the input is not a valid month name or not a string, returns -1.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Define a dictionary mapping month names to month numbers</span>
    <span class="n">month_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;January&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;February&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;March&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;April&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;May&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;June&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="s2">&quot;July&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s2">&quot;August&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s2">&quot;September&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
        <span class="s2">&quot;October&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;November&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
        <span class="s2">&quot;December&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Check if the input month name is a string</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">month_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid input, string is required&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="c1"># Convert the input string to title case and remove leading/trailing spaces</span>
    <span class="n">month_name</span> <span class="o">=</span> <span class="n">month_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>

    <span class="c1"># Check if the input month name is a valid key in the dictionary</span>
    <span class="k">if</span> <span class="n">month_name</span> <span class="ow">in</span> <span class="n">month_dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">month_dict</span><span class="p">[</span><span class="n">month_name</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid month name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">month_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><h1 class='nav-section-title-end'>Ended: Common Functions</h1>
                        <h1 class='nav-section-title' id='section-fastapi-functions'>
                            FastAPI Functions <a class='headerlink' href='#section-fastapi-functions' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="fastapi-http_codes"><h1 id="fastapi-http_codes-reference">Reference<a class="headerlink" href="#fastapi-http_codes-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.fastapi_functions.http_codes</code>


<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>http_codes.py</p>
<p>This module provides a dictionary of HTTP status codes and their descriptions.</p>
<p>The dictionary <code>ALL_HTTP_CODES</code> contains the HTTP status codes as keys. Each key
maps to another dictionary that contains a description of the status code, an
extended description, and a link to its documentation on the Mozilla Developer Network (MDN).</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Get the description, extended description, and link for HTTP status code 200</span>
<span class="n">status_200</span> <span class="o">=</span> <span class="n">http_codes</span><span class="o">.</span><span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">status_200</span><span class="p">)</span>
<span class="c1"># {&#39;description&#39;: &#39;OK&#39;, &#39;extended_description&#39;: &#39;The request has succeeded&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200&#39;}</span>
</code></pre></div></p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.fastapi_functions.http_codes.ALL_HTTP_CODES">ALL_HTTP_CODES</span></code></td>
            <td>
                  <code><span data-autorefs-optional="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of HTTP status codes. Each key is an</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.DELETE_CODES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <code class="highlight language-python"><span class="n">DELETE_CODES</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">(</span><span class="n">common_codes</span> <span class="o">+</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">409</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.DELETE_CODES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>DELETE_CODES is a dictionary of HTTP status codes for DELETE requests. It
includes all the common codes, plus some additional codes that are specific to
DELETE requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Print the dictionary of HTTP status codes for DELETE requests</span>
<span class="nb">print</span><span class="p">(</span><span class="n">http_codes</span><span class="o">.</span><span class="n">DELETE_CODES</span><span class="p">)</span>
</code></pre></div></p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.GET_CODES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <code class="highlight language-python"><span class="n">GET_CODES</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">(</span><span class="n">common_codes</span> <span class="o">+</span> <span class="p">[</span><span class="mi">206</span><span class="p">,</span> <span class="mi">304</span><span class="p">,</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">410</span><span class="p">,</span> <span class="mi">502</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.GET_CODES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>GET_CODES is a dictionary of HTTP status codes for GET requests. It includes all
the common codes, plus some additional codes that are specific to GET requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Print the dictionary of HTTP status codes for GET requests</span>
<span class="nb">print</span><span class="p">(</span><span class="n">http_codes</span><span class="o">.</span><span class="n">GET_CODES</span><span class="p">)</span>
</code></pre></div></p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.PATCH_CODES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <code class="highlight language-python"><span class="n">PATCH_CODES</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">(</span><span class="n">common_codes</span> <span class="o">+</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">409</span><span class="p">,</span> <span class="mi">412</span><span class="p">,</span> <span class="mi">413</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.PATCH_CODES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>PATCH_CODES is a dictionary of HTTP status codes for PATCH requests. It includes
all the common codes, plus some additional codes that are specific to PATCH
requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Print the dictionary of HTTP status codes for PATCH requests</span>
<span class="nb">print</span><span class="p">(</span><span class="n">http_codes</span><span class="o">.</span><span class="n">PATCH_CODES</span><span class="p">)</span>
</code></pre></div></p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.POST_CODES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <code class="highlight language-python"><span class="n">POST_CODES</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">(</span><span class="n">common_codes</span> <span class="o">+</span> <span class="p">[</span><span class="mi">201</span><span class="p">,</span> <span class="mi">202</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">409</span><span class="p">,</span> <span class="mi">413</span><span class="p">,</span> <span class="mi">415</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.POST_CODES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>POST_CODES is a dictionary of HTTP status codes for POST requests. It includes
all the common codes, plus some additional codes that are specific to POST
requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Print the dictionary of HTTP status codes for POST requests</span>
<span class="nb">print</span><span class="p">(</span><span class="n">http_codes</span><span class="o">.</span><span class="n">POST_CODES</span><span class="p">)</span>
</code></pre></div></p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.PUT_CODES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <code class="highlight language-python"><span class="n">PUT_CODES</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">(</span><span class="n">common_codes</span> <span class="o">+</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">409</span><span class="p">,</span> <span class="mi">412</span><span class="p">,</span> <span class="mi">413</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.PUT_CODES" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>PUT_CODES is a dictionary of HTTP status codes for PUT requests. It includes all
the common codes, plus some additional codes that are specific to PUT requests.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Print the dictionary of HTTP status codes for PUT requests</span>
<span class="nb">print</span><span class="p">(</span><span class="n">http_codes</span><span class="o">.</span><span class="n">PUT_CODES</span><span class="p">)</span>
</code></pre></div></p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.generate_code_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">generate_code_dict</span><span class="p">(</span><span class="n">codes</span><span class="p">,</span> <span class="n">description_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#fastapi-http_codes-dsg_lib.fastapi_functions.http_codes.generate_code_dict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Generate a dictionary of specific HTTP error codes from the http_codes
dictionary.</p>
<p>This function takes a list of HTTP status codes and an optional boolean
flag. If the flag is True, the function returns a dictionary where each key
is an HTTP status code from the input list and each value is the
corresponding description from the ALL_HTTP_CODES dictionary. If the flag is
False, the function returns a dictionary where each key is an HTTP status
code from the input list and each value is the corresponding dictionary from
the ALL_HTTP_CODES dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>codes</code></td>
            <td>
                  <code><span data-autorefs-optional="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of HTTP status codes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>description_only</code></td>
            <td>
                  <code><span data-autorefs-optional="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, only the description of the codes will be returned.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where each key is an HTTP error code from the input</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list and each value depends on the description_only parameter. If</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>description_only is True, the value is the description string. If</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>description_only is False, the value is a dictionary with keys</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'description', 'extended_description', and 'link'.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="n">http_codes</span>

<span class="c1"># Generate a dictionary for HTTP status codes 200 and 404</span>
<span class="n">status_dict</span> <span class="o">=</span> <span class="n">http_codes</span><span class="o">.</span><span class="n">generate_code_dict</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span> <span class="mi">404</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">status_dict</span><span class="p">)</span>
<span class="c1"># {200: {&#39;description&#39;: &#39;OK&#39;, &#39;extended_description&#39;: &#39;The request has succeeded&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200&#39;},</span>
<span class="c1">#  404: {&#39;description&#39;: &#39;Not Found&#39;, &#39;extended_description&#39;: &#39;The requested resource could not be found&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404&#39;}}</span>

<span class="c1"># Generate a dictionary for HTTP status codes 200 and 404 with only descriptions</span>
<span class="n">status_dict</span> <span class="o">=</span> <span class="n">http_codes</span><span class="o">.</span><span class="n">generate_code_dict</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span> <span class="mi">404</span><span class="p">],</span> <span class="n">description_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">status_dict</span><span class="p">)</span>  <span class="c1"># {200: &#39;OK&#39;, 404: &#39;Not Found&#39;}</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/fastapi_functions/http_codes.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_code_dict</span><span class="p">(</span><span class="n">codes</span><span class="p">,</span> <span class="n">description_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a dictionary of specific HTTP error codes from the http_codes</span>
<span class="sd">    dictionary.</span>

<span class="sd">    This function takes a list of HTTP status codes and an optional boolean</span>
<span class="sd">    flag. If the flag is True, the function returns a dictionary where each key</span>
<span class="sd">    is an HTTP status code from the input list and each value is the</span>
<span class="sd">    corresponding description from the ALL_HTTP_CODES dictionary. If the flag is</span>
<span class="sd">    False, the function returns a dictionary where each key is an HTTP status</span>
<span class="sd">    code from the input list and each value is the corresponding dictionary from</span>
<span class="sd">    the ALL_HTTP_CODES dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        codes (list): A list of HTTP status codes.</span>
<span class="sd">        description_only (bool, optional): If True, only the description of the codes will be returned.</span>
<span class="sd">        Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary where each key is an HTTP error code from the input</span>
<span class="sd">        list and each value depends on the description_only parameter. If</span>
<span class="sd">        description_only is True, the value is the description string. If</span>
<span class="sd">        description_only is False, the value is a dictionary with keys</span>
<span class="sd">        &#39;description&#39;, &#39;extended_description&#39;, and &#39;link&#39;.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>

<span class="sd">    from dsg_lib.fastapi_functions import http_codes</span>

<span class="sd">    # Generate a dictionary for HTTP status codes 200 and 404</span>
<span class="sd">    status_dict = http_codes.generate_code_dict([200, 404])</span>
<span class="sd">    print(status_dict)</span>
<span class="sd">    # {200: {&#39;description&#39;: &#39;OK&#39;, &#39;extended_description&#39;: &#39;The request has succeeded&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200&#39;},</span>
<span class="sd">    #  404: {&#39;description&#39;: &#39;Not Found&#39;, &#39;extended_description&#39;: &#39;The requested resource could not be found&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404&#39;}}</span>

<span class="sd">    # Generate a dictionary for HTTP status codes 200 and 404 with only descriptions</span>
<span class="sd">    status_dict = http_codes.generate_code_dict([200, 404], description_only=True)</span>
<span class="sd">    print(status_dict)  # {200: &#39;OK&#39;, 404: &#39;Not Found&#39;}</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">description_only</span><span class="p">:</span>
        <span class="c1"># Log the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;description_only is True and returning HTTP codes: </span><span class="si">{</span><span class="n">codes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># If description_only is True, return a dictionary where each key is an</span>
        <span class="c1"># HTTP error code from the input list and each value is the</span>
        <span class="c1"># corresponding description from the ALL_HTTP_CODES dictionary.</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">code</span><span class="p">:</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="n">code</span><span class="p">][</span><span class="s2">&quot;description&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span>
            <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">ALL_HTTP_CODES</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Log the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;returning HTTP codes: </span><span class="si">{</span><span class="n">codes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># If description_only is False, return a dictionary where each key is an</span>
        <span class="c1"># HTTP error code from the input list and each value is the</span>
        <span class="c1"># corresponding dictionary from the ALL_HTTP_CODES dictionary.</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">code</span><span class="p">:</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="n">code</span><span class="p">]</span> <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span> <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">ALL_HTTP_CODES</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="fastapi-http_codes-dsg_lib.fastapi_functions._all_codes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.fastapi_functions._all_codes</code>


<a href="#fastapi-http_codes-dsg_lib.fastapi_functions._all_codes" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module contains a dictionary mapping HTTP status codes to their descriptions,
extended descriptions, and links to their documentation.</p>
<p>Each key in this dictionary is an HTTP status code, and each value is another
dictionary with keys 'description', 'extended_description', and 'link'.</p>
<p>The 'description' key maps to a brief string that describes the HTTP status code.
The 'extended_description' key maps to a more detailed explanation of the status code.
The 'link' key maps to a string that is a link to the documentation for the HTTP status code.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions.http_codes</span> <span class="kn">import</span> <span class="n">ALL_HTTP_CODES</span>

<span class="c1"># Get the dictionary for HTTP status code 200</span>
<span class="n">status_200</span> <span class="o">=</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">status_200</span><span class="p">)</span>
<span class="c1"># Output: {&#39;description&#39;: &#39;OK&#39;, &#39;extended_description&#39;: &#39;The request has succeeded.&#39;, &#39;link&#39;: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200&#39;}</span>

<span class="c1"># Get the description for HTTP status code 404</span>
<span class="n">description_404</span> <span class="o">=</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="mi">404</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">description_404</span><span class="p">)</span>  <span class="c1"># Output: &#39;Not Found&#39;</span>

<span class="c1"># Get the extended description for HTTP status code 200</span>
<span class="n">extended_description_200</span> <span class="o">=</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="mi">200</span><span class="p">][</span><span class="s1">&#39;extended_description&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extended_description_200</span><span class="p">)</span>  <span class="c1"># Output: &#39;The request has succeeded.&#39;</span>

<span class="c1"># Get the link to the documentation for HTTP status code 500</span>
<span class="n">link_500</span> <span class="o">=</span> <span class="n">ALL_HTTP_CODES</span><span class="p">[</span><span class="mi">500</span><span class="p">][</span><span class="s1">&#39;link&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">link_500</span><span class="p">)</span>  <span class="c1"># Output: &#39;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500&#39;</span>
</code></pre></div>
</details>      <p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">











  </div>

    </div>

</div></section><section class="print-page" id="fastapi-system_health_endpoints"><h1 id="fastapi-system_health_endpoints-reference">Reference<a class="headerlink" href="#fastapi-system_health_endpoints-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="fastapi-system_health_endpoints-dsg_lib.fastapi_functions.system_health_endpoints" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.fastapi_functions.system_health_endpoints</code>


<a href="#fastapi-system_health_endpoints-dsg_lib.fastapi_functions.system_health_endpoints" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module provides a configurable health endpoint for a FastAPI application.
It includes the following routes:</p>
<ul>
<li>
<p><code>/api/health/status</code>: Returns the status of the application. If the
  application is running, it will return <code>{"status": "UP"}</code>. This endpoint can
  be enabled or disabled using the configuration.</p>
</li>
<li>
<p><code>/api/health/uptime</code>: Returns the uptime of the application in a dictionary
  with the keys "Days", "Hours", "Minutes", and "Seconds". The uptime is
  calculated from the time the application was started. This endpoint can be
  enabled or disabled using the configuration.</p>
</li>
<li>
<p><code>/api/health/heapdump</code>: Returns a heap dump of the application. The heap dump
  is a list of dictionaries, each representing a line of code. Each dictionary
  includes the filename, line number, size of memory consumed, and the number of
  times the line is referenced. This endpoint can be enabled or disabled using
  the configuration.</p>
</li>
</ul>
<p>The module uses the <code>FastAPI</code>, <code>time</code>, <code>tracemalloc</code>, <code>loguru</code>, <code>packaging</code>, and
<code>dsg_lib.fastapi.http_codes</code> modules.</p>


<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span data-autorefs-optional-hover="dsg_lib.fastapi_functions.system_health_endpoints.create_health_router">create_health_router</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>dict) -&gt; FastAPI.APIRouter:
Creates a FastAPI router with health endpoints based on the provided
configuration.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">FastAPI</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span>
<span class="n">system_health_endpoints</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="c1"># User configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;enable_status_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;enable_uptime_endpoint&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;enable_heapdump_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Health router</span>
<span class="n">health_router</span> <span class="o">=</span>
<span class="n">system_health_endpoints</span><span class="o">.</span><span class="n">create_health_router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">health_router</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/api/health&quot;</span><span class="p">,</span>
<span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;system-health&quot;</span><span class="p">])</span>

<span class="c1"># Get the status of the application</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/status&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>  <span class="c1"># {&quot;status&quot;: &quot;UP&quot;}</span>

<span class="c1"># Get the uptime of the application response =</span>
<span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/uptime&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
<span class="c1"># {&quot;uptime&quot;: {&quot;Days&quot;: 0, &quot;Hours&quot;: 0, &quot;Minutes&quot;: 1, &quot;Seconds&quot;: 42.17}}</span>

<span class="c1"># Get the heap dump of the application response =</span>
<span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/heapdump&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
<span class="c1"># {&quot;memory_use&quot;:{&quot;current&quot;: &quot;123456&quot;, &quot;peak&quot;: &quot;789012&quot;}, &quot;heap_dump&quot;: [{&quot;filename&quot;: &quot;main.py&quot;, &quot;lineno&quot;: 10, &quot;size&quot;: 1234, &quot;count&quot;: 1}, ...]}</span>
</code></pre></div>
</details>      <p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="fastapi-system_health_endpoints-dsg_lib.fastapi_functions.system_health_endpoints.create_health_router" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">create_health_router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#fastapi-system_health_endpoints-dsg_lib.fastapi_functions.system_health_endpoints.create_health_router" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Create a health router with the following endpoints:</p>
<ul>
<li>
<p><code>/status</code>: Returns the status of the application. This endpoint can be
  enabled or disabled using the <code>enable_status_endpoint</code> key in the
  configuration.</p>
</li>
<li>
<p><code>/uptime</code>: Returns the uptime of the application. This endpoint can be
  enabled or disabled using the <code>enable_uptime_endpoint</code> key in the
  configuration.</p>
</li>
<li>
<p><code>/heapdump</code>: Returns a heap dump of the application. This endpoint can be
  enabled or disabled using the <code>enable_heapdump_endpoint</code> key in the
  configuration.</p>
</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><span data-autorefs-optional="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the configuration for the endpoints.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>APIRouter</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A FastAPI router with the configured endpoints.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">FastAPI</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span>
<span class="n">system_health_endpoints</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="c1"># User configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;enable_status_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;enable_uptime_endpoint&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;enable_heapdump_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Health router</span>
<span class="n">health_router</span> <span class="o">=</span>
<span class="n">system_health_endpoints</span><span class="o">.</span><span class="n">create_health_router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">health_router</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/api/health&quot;</span><span class="p">,</span>
<span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;system-health&quot;</span><span class="p">])</span>

<span class="c1"># Get the status of the application</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/status&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>  <span class="c1"># {&quot;status&quot;: &quot;UP&quot;}</span>

<span class="c1"># Get the uptime of the application response =</span>
<span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/uptime&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
<span class="c1"># {&quot;uptime&quot;: {&quot;Days&quot;: 0, &quot;Hours&quot;: 0, &quot;Minutes&quot;: 1, &quot;Seconds&quot;: 42.17}}</span>

<span class="c1"># Get the heap dump of the application response =</span>
<span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/api/health/heapdump&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
<span class="c1"># {&quot;memory_use&quot;:{&quot;current&quot;: &quot;123456&quot;, &quot;peak&quot;: &quot;789012&quot;}, &quot;heap_dump&quot;: [{&quot;filename&quot;: &quot;main.py&quot;, &quot;lineno&quot;: 10, &quot;size&quot;: 1234, &quot;count&quot;: 1}, ...]}</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/fastapi_functions/system_health_endpoints.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_health_router</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a health router with the following endpoints:</span>

<span class="sd">    - `/status`: Returns the status of the application. This endpoint can be</span>
<span class="sd">      enabled or disabled using the `enable_status_endpoint` key in the</span>
<span class="sd">      configuration.</span>

<span class="sd">    - `/uptime`: Returns the uptime of the application. This endpoint can be</span>
<span class="sd">      enabled or disabled using the `enable_uptime_endpoint` key in the</span>
<span class="sd">      configuration.</span>

<span class="sd">    - `/heapdump`: Returns a heap dump of the application. This endpoint can be</span>
<span class="sd">      enabled or disabled using the `enable_heapdump_endpoint` key in the</span>
<span class="sd">      configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (dict): A dictionary with the configuration for the endpoints.</span>
<span class="sd">        Each key should be the name of an endpoint (e.g.,</span>
<span class="sd">        `enable_status_endpoint`) and the value should be a boolean indicating</span>
<span class="sd">        whether the endpoint is enabled or not.</span>

<span class="sd">    Returns:</span>
<span class="sd">        APIRouter: A FastAPI router with the configured endpoints.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from FastAPI import FastAPI</span>
<span class="sd">        from dsg_lib.fastapi_functions import</span>
<span class="sd">        system_health_endpoints</span>

<span class="sd">        app = FastAPI()</span>

<span class="sd">        # User configuration</span>
<span class="sd">        config = {</span>
<span class="sd">            &quot;enable_status_endpoint&quot;: True,</span>
<span class="sd">            &quot;enable_uptime_endpoint&quot;: False,</span>
<span class="sd">            &quot;enable_heapdump_endpoint&quot;: True,</span>
<span class="sd">        }</span>

<span class="sd">        # Health router</span>
<span class="sd">        health_router =</span>
<span class="sd">        system_health_endpoints.create_health_router(config)</span>
<span class="sd">        app.include_router(health_router, prefix=&quot;/api/health&quot;,</span>
<span class="sd">        tags=[&quot;system-health&quot;])</span>

<span class="sd">        # Get the status of the application</span>
<span class="sd">        response = client.get(&quot;/api/health/status&quot;)</span>
<span class="sd">        print(response.json())  # {&quot;status&quot;: &quot;UP&quot;}</span>

<span class="sd">        # Get the uptime of the application response =</span>
<span class="sd">        client.get(&quot;/api/health/uptime&quot;)</span>
<span class="sd">        print(response.json())</span>
<span class="sd">        # {&quot;uptime&quot;: {&quot;Days&quot;: 0, &quot;Hours&quot;: 0, &quot;Minutes&quot;: 1, &quot;Seconds&quot;: 42.17}}</span>

<span class="sd">        # Get the heap dump of the application response =</span>
<span class="sd">        client.get(&quot;/api/health/heapdump&quot;)</span>
<span class="sd">        print(response.json())</span>
<span class="sd">        # {&quot;memory_use&quot;:{&quot;current&quot;: &quot;123456&quot;, &quot;peak&quot;: &quot;789012&quot;}, &quot;heap_dump&quot;: [{&quot;filename&quot;: &quot;main.py&quot;, &quot;lineno&quot;: 10, &quot;size&quot;: 1234, &quot;count&quot;: 1}, ...]}</span>

<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Try to import FastAPI, handle ImportError if FastAPI is not installed</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">fastapi</span>
        <span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">APIRouter</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">status</span>
        <span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">ORJSONResponse</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">APIRouter</span> <span class="o">=</span> <span class="n">HTTPException</span> <span class="o">=</span> <span class="n">status</span> <span class="o">=</span> <span class="n">ORJSONResponse</span> <span class="o">=</span> <span class="n">fastapi</span> <span class="o">=</span> <span class="p">(</span>
            <span class="kc">None</span>  <span class="c1"># pragma: no cover</span>
        <span class="p">)</span>

    <span class="c1"># Check FastAPI version</span>
    <span class="n">min_version</span> <span class="o">=</span> <span class="s2">&quot;0.100.0&quot;</span>  <span class="c1"># replace with your minimum required version</span>
    <span class="k">if</span> <span class="n">fastapi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">packaging_version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
        <span class="n">fastapi</span><span class="o">.</span><span class="n">__version__</span>
    <span class="p">)</span> <span class="o">&lt;</span> <span class="n">packaging_version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">min_version</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;FastAPI version &gt;= </span><span class="si">{</span><span class="n">min_version</span><span class="si">}</span><span class="s2"> required, run `pip install --upgrade fastapi`&quot;</span>
        <span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Store the start time of the application</span>
    <span class="n">app_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="c1"># TODO: determine method to shutdown/restart python application</span>

    <span class="n">status_response</span> <span class="o">=</span> <span class="n">generate_code_dict</span><span class="p">([</span><span class="mi">400</span><span class="p">,</span> <span class="mi">405</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span> <span class="n">description_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">tracemalloc</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="c1"># Create a new router</span>
    <span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">()</span>

    <span class="c1"># Check if the status endpoint is enabled in the configuration</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enable_status_endpoint&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
        <span class="c1"># Define the status endpoint</span>
        <span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;/status&quot;</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;system-health&quot;</span><span class="p">],</span>
            <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span>
            <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">,</span>
            <span class="n">responses</span><span class="o">=</span><span class="n">status_response</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">health_status</span><span class="p">():</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns the status of the application.</span>

<span class="sd">            This endpoint returns a dictionary with the status of the</span>
<span class="sd">            application. If the application is running, it will return</span>
<span class="sd">            `{&quot;status&quot;: &quot;UP&quot;}`.</span>

<span class="sd">            Returns:</span>
<span class="sd">                dict: A dictionary with the status of the application. The</span>
<span class="sd">                dictionary has a single key, &quot;status&quot;, and the value is a string</span>
<span class="sd">                that indicates the status of the application.</span>

<span class="sd">            Raises:</span>
<span class="sd">                HTTPException: If there is an error while getting the status of</span>
<span class="sd">                the application.</span>

<span class="sd">            Example:</span>
<span class="sd">                ```python</span>
<span class="sd">                from FastAPI import FastAPI</span>
<span class="sd">                from dsg_lib.fastapi_functions import</span>
<span class="sd">                system_health_endpoints</span>

<span class="sd">                app = FastAPI()</span>

<span class="sd">                # User configuration</span>
<span class="sd">                config = {</span>
<span class="sd">                    &quot;enable_status_endpoint&quot;: True,</span>
<span class="sd">                    &quot;enable_uptime_endpoint&quot;: False,</span>
<span class="sd">                    &quot;enable_heapdump_endpoint&quot;: True,</span>
<span class="sd">                }</span>

<span class="sd">                # Health router</span>
<span class="sd">                health_router =</span>
<span class="sd">                system_health_endpoints.create_health_router(config)</span>
<span class="sd">                app.include_router(health_router, prefix=&quot;/api/health&quot;,</span>
<span class="sd">                tags=[&quot;system-health&quot;])</span>

<span class="sd">                # Get the status of the application</span>
<span class="sd">                response = client.get(&quot;/api/health/status&quot;)</span>
<span class="sd">                print(response.json())  # {&quot;status&quot;: &quot;UP&quot;}</span>
<span class="sd">            ```</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Log the status request</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Health status of up returned&quot;</span><span class="p">)</span>
            <span class="c1"># Return a dictionary with the status of the application</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;UP&quot;</span><span class="p">}</span>

    <span class="c1"># Check if the uptime endpoint is enabled in the configuration</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enable_uptime_endpoint&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
        <span class="c1"># Define the uptime endpoint</span>
        <span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/uptime&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="n">status_response</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_uptime</span><span class="p">():</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Calculate and return the uptime of the application.</span>

<span class="sd">            This endpoint returns a dictionary with the uptime of the</span>
<span class="sd">            application. The uptime is calculated from the time the application</span>
<span class="sd">            was started and is returned in a dictionary with the keys &quot;Days&quot;,</span>
<span class="sd">            &quot;Hours&quot;, &quot;Minutes&quot;, and &quot;Seconds&quot;.</span>

<span class="sd">            Returns:</span>
<span class="sd">                dict: A dictionary with the uptime of the application. The</span>
<span class="sd">                dictionary has keys for &quot;Days&quot;, &quot;Hours&quot;, &quot;Minutes&quot;, and</span>
<span class="sd">                &quot;Seconds&quot;.</span>

<span class="sd">            Raises:</span>
<span class="sd">                HTTPException: If there is an error while calculating the uptime</span>
<span class="sd">                of the application.</span>

<span class="sd">            Example:</span>
<span class="sd">                ```python</span>
<span class="sd">                from FastAPI import FastAPI</span>
<span class="sd">                from dsg_lib.fastapi_functions import</span>
<span class="sd">                system_health_endpoints</span>

<span class="sd">                app = FastAPI()</span>

<span class="sd">                # User configuration</span>
<span class="sd">                config = {</span>
<span class="sd">                    &quot;enable_status_endpoint&quot;: True,</span>
<span class="sd">                    &quot;enable_uptime_endpoint&quot;: False,</span>
<span class="sd">                    &quot;enable_heapdump_endpoint&quot;: True,</span>
<span class="sd">                }</span>

<span class="sd">                # Health router</span>
<span class="sd">                health_router =</span>
<span class="sd">                system_health_endpoints.create_health_router(config)</span>
<span class="sd">                app.include_router(health_router, prefix=&quot;/api/health&quot;,</span>
<span class="sd">                tags=[&quot;system-health&quot;])</span>

<span class="sd">                # Get the uptime of the application response =</span>
<span class="sd">                client.get(&quot;/api/health/uptime&quot;)</span>
<span class="sd">                print(response.json())</span>
<span class="sd">                # {&quot;uptime&quot;: {&quot;Days&quot;: 0, &quot;Hours&quot;: 0, &quot;Minutes&quot;: 1, &quot;Seconds&quot;: 42.17}}</span>

<span class="sd">                ```</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Calculate the total uptime in seconds This is done by subtracting</span>
            <span class="c1"># the time when the application started from the current time</span>
            <span class="n">uptime_seconds</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">app_start_time</span>

            <span class="c1"># Convert the uptime from seconds to days, hours, minutes, and</span>
            <span class="c1"># seconds</span>
            <span class="n">days</span><span class="p">,</span> <span class="n">rem</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">uptime_seconds</span><span class="p">,</span> <span class="mi">86400</span><span class="p">)</span>
            <span class="n">hours</span><span class="p">,</span> <span class="n">rem</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">rem</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
            <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">rem</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

            <span class="c1"># Log the uptime</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Uptime: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">days</span><span class="p">)</span><span class="si">}</span><span class="s2"> days, </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">hours</span><span class="p">)</span><span class="si">}</span><span class="s2"> hours, </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span><span class="si">}</span><span class="s2"> minutes, </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">seconds</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Return a dictionary with the uptime The dictionary has keys for</span>
            <span class="c1"># days, hours, minutes, and seconds</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;uptime&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Days&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">days</span><span class="p">),</span>
                    <span class="s2">&quot;Hours&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">hours</span><span class="p">),</span>
                    <span class="s2">&quot;Minutes&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">minutes</span><span class="p">),</span>
                    <span class="s2">&quot;Seconds&quot;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">seconds</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="p">}</span>
            <span class="p">}</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enable_heapdump_endpoint&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>

        <span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;/heapdump&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="n">status_response</span>
        <span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_heapdump</span><span class="p">():</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns a heap dump of the application.</span>

<span class="sd">            This endpoint returns a snapshot of the current memory usage of the</span>
<span class="sd">            application. The heap dump is a list of dictionaries, each</span>
<span class="sd">            representing a line of code. Each dictionary includes the filename,</span>
<span class="sd">            line number, size of memory consumed, and the number of times the</span>
<span class="sd">            line is referenced.</span>

<span class="sd">            Returns:</span>
<span class="sd">                dict: A dictionary with the current and peak memory usage, and</span>
<span class="sd">                the heap dump of the application. The dictionary has two keys,</span>
<span class="sd">                &quot;memory_use&quot; and &quot;heap_dump&quot;. The &quot;memory_use&quot; key contains a</span>
<span class="sd">                dictionary with the current and peak memory usage. The</span>
<span class="sd">                &quot;heap_dump&quot; key contains a list of dictionaries, each</span>
<span class="sd">                representing a line of code.</span>

<span class="sd">            Raises:</span>
<span class="sd">                HTTPException: If there is an error while getting the heap dump</span>
<span class="sd">                of the application.</span>

<span class="sd">            Example:</span>
<span class="sd">                ```python</span>
<span class="sd">                from FastAPI import FastAPI</span>
<span class="sd">                from dsg_lib.fastapi_functions import</span>
<span class="sd">                system_health_endpoints</span>

<span class="sd">                app = FastAPI()</span>

<span class="sd">                # User configuration</span>
<span class="sd">                config = {</span>
<span class="sd">                    &quot;enable_status_endpoint&quot;: True,</span>
<span class="sd">                    &quot;enable_uptime_endpoint&quot;: False,</span>
<span class="sd">                    &quot;enable_heapdump_endpoint&quot;: True,</span>
<span class="sd">                }</span>

<span class="sd">                # Health router</span>
<span class="sd">                health_router =</span>
<span class="sd">                system_health_endpoints.create_health_router(config)</span>
<span class="sd">                app.include_router(health_router, prefix=&quot;/api/health&quot;,</span>
<span class="sd">                tags=[&quot;system-health&quot;])</span>

<span class="sd">                # Get the heap dump of the application response =</span>
<span class="sd">                client.get(&quot;/api/health/heapdump&quot;)</span>
<span class="sd">                print(response.json())</span>
<span class="sd">                # {&quot;memory_use&quot;:{&quot;current&quot;: &quot;123456&quot;, &quot;peak&quot;: &quot;789012&quot;}, &quot;heap_dump&quot;: [{&quot;filename&quot;: &quot;main.py&quot;, &quot;lineno&quot;: 10, &quot;size&quot;: 1234, &quot;count&quot;: 1}, ...]}</span>

<span class="sd">                ```</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Take a snapshot of the current memory usage</span>
                <span class="n">snapshot</span> <span class="o">=</span> <span class="n">tracemalloc</span><span class="o">.</span><span class="n">take_snapshot</span><span class="p">()</span>
                <span class="c1"># Get the top 10 lines consuming memory</span>
                <span class="n">top_stats</span> <span class="o">=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">statistics</span><span class="p">(</span><span class="s2">&quot;traceback&quot;</span><span class="p">)</span>

                <span class="n">heap_dump</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">top_stats</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
                    <span class="c1"># Get the first frame from the traceback</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">traceback</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="c1"># Add the frame to the heap dump</span>
                    <span class="n">heap_dump</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">frame</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
                            <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="n">frame</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">stat</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
                            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">stat</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">)</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Heap dump returned </span><span class="si">{</span><span class="n">heap_dump</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">memory_use</span> <span class="o">=</span> <span class="n">tracemalloc</span><span class="o">.</span><span class="n">get_traced_memory</span><span class="p">()</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;memory_use&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;current&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">memory_use</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;peak&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">memory_use</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;heap_dump&quot;</span><span class="p">:</span> <span class="n">heap_dump</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in get_heapdump: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Error in get_heapdump: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="n">router</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><h1 class='nav-section-title-end'>Ended: FastAPI Functions</h1>
                        <h1 class='nav-section-title' id='section-database-functions'>
                            Database Functions <a class='headerlink' href='#section-database-functions' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="database-base_schema"><h1 id="database-base_schema-reference">Reference<a class="headerlink" href="#database-base_schema-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="database-base_schema-dsg_lib.async_database_functions.base_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.async_database_functions.base_schema</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module defines the base schema for database models in the application.</p>
<p>The module uses SQLAlchemy as the ORM and provides a <code>SchemaBase</code> class that all
other models should inherit from. The <code>SchemaBase</code> class includes common columns
that are needed for most models like <code>pkid</code>, <code>date_created</code>, and <code>date_updated</code>.</p>
<ul>
<li><code>pkid</code>: A unique identifier for each record. It's a string representation of a
  UUID.</li>
<li><code>date_created</code>: The date and time when a particular row was inserted into the
  table.
    It defaults to the current UTC time when the instance is created.</li>
<li><code>date_updated</code>: The date and time when a particular row was last updated.
    It defaults to the current UTC time whenever the instance is updated.</li>
</ul>
<p>To create a new database model, import this module and extend the <code>SchemaBase</code>
class.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseSQLite</span><span class="p">):</span>
        <span class="c1"># Define your model-specific columns here my_column =</span>
        <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseCockroachDB" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseCockroachDB</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseCockroachDB" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a CockroachDB database. CockroachDB uses the same syntax
as PostgreSQL. All other models should inherit from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseCockroachDB.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseCockroachDB.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseCockroachDB.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseCockroachDB</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseCockroachDB</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a CockroachDB database. CockroachDB uses the same syntax</span>
<span class="sd">    as PostgreSQL. All other models should inherit from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseCockroachDB, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseFirebird" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseFirebird</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseFirebird" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a Firebird database. All other models should inherit
from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseFirebird.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseFirebird.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseFirebird.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseFirebird</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseFirebird</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a Firebird database. All other models should inherit</span>
<span class="sd">    from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseFirebird, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;CURRENT_TIMESTAMP&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Date and time when a row was inserted, defaults to current time&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;CURRENT_TIMESTAMP&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;CURRENT_TIMESTAMP&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;Date and time when a row was last updated, defaults to current time on update&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseMSSQL" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseMSSQL</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseMSSQL" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a Microsoft SQL Server database. All other models should
inherit from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMSSQL.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMSSQL.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMSSQL.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseMSSQL</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseMSSQL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a Microsoft SQL Server database. All other models should</span>
<span class="sd">    inherit from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseMSSQL, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseMySQL" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseMySQL</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseMySQL" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a MySQL database. All other models should inherit
from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMySQL.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMySQL.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseMySQL.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseMySQL</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseMySQL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a MySQL database. All other models should inherit</span>
<span class="sd">    from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseMySQL, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;UTC_TIMESTAMP()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;UTC_TIMESTAMP()&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;UTC_TIMESTAMP()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseOracle" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseOracle</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseOracle" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using an Oracle database. All other models should inherit
from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseOracle.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseOracle.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseOracle.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseOracle</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseOracle</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using an Oracle database. All other models should inherit</span>
<span class="sd">    from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseOracle, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SYS_EXTRACT_UTC(SYSTIMESTAMP)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SYS_EXTRACT_UTC(SYSTIMESTAMP)&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;SYS_EXTRACT_UTC(SYSTIMESTAMP)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBasePostgres" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBasePostgres</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBasePostgres" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a PostgreSQL database. All other models should inherit
from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBasePostgres.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBasePostgres.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBasePostgres.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBasePostgres</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBasePostgres</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a PostgreSQL database. All other models should inherit</span>
<span class="sd">    from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBasePostgres, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;(CURRENT_TIMESTAMP AT TIME ZONE &#39;UTC&#39;)&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseSQLite" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseSQLite</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseSQLite" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models. All other models should inherit from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSQLite.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSQLite.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSQLite.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBase</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseSQLite</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models. All other models should inherit from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBase, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseSybase" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SchemaBaseSybase</code>


<a href="#database-base_schema-dsg_lib.async_database_functions.base_schema.SchemaBaseSybase" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides a base schema that includes common columns for most
models when using a Sybase database. All other models should inherit
from this class.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSybase.pkid">pkid</span></code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A unique identifier for each record. It's a string</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSybase.date_created">date_created</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.base_schema.SchemaBaseSybase.date_updated">date_updated</span></code></td>
            <td>
                  <code><span data-autorefs-optional="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date and time when a particular row was</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">base_schema</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBaseSybase</span><span class="p">,</span> <span class="n">BASE</span><span class="p">):</span>
    <span class="c1"># Define your model-specific columns here</span>
    <span class="n">my_column</span> <span class="o">=</span> <span class="n">base_schema</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/base_schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaBaseSybase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides a base schema that includes common columns for most</span>
<span class="sd">    models when using a Sybase database. All other models should inherit</span>
<span class="sd">    from this class.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        pkid (str): A unique identifier for each record. It&#39;s a string</span>
<span class="sd">        representation of a UUID.</span>
<span class="sd">        date_created (datetime): The date and time when a particular row was</span>
<span class="sd">        inserted into the table. It defaults to the current UTC time when the</span>
<span class="sd">        instance is created.</span>
<span class="sd">        date_updated (datetime): The date and time when a particular row was</span>
<span class="sd">        last updated. It defaults to the current UTC time whenever the instance</span>
<span class="sd">        is updated.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import base_schema</span>
<span class="sd">    from sqlalchemy.orm import declarative_base</span>

<span class="sd">    BASE = declarative_base()</span>

<span class="sd">    class MyModel(base_schema.SchemaBaseSybase, BASE):</span>
<span class="sd">        # Define your model-specific columns here</span>
<span class="sd">        my_column = base_schema.Column(base_schema.String(50))</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Each instance in the table will have a unique id which is a string</span>
    <span class="c1"># representation of a UUID</span>
    <span class="n">pkid</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span>
        <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">uuid_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was inserted into the table. It</span>
    <span class="c1"># defaults to the current UTC time when the instance is created.</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_created_comment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The date and time when a particular row was last updated. It defaults to</span>
    <span class="c1"># the current UTC time whenever the instance is updated.</span>
    <span class="n">date_updated</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">DateTime</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">server_default</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">onupdate</span><span class="o">=</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;GETUTCDATE()&quot;</span><span class="p">),</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">date_updated_comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div></section><section class="print-page" id="database-database_configuration"><h1 id="database-database_configuration-reference">Reference<a class="headerlink" href="#database-database_configuration-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="database-database_configuration-dsg_lib.async_database_functions.database_config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.async_database_functions.database_config</code>


<a href="#database-database_configuration-dsg_lib.async_database_functions.database_config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module provides classes and functions for managing asynchronous database
operations using SQLAlchemy and asyncio.</p>
<p>The main classes are DBConfig, which manages the database configuration and
creates a SQLAlchemy engine and a MetaData instance, and AsyncDatabase, which
uses an instance of DBConfig to perform asynchronous database operations.</p>
<p>The module also provides a function, import_sqlalchemy, which tries to import
SQLAlchemy and its components, and raises an ImportError if SQLAlchemy is not
installed or if the installed version is not compatible.</p>
<p>The module uses the logger from the <code>dsg_lib</code> for logging, and the <code>time</code> module
for working with times. It also uses the <code>contextlib</code> module for creating
context managers, and the <code>typing</code> module for type hinting.</p>
<p>The <code>BASE</code> variable is a base class for declarative database models. It is
created using the <code>declarative_base</code> function from <code>sqlalchemy.orm</code>.</p>
<p>This module is part of the <code>dsg_lib</code> package, which provides utilities for
working with databases in Python.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_config</span>

<span class="c1"># Define your database configuration config = {</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_overflow&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span> <span class="s2">&quot;pool_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Create a DBConfig instance db_config = database_config.DBConfig(config)</span>

<span class="c1"># Use the DBConfig instance to get a database session async with</span>
<span class="n">db_config</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="c1"># Perform your database operations here pass</span>
</code></pre></div></p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DBConfig</code>


<a href="#database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>A class used to manage the database configuration and create a SQLAlchemy
engine.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.database_config.DBConfig.config">config</span></code></td>
            <td>
                  <code><span data-autorefs-optional="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the database configuration</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.database_config.DBConfig.parameters.">parameters.</span></code></td>
            <td>
                  <code>engine (Engine</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQLAlchemy engine created with the</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.database_config.DBConfig.database">database</span></code></td>
            <td>
                  <code>URI from the config. metadata (MetaData</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQLAlchemy</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Create Engine Support Functions by Database Type Confirmed by testing
[SQLITE, PostrgeSQL] To Be Tested [MySQL, Oracle, MSSQL] and should be
considered experimental ------- Option          SQLite  PostgreSQL  MySQL
Oracle  MSSQL echo                Yes         Yes         Yes     Yes
Yes future              Yes         Yes         Yes     Yes     Yes
pool_pre_ping       Yes         Yes         Yes     Yes     Yes pool_size
No          Yes         Yes     Yes     Yes max_overflow        No
Yes         Yes     Yes     Yes pool_recycle        Yes         Yes
Yes     Yes     Yes pool_timeout        No          Yes         Yes     Yes
Yes</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_config</span>

<span class="c1"># Define your database configuration config = {</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_overflow&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span> <span class="s2">&quot;pool_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Create a DBConfig instance db_config = database_config.DBConfig(config)</span>

<span class="c1"># Use the DBConfig instance to get a database session async with</span>
<span class="n">db_config</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="c1"># Perform your database operations here pass</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/database_config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DBConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to manage the database configuration and create a SQLAlchemy</span>
<span class="sd">    engine.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        config (dict): A dictionary containing the database configuration</span>
<span class="sd">        parameters. engine (Engine): The SQLAlchemy engine created with the</span>
<span class="sd">        database URI from the config. metadata (MetaData): The SQLAlchemy</span>
<span class="sd">        MetaData instance.</span>


<span class="sd">    Create Engine Support Functions by Database Type Confirmed by testing</span>
<span class="sd">    [SQLITE, PostrgeSQL] To Be Tested [MySQL, Oracle, MSSQL] and should be</span>
<span class="sd">    considered experimental ------- Option          SQLite  PostgreSQL  MySQL</span>
<span class="sd">    Oracle  MSSQL echo                Yes         Yes         Yes     Yes</span>
<span class="sd">    Yes future              Yes         Yes         Yes     Yes     Yes</span>
<span class="sd">    pool_pre_ping       Yes         Yes         Yes     Yes     Yes pool_size</span>
<span class="sd">    No          Yes         Yes     Yes     Yes max_overflow        No</span>
<span class="sd">    Yes         Yes     Yes     Yes pool_recycle        Yes         Yes</span>
<span class="sd">    Yes     Yes     Yes pool_timeout        No          Yes         Yes     Yes</span>
<span class="sd">    Yes</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>

<span class="sd">    from dsg_lib.async_database_functions import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;: &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;,</span>
<span class="sd">        &quot;echo&quot;: True, &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config = database_config.DBConfig(config)</span>

<span class="sd">    # Use the DBConfig instance to get a database session async with</span>
<span class="sd">    db_config.get_db_session() as session:</span>
<span class="sd">        # Perform your database operations here pass</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SUPPORTED_PARAMETERS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sqlite&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;future&quot;</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">},</span>
        <span class="s2">&quot;postgresql&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;echo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;future&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;max_overflow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_recycle&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_timeout&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="c1"># Add other engines here...</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the DBConfig instance with the given database configuration.</span>

<span class="sd">        The configuration should be a dictionary with the following keys: -</span>
<span class="sd">        &quot;database_uri&quot;: The URI for the database. - &quot;echo&quot;: If True, the engine</span>
<span class="sd">        will log all statements as well as a `repr()` of their parameter lists</span>
<span class="sd">        to the engines logger, which defaults to sys.stdout. - &quot;future&quot;: If</span>
<span class="sd">        True, use the future version of SQLAlchemy, which supports asyncio. -</span>
<span class="sd">        &quot;pool_pre_ping&quot;: If True, the pool will test the connection for liveness</span>
<span class="sd">        upon each checkout. - &quot;pool_size&quot;: The size of the connection pool to be</span>
<span class="sd">        maintained. - &quot;max_overflow&quot;: The number of connections that can be</span>
<span class="sd">        opened above the `pool_size` setting, when all other connections are in</span>
<span class="sd">        use. - &quot;pool_recycle&quot;: The number of seconds after which a connection is</span>
<span class="sd">        automatically recycled. This is required for MySQL, which removes</span>
<span class="sd">        connections after 8 hours idle by default. - &quot;pool_timeout&quot;: The number</span>
<span class="sd">        of seconds to wait before giving up on getting a connection from the</span>
<span class="sd">        pool.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (Dict): A dictionary containing the database configuration</span>
<span class="sd">            parameters.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there are unsupported parameters for the database</span>
<span class="sd">            engine type.</span>

<span class="sd">        Example:</span>
<span class="sd">        ```python</span>

<span class="sd">        from dsg_lib.async_database_functions import database_config</span>

<span class="sd">        # Define your database configuration config = {</span>
<span class="sd">            &quot;database_uri&quot;:</span>
<span class="sd">            &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">            &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">            &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>

<span class="sd">        # Create a DBConfig instance db_config =</span>
<span class="sd">        database_config.DBConfig(config)</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="n">engine_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">supported_parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUPPORTED_PARAMETERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">engine_type</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
        <span class="n">unsupported_parameters</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">supported_parameters</span> <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;database_uri&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">unsupported_parameters</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported parameters for </span><span class="si">{</span><span class="n">engine_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">unsupported_parameters</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

        <span class="n">engine_parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">param</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">supported_parameters</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">engine_parameters</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

    <span class="nd">@asynccontextmanager</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method returns a context manager that provides a new database</span>
<span class="sd">        session.</span>

<span class="sd">        The session is created using the SQLAlchemy engine from the DBConfig</span>
<span class="sd">        instance, and it does not expire on commit. The session is of type</span>
<span class="sd">        AsyncSession.</span>

<span class="sd">        This method should be used with the `async with` statement.</span>

<span class="sd">        Yields:</span>
<span class="sd">            AsyncSession: A new SQLAlchemy asynchronous session.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SQLAlchemyError: If a database error occurs.</span>

<span class="sd">        Example:</span>
<span class="sd">        ```python</span>

<span class="sd">        from dsg_lib.async_database_functions import database_config</span>

<span class="sd">        # Define your database configuration config = {</span>
<span class="sd">            &quot;database_uri&quot;:</span>
<span class="sd">            &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">            &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">            &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>

<span class="sd">        # Create a DBConfig instance db_config =</span>
<span class="sd">        database_config.DBConfig(config)</span>

<span class="sd">        # Use the DBConfig instance to get a database session async with</span>
<span class="sd">        db_config.get_db_session() as session:</span>
<span class="sd">            # Perform your database operations here pass</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating new database session&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Create a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">sessionmaker</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
            <span class="p">)()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Yield the session to the context manager</span>
                <span class="k">yield</span> <span class="n">session</span>
        <span class="k">except</span> <span class="n">SQLAlchemyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Log the error and raise it</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">finally</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Log the end of the database session</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Database session ended&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Initializes the DBConfig instance with the given database configuration.</p>
<p>The configuration should be a dictionary with the following keys: -
"database_uri": The URI for the database. - "echo": If True, the engine
will log all statements as well as a <code>repr()</code> of their parameter lists
to the engines logger, which defaults to sys.stdout. - "future": If
True, use the future version of SQLAlchemy, which supports asyncio. -
"pool_pre_ping": If True, the pool will test the connection for liveness
upon each checkout. - "pool_size": The size of the connection pool to be
maintained. - "max_overflow": The number of connections that can be
opened above the <code>pool_size</code> setting, when all other connections are in
use. - "pool_recycle": The number of seconds after which a connection is
automatically recycled. This is required for MySQL, which removes
connections after 8 hours idle by default. - "pool_timeout": The number
of seconds to wait before giving up on getting a connection from the
pool.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><span data-autorefs-optional-hover="typing.Dict">Dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the database configuration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there are unsupported parameters for the database</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_config</span>

<span class="c1"># Define your database configuration config = {</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span>
    <span class="s2">&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_overflow&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span> <span class="s2">&quot;pool_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Create a DBConfig instance db_config =</span>
<span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the DBConfig instance with the given database configuration.</span>

<span class="sd">    The configuration should be a dictionary with the following keys: -</span>
<span class="sd">    &quot;database_uri&quot;: The URI for the database. - &quot;echo&quot;: If True, the engine</span>
<span class="sd">    will log all statements as well as a `repr()` of their parameter lists</span>
<span class="sd">    to the engines logger, which defaults to sys.stdout. - &quot;future&quot;: If</span>
<span class="sd">    True, use the future version of SQLAlchemy, which supports asyncio. -</span>
<span class="sd">    &quot;pool_pre_ping&quot;: If True, the pool will test the connection for liveness</span>
<span class="sd">    upon each checkout. - &quot;pool_size&quot;: The size of the connection pool to be</span>
<span class="sd">    maintained. - &quot;max_overflow&quot;: The number of connections that can be</span>
<span class="sd">    opened above the `pool_size` setting, when all other connections are in</span>
<span class="sd">    use. - &quot;pool_recycle&quot;: The number of seconds after which a connection is</span>
<span class="sd">    automatically recycled. This is required for MySQL, which removes</span>
<span class="sd">    connections after 8 hours idle by default. - &quot;pool_timeout&quot;: The number</span>
<span class="sd">    of seconds to wait before giving up on getting a connection from the</span>
<span class="sd">    pool.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (Dict): A dictionary containing the database configuration</span>
<span class="sd">        parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If there are unsupported parameters for the database</span>
<span class="sd">        engine type.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>

<span class="sd">    from dsg_lib.async_database_functions import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;:</span>
<span class="sd">        &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">        &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config =</span>
<span class="sd">    database_config.DBConfig(config)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="n">engine_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">supported_parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUPPORTED_PARAMETERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">engine_type</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
    <span class="n">unsupported_parameters</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">supported_parameters</span> <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;database_uri&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">unsupported_parameters</span><span class="p">:</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unsupported parameters for </span><span class="si">{</span><span class="n">engine_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">unsupported_parameters</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

    <span class="n">engine_parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">param</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">supported_parameters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">engine_parameters</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig.get_db_session" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_db_session</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_configuration-dsg_lib.async_database_functions.database_config.DBConfig.get_db_session" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>This method returns a context manager that provides a new database
session.</p>
<p>The session is created using the SQLAlchemy engine from the DBConfig
instance, and it does not expire on commit. The session is of type
AsyncSession.</p>
<p>This method should be used with the <code>async with</code> statement.</p>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AsyncSession</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new SQLAlchemy asynchronous session.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="SQLAlchemyError">SQLAlchemyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a database error occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_config</span>

<span class="c1"># Define your database configuration config = {</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span>
    <span class="s2">&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_overflow&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span> <span class="s2">&quot;pool_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Create a DBConfig instance db_config =</span>
<span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Use the DBConfig instance to get a database session async with</span>
<span class="n">db_config</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="c1"># Perform your database operations here pass</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method returns a context manager that provides a new database</span>
<span class="sd">    session.</span>

<span class="sd">    The session is created using the SQLAlchemy engine from the DBConfig</span>
<span class="sd">    instance, and it does not expire on commit. The session is of type</span>
<span class="sd">    AsyncSession.</span>

<span class="sd">    This method should be used with the `async with` statement.</span>

<span class="sd">    Yields:</span>
<span class="sd">        AsyncSession: A new SQLAlchemy asynchronous session.</span>

<span class="sd">    Raises:</span>
<span class="sd">        SQLAlchemyError: If a database error occurs.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>

<span class="sd">    from dsg_lib.async_database_functions import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;:</span>
<span class="sd">        &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">        &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config =</span>
<span class="sd">    database_config.DBConfig(config)</span>

<span class="sd">    # Use the DBConfig instance to get a database session async with</span>
<span class="sd">    db_config.get_db_session() as session:</span>
<span class="sd">        # Perform your database operations here pass</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating new database session&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">sessionmaker</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
        <span class="p">)()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Yield the session to the context manager</span>
            <span class="k">yield</span> <span class="n">session</span>
    <span class="k">except</span> <span class="n">SQLAlchemyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Log the error and raise it</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">finally</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Log the end of the database session</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Database session ended&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div></section><section class="print-page" id="database-async_database_setup"><h1 id="database-async_database_setup-reference">Reference<a class="headerlink" href="#database-async_database_setup-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="database-async_database_setup-dsg_lib.async_database_functions.async_database" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.async_database_functions.async_database</code>


<a href="#database-async_database_setup-dsg_lib.async_database_functions.async_database" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>async_database.py.</p>
<p>This module provides classes for managing asynchronous database operations using
SQLAlchemy and asyncio.</p>


<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.async_database.- DBConfig">- DBConfig</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>Manages the database configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span data-autorefs-optional-hover="dsg_lib.async_database_functions.async_database.- AsyncDatabase">- AsyncDatabase</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>Manages the asynchronous database operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>The DBConfig class initializes the database configuration and creates a
SQLAlchemy engine and a MetaData instance.</p>
<p>The AsyncDatabase class uses an instance of DBConfig to perform asynchronous
database operations. It provides methods to get a database session and to create
tables in the database.</p>
<p>This module uses the logger from the dsg_lib.common_functions for logging.</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>

<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
</code></pre></div></p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>AsyncDatabase</code>


<a href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>A class used to manage the asynchronous database operations.</p>
<h5 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase--attributes">Attributes<a class="headerlink" href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase--attributes" title="Permanent link">&para;</a></h5>
<p>db_config : DBConfig
    an instance of DBConfig class containing the database configuration
Base : Base
    the declarative base model for SQLAlchemy</p>
<h5 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase--methods">Methods<a class="headerlink" href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase--methods" title="Permanent link">&para;</a></h5>
<p>get_db_session():
    Returns a context manager that provides a new database session.
create_tables():
    Asynchronously creates all tables in the database.</p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/async_database.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AsyncDatabase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to manage the asynchronous database operations.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    db_config : DBConfig</span>
<span class="sd">        an instance of DBConfig class containing the database configuration</span>
<span class="sd">    Base : Base</span>
<span class="sd">        the declarative base model for SQLAlchemy</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    get_db_session():</span>
<span class="sd">        Returns a context manager that provides a new database session.</span>
<span class="sd">    create_tables():</span>
<span class="sd">        Asynchronously creates all tables in the database.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_config</span><span class="p">:</span> <span class="n">DBConfig</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the AsyncDatabase class with an instance of DBConfig.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        db_config (DBConfig): An instance of DBConfig class containing the</span>
<span class="sd">        database configuration.</span>

<span class="sd">        Returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span> <span class="o">=</span> <span class="n">db_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Base</span> <span class="o">=</span> <span class="n">BASE</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncDatabase initialized&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method returns a context manager that provides a new database</span>
<span class="sd">        session.</span>

<span class="sd">        Parameters: None</span>

<span class="sd">        Returns: contextlib._GeneratorContextManager: A context manager that</span>
<span class="sd">        provides a new database session.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting database session&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method asynchronously creates all tables in the database.</span>

<span class="sd">        Parameters: None</span>

<span class="sd">        Returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating tables&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Bind the engine to the metadata of the base class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">engine</span>

            <span class="c1"># Begin a new transaction</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
                <span class="c1"># Run a function in a synchronous manner</span>
                <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Tables created successfully&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Log the error and raise it</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating tables: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span></code>

<a href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Initialize the AsyncDatabase class with an instance of DBConfig.</p>
<p>Parameters:
db_config (DBConfig): An instance of DBConfig class containing the
database configuration.</p>
<p>Returns: None</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/async_database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_config</span><span class="p">:</span> <span class="n">DBConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the AsyncDatabase class with an instance of DBConfig.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    db_config (DBConfig): An instance of DBConfig class containing the</span>
<span class="sd">    database configuration.</span>

<span class="sd">    Returns: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span> <span class="o">=</span> <span class="n">db_config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">Base</span> <span class="o">=</span> <span class="n">BASE</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;AsyncDatabase initialized&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.create_tables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_tables</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.create_tables" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>This method asynchronously creates all tables in the database.</p>
<p>Parameters: None</p>
<p>Returns: None</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/async_database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method asynchronously creates all tables in the database.</span>

<span class="sd">    Parameters: None</span>

<span class="sd">    Returns: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating tables&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Bind the engine to the metadata of the base class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">engine</span>

        <span class="c1"># Begin a new transaction</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="c1"># Run a function in a synchronous manner</span>
            <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">run_sync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Tables created successfully&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Log the error and raise it</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating tables: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.get_db_session" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_db_session</span><span class="p">()</span></code>

<a href="#database-async_database_setup-dsg_lib.async_database_functions.async_database.AsyncDatabase.get_db_session" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>This method returns a context manager that provides a new database
session.</p>
<p>Parameters: None</p>
<p>Returns: contextlib._GeneratorContextManager: A context manager that
provides a new database session.</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/async_database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method returns a context manager that provides a new database</span>
<span class="sd">    session.</span>

<span class="sd">    Parameters: None</span>

<span class="sd">    Returns: contextlib._GeneratorContextManager: A context manager that</span>
<span class="sd">    provides a new database session.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting database session&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_config</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div></section><section class="print-page" id="database-database_operations"><h1 id="database-database_operations-reference">Reference<a class="headerlink" href="#database-database_operations-reference" title="Permanent link">&para;</a></h1>
<h2 id="database-database_operations-configuration-matrix">Configuration Matrix<a class="headerlink" href="#database-database_operations-configuration-matrix" title="Permanent link">&para;</a></h2>
<p>Create Engine Support Functions by Database Type Confirmed by testing [SQLITE, PostgreSQL] To Be Tested [MySQL, Oracle, MSSQL] and should be considered experimental.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>SQLite</th>
<th>PostgreSQL</th>
<th>MySQL</th>
<th>Oracle</th>
<th>MSSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>echo</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>future</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>pool_pre_ping</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>pool_size</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>max_overflow</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>pool_recycle</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>pool_timeout</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>


<div class="doc doc-object doc-module">



<h2 id="database-database_operations-dsg_lib.async_database_functions.database_operations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dsg_lib.async_database_functions.database_operations</code>


<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

      <p>This module provides the <code>DatabaseOperations</code> class for performing CRUD operations on a database using SQLAlchemy's asynchronous session.</p>
<p>The <code>DatabaseOperations</code> class includes the following methods:</p>
<div class="highlight"><pre><span></span><code>- `create_one`: Creates a single record in the database.
- `create_many`: Creates multiple records in the database.
- `read_one`: Reads a single record from the database.
- `read_many`: Reads multiple records from the database.
- `update_one`: Updates a single record in the database.
- `update_many`: Updates multiple records in the database.
- `delete_one`: Deletes a single record from the database.
- `delete_many`: Deletes multiple records from the database.
- `read_query`: Executes a fetch query on the database and returns a list of records that match the query.
- `read_multi_query`: Executes multiple fetch queries on the database and returns a dictionary of results for each query.
- `count_query`: Counts the number of records that match a given query.
- `get_column_details`: Gets the details of the columns in a table.
- `get_primary_keys`: Gets the primary keys of a table.
- `get_table_names`: Gets the names of all tables in the database.
</code></pre></div>
<p>Each method is designed to handle errors correctly and provide a simple interface for performing database operations.</p>
<p>This module also imports the necessary SQLAlchemy and loguru modules, and the <code>AsyncDatabase</code> class from the local <code>async_database</code> module.</p>
<p>Author: Mike Ryan
Date: 2024/05/16
License: MIT</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DatabaseOperations</code>


<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


      <p>This class provides methods for performing CRUD operations on a database using SQLAlchemy's asynchronous session.</p>
<p>The methods include:</p>
<ul>
<li><code>create_one</code>: Creates a single record in the database.</li>
<li><code>create_many</code>: Creates multiple records in the database.</li>
<li><code>read_one</code>: Reads a single record from the database.</li>
<li><code>read_many</code>: Reads multiple records from the database.</li>
<li><code>update_one</code>: Updates a single record in the database.</li>
<li><code>update_many</code>: Updates multiple records in the database.</li>
<li><code>delete_one</code>: Deletes a single record from the database.</li>
<li><code>delete_many</code>: Deletes multiple records from the database.</li>
<li><code>read_query</code>: Executes a fetch query on the database and returns a list of records that match the query.</li>
<li><code>read_multi_query</code>: Executes multiple fetch queries on the database and returns a dictionary of results for each query.</li>
<li><code>count_query</code>: Counts the number of records that match a given query.</li>
<li><code>get_column_details</code>: Gets the details of the columns in a table.</li>
<li><code>get_primary_keys</code>: Gets the primary keys of a table.</li>
<li><code>get_table_names</code>: Gets the names of all tables in the database.</li>
</ul>
<p>Examples:
<div class="highlight"><pre><span></span><code><span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># create one record</span>
<span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
<span class="c1"># read one record</span>
<span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_one</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></p>

              <details class="quote">
                <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatabaseOperations</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides methods for performing CRUD operations on a database using SQLAlchemy&#39;s asynchronous session.</span>

<span class="sd">    The methods include:</span>

<span class="sd">    - `create_one`: Creates a single record in the database.</span>
<span class="sd">    - `create_many`: Creates multiple records in the database.</span>
<span class="sd">    - `read_one`: Reads a single record from the database.</span>
<span class="sd">    - `read_many`: Reads multiple records from the database.</span>
<span class="sd">    - `update_one`: Updates a single record in the database.</span>
<span class="sd">    - `update_many`: Updates multiple records in the database.</span>
<span class="sd">    - `delete_one`: Deletes a single record from the database.</span>
<span class="sd">    - `delete_many`: Deletes multiple records from the database.</span>
<span class="sd">    - `read_query`: Executes a fetch query on the database and returns a list of records that match the query.</span>
<span class="sd">    - `read_multi_query`: Executes multiple fetch queries on the database and returns a dictionary of results for each query.</span>
<span class="sd">    - `count_query`: Counts the number of records that match a given query.</span>
<span class="sd">    - `get_column_details`: Gets the details of the columns in a table.</span>
<span class="sd">    - `get_primary_keys`: Gets the primary keys of a table.</span>
<span class="sd">    - `get_table_names`: Gets the names of all tables in the database.</span>

<span class="sd">    Examples:</span>
<span class="sd">    ```python</span>
<span class="sd">    # Create a DBConfig instance</span>
<span class="sd">    config = {</span>
<span class="sd">        &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">        &quot;echo&quot;: False,</span>
<span class="sd">        &quot;future&quot;: True,</span>
<span class="sd">        &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">    }</span>
<span class="sd">    # create database configuration</span>
<span class="sd">    db_config = database_config.DBConfig(config)</span>
<span class="sd">    # Create an AsyncDatabase instance</span>
<span class="sd">    async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">    # Create a DatabaseOperations instance</span>
<span class="sd">    db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">    # create one record</span>
<span class="sd">    data = await db_ops.create_one(User(name=&#39;John Doe&#39;))</span>
<span class="sd">    # read one record</span>
<span class="sd">    record = await db_ops.read_one(User, 1)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">async_db</span><span class="p">:</span> <span class="n">AsyncDatabase</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the DatabaseOperations class.</span>

<span class="sd">        Args:</span>
<span class="sd">            async_db (module_name.AsyncDatabase): An instance of the</span>
<span class="sd">            AsyncDatabase class for performing asynchronous database operations.</span>

<span class="sd">        Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>

<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>

<span class="sd">        db_config = database_config.DBConfig(config)</span>

<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>

<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>

<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the initialization</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing DatabaseOperations instance&quot;</span><span class="p">)</span>

        <span class="c1"># Store the AsyncDatabase instance in the async_db attribute This</span>
        <span class="c1"># instance will be used for performing asynchronous database operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span> <span class="o">=</span> <span class="n">async_db</span>

        <span class="c1"># Log the successful initialization</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;DatabaseOperations instance initialized successfully&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_columns_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the details of the columns of a given table.</span>

<span class="sd">        This asynchronous method accepts a table object and returns a</span>
<span class="sd">        dictionary. Each key in the dictionary is a column name from the table,</span>
<span class="sd">        and the corresponding value is another dictionary containing details</span>
<span class="sd">        about that column, such as type, if it&#39;s nullable, if it&#39;s a primary</span>
<span class="sd">        key, if it&#39;s unique, its autoincrement status, and its default value.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): An instance of the SQLAlchemy Table class</span>
<span class="sd">            representing the database table for which column details are</span>
<span class="sd">            required.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary where each key is a column name, and each value</span>
<span class="sd">            is a dictionary with the column&#39;s details.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from sqlalchemy import Table, MetaData, Column,</span>
<span class="sd">        Integer, String from dsg_lib.async_database_functions import module_name metadata = MetaData()</span>
<span class="sd">        my_table = Table(&#39;my_table&#39;, metadata,</span>
<span class="sd">                        Column(&#39;id&#39;, Integer, primary_key=True), Column(&#39;name&#39;,</span>
<span class="sd">                        String))</span>

<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # get columns details</span>
<span class="sd">        columns = await db_ops.get_columns_details(my_table)</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Starting get_columns_details operation for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Log the start of the column retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Retrieve the details of the columns and store them in a dictionary</span>
            <span class="c1"># The keys are the column names and the values are dictionaries</span>
            <span class="c1"># containing the column details</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">type</span><span class="p">),</span>
                    <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">nullable</span><span class="p">,</span>
                    <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">primary_key</span><span class="p">,</span>
                    <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
                    <span class="s2">&quot;autoincrement&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">autoincrement</span><span class="p">,</span>
                    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
                        <span class="k">else</span> <span class="kc">None</span>
                    <span class="p">),</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">columns</span>
            <span class="p">}</span>

            <span class="c1"># Log the successful column retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully retrieved columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">columns</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Handle any exceptions that occur during the column retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;An error occurred while getting columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_primary_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the primary keys of a given table.</span>

<span class="sd">        This asynchronous method accepts a table object and returns a list</span>
<span class="sd">        containing the names of its primary keys. It is useful for understanding</span>
<span class="sd">        the structure of the table and for operations that require knowledge of</span>
<span class="sd">        the primary keys.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): An instance of the SQLAlchemy Table class</span>
<span class="sd">            representing the database table for which primary keys are required.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list containing the names of the primary keys of the table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from sqlalchemy import Table, MetaData, Column, Integer,</span>
<span class="sd">                String from dsg_lib.async_database_functions import module_name metadata = MetaData()</span>
<span class="sd">                my_table = Table(&#39;my_table&#39;, metadata,</span>
<span class="sd">                                Column(&#39;id&#39;, Integer, primary_key=True),</span>
<span class="sd">                                Column(&#39;name&#39;, String, primary_key=True))</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">                async_database,</span>
<span class="sd">                base_schema,</span>
<span class="sd">                database_config,</span>
<span class="sd">                database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>

<span class="sd">            # get primary keys</span>
<span class="sd">            primary_keys = await db_ops.get_primary_keys(my_table)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting get_primary_keys operation for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Log the start of the primary key retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting primary keys for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Retrieve the primary keys and store them in a list</span>
            <span class="n">primary_keys</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">primary_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

            <span class="c1"># Log the successful primary key retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Primary keys retrieved successfully: </span><span class="si">{</span><span class="n">primary_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">primary_keys</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Handle any exceptions that occur during the primary key retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_table_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the names of all tables in the database.</span>

<span class="sd">        This asynchronous method returns a list containing the names of all</span>
<span class="sd">        tables in the database. It is useful for database introspection,</span>
<span class="sd">        allowing the user to know which tables are available in the current</span>
<span class="sd">        database context.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list containing the names of all tables in the database.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # get table names</span>
<span class="sd">            table_names = await db_ops.get_table_names()</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting get_table_names operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Log the start of the table name retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Retrieving table names&quot;</span><span class="p">)</span>

            <span class="c1"># Retrieve the table names and store them in a list The keys of the</span>
            <span class="c1"># metadata.tables dictionary are the table names</span>
            <span class="n">table_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

            <span class="c1"># Log the successful table name retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table names retrieved successfully: </span><span class="si">{</span><span class="n">table_names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">table_names</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Handle any exceptions that occur during the table name retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a single record to the database.</span>

<span class="sd">        This asynchronous method accepts a record object and adds it to the</span>
<span class="sd">        database. If the operation is successful, it returns the added record.</span>
<span class="sd">        The method is useful for inserting a new row into a database table.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            record (Base): An instance of the SQLAlchemy declarative base class</span>
<span class="sd">            representing the record to be added to the database.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Base: The instance of the record that was added to the database.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # create one record</span>
<span class="sd">            record = await db_ops.create_one(User(name=&#39;John Doe&#39;))</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting create_one operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the record being added</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding record to session: </span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Add the record to the session and commit the changes</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="c1"># Log the successful record addition</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record added successfully: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">record</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the record addition</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds multiple records to the database.</span>

<span class="sd">        This asynchronous method accepts a list of record objects and adds them</span>
<span class="sd">        to the database. If the operation is successful, it returns the added</span>
<span class="sd">        records. This method is useful for bulk inserting multiple rows into a</span>
<span class="sd">        database table efficiently.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            records (list[Base]): A list of instances of the SQLAlchemy</span>
<span class="sd">            declarative base class, each representing a record to be added to</span>
<span class="sd">            the database.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Base]: A list of instances of the records that were added to</span>
<span class="sd">            the database.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # create many records</span>
<span class="sd">            records = await db_ops.create_many([User(name=&#39;John Doe&#39;), User(name=&#39;Jane Doe&#39;)])</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting create_many operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a timer to measure the operation time</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the number of records being added</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2"> records to session&quot;</span><span class="p">)</span>

                <span class="c1"># Add the records to the session and commit the changes</span>
                <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="c1"># Log the added records</span>
                <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">]</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records added to session: </span><span class="si">{</span><span class="n">records_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Calculate the operation time and log the successful record</span>
                <span class="c1"># addition</span>
                <span class="n">num_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Record operations were successful. </span><span class="si">{</span><span class="n">num_records</span><span class="si">}</span><span class="s2"> records were created in </span><span class="si">{</span><span class="n">t1</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
                <span class="p">)</span>

                <span class="k">return</span> <span class="n">records</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the record addition</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">count_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes a count query on the database and returns the number of records</span>
<span class="sd">        that match the query.</span>

<span class="sd">        This asynchronous method accepts a SQLAlchemy `Select` query object and</span>
<span class="sd">        returns the count of records that match the query. This is particularly</span>
<span class="sd">        useful for getting the total number of records that satisfy certain</span>
<span class="sd">        conditions without actually fetching the records themselves.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            query (Select): A SQLAlchemy `Select` query object specifying the</span>
<span class="sd">            conditions to count records for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of records that match the query.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the execution of the query.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # count query</span>
<span class="sd">            count = await db_ops.count_query(select(User).where(User.age &gt; 30))</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting count_query operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the query being executed</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing count query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Execute the count query and retrieve the count</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">())</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">subquery</span><span class="p">())</span>
                <span class="p">)</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalar</span><span class="p">()</span>

                <span class="c1"># Log the successful query execution</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Count query executed successfully. Result: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">count</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the query execution</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">read_one_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves a single record from the database based on the provided query.</span>

<span class="sd">        This asynchronous method accepts a SQL query object and returns the</span>
<span class="sd">        first record that matches the query. If no record matches the query, it</span>
<span class="sd">        returns None. This method is useful for fetching specific data</span>
<span class="sd">        when the expected result is a single record.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            query (Select): An instance of the SQLAlchemy Select class,</span>
<span class="sd">            representing the query to be executed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Result: The first record that matches the query or None if no record matches.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the database operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # read one record</span>
<span class="sd">            record = await db_ops.read_one_record(select(User).where(User.name == &#39;John Doe&#39;))</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting read_one_record operation for </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the start of the record retrieval</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting record with query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Execute the query and retrieve the first record</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                <span class="n">record</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalar_one</span><span class="p">()</span>

                <span class="c1"># Log the successful record retrieval</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record retrieved successfully: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">record</span>

        <span class="k">except</span> <span class="n">NoResultFound</span><span class="p">:</span>
            <span class="c1"># No record was found</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No record found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Handle any exceptions that occur during the record retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">read_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes a fetch query on the database and returns a list of records</span>
<span class="sd">        that match the query.</span>

<span class="sd">        This asynchronous method accepts a SQLAlchemy `Select` query object.</span>
<span class="sd">        It returns a list of records that match the query.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            query (Select): A SQLAlchemy `Select` query object specifying the</span>
<span class="sd">            conditions to fetch records for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of records that match the query.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the execution of the query.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # read query</span>
<span class="sd">            records = await db_ops.read_query(select(User).where(User.age &gt; 30))</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting read_query operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the query being executed</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing fetch query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Execute the fetch query and retrieve the records</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                <span class="n">records</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result: </span><span class="si">{</span><span class="n">records</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># Log the successful query execution</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
                    <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span>
                <span class="p">):</span>  <span class="c1"># pragma: no cover</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result is a tuple </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="c1"># If all records are tuples, convert them to dictionaries</span>
                    <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">((</span><span class="s2">&quot;request_group_id&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">),</span> <span class="n">record</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
                        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span>
                    <span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result is a dictionary </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="c1"># Otherwise, try to convert the records to dictionaries using the __dict__ attribute</span>
                    <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">]</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Fetch query executed successfully. Records: </span><span class="si">{</span><span class="n">records_data</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="k">return</span> <span class="n">records</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the query execution</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">read_multi_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queries</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes multiple fetch queries on the database and returns a dictionary</span>
<span class="sd">        of results for each query.</span>

<span class="sd">        This asynchronous method takes a dictionary where each key is a query</span>
<span class="sd">        name and each value is a SQLAlchemy `Select` query object. The method executes each</span>
<span class="sd">        query and returns a dictionary where each key is the query name, and the</span>
<span class="sd">        corresponding value is a list of records that match that query.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            queries (Dict[str, Select]): A dictionary of SQLAlchemy `Select`</span>
<span class="sd">            query objects.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary where each key is a query name and each value is</span>
<span class="sd">            a list of records that match the query.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the execution of the queries.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # read multi query</span>
<span class="sd">            queries = {</span>
<span class="sd">                &quot;query1&quot;: select(User).where(User.age &gt; 30),</span>
<span class="sd">                &quot;query2&quot;: select(User).where(User.age &lt; 20),</span>
<span class="sd">            }</span>
<span class="sd">            results = await db_ops.read_multi_query(queries)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting read_multi_query operation&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">query_name</span><span class="p">,</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="c1"># Log the query being executed</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing fetch query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Execute the fetch query and retrieve the records</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

                    <span class="c1"># Convert the records to dictionaries for logging</span>
                    <span class="n">data_dicts</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetch result for query &#39;</span><span class="si">{</span><span class="n">query_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">data_dicts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Store the records in the results dictionary</span>
                    <span class="n">results</span><span class="p">[</span><span class="n">query_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">return</span> <span class="n">results</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the query execution</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_values</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates a single record in the database identified by its ID.</span>

<span class="sd">        This asynchronous method takes a SQLAlchemy `Table` object, a record ID,</span>
<span class="sd">        and a dictionary of new values to update the record. It updates the</span>
<span class="sd">        specified record in the given table with the new values. The method does</span>
<span class="sd">        not allow updating certain fields, such as &#39;id&#39; or &#39;date_created&#39;.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            table (Table): The SQLAlchemy `Table` object representing the table</span>
<span class="sd">            in the database. record_id (str): The ID of the record to be</span>
<span class="sd">            updated. new_values (dict): A dictionary containing the fields to</span>
<span class="sd">            update and their new values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Base: The updated record if successful; otherwise, an error</span>
<span class="sd">            dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the update operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # update one record</span>
<span class="sd">            record = await db_ops.update_one(User, 1, {&#39;name&#39;: &#39;John Smith&#39;})</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">non_updatable_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;date_created&quot;</span><span class="p">]</span>

        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Starting update_one operation for record_id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2"> in table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the record being fetched</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Fetch the record</span>
                <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="p">:</span>
                    <span class="c1"># Log the error if no record is found</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No record found with pkid: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="p">{</span>
                        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Record not found&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No record found with pkid </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">}</span>

                <span class="c1"># Log the record being updated</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating record with new values: </span><span class="si">{</span><span class="n">new_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Update the record with the new values</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">non_updatable_fields</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="c1"># Log the successful record update</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record updated successfully: </span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">pkid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">record</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the record update</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a single record from the database based on the provided table</span>
<span class="sd">        and record ID.</span>

<span class="sd">        This asynchronous method accepts a SQLAlchemy `Table` object and a</span>
<span class="sd">        record ID. It attempts to delete the record with the given ID from the</span>
<span class="sd">        specified table. If the record is successfully deleted, it returns a</span>
<span class="sd">        success message. If no record with the given ID is found, it returns an</span>
<span class="sd">        error message.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): An instance of the SQLAlchemy `Table` class</span>
<span class="sd">            representing the database table from which the record will be</span>
<span class="sd">            deleted. record_id (str): The ID of the record to be deleted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary containing a success message if the record was</span>
<span class="sd">            deleted successfully, or an error message if the record was not</span>
<span class="sd">            found or an exception occurred.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the delete operation.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">            )</span>
<span class="sd">            # Create a DBConfig instance</span>
<span class="sd">            config = {</span>
<span class="sd">                # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">                &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">                &quot;echo&quot;: False,</span>
<span class="sd">                &quot;future&quot;: True,</span>
<span class="sd">                # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">                # &quot;pool_size&quot;: 10,</span>
<span class="sd">                # &quot;max_overflow&quot;: 10,</span>
<span class="sd">                &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">                # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">            }</span>
<span class="sd">            # create database configuration</span>
<span class="sd">            db_config = database_config.DBConfig(config)</span>
<span class="sd">            # Create an AsyncDatabase instance</span>
<span class="sd">            async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">            # Create a DatabaseOperations instance</span>
<span class="sd">            db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">            # delete one record</span>
<span class="sd">            result = await db_ops.delete_one(User, 1)</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the start of the operation</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Starting delete_one operation for record_id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2"> in table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the record being fetched</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Fetch the record</span>
                <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

                <span class="c1"># If the record doesn&#39;t exist, return an error</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No record found with pkid: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="p">{</span>
                        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Record not found&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No record found with pkid </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">}</span>

                <span class="c1"># Log the record being deleted</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Delete the record</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

                <span class="c1"># Log the successful record deletion from the session</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record deleted from session: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Log the start of the commit</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Committing changes to delete record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="c1"># Commit the changes</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="c1"># Log the successful record deletion</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record deleted successfully: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="s2">&quot;Record deleted successfully&quot;</span><span class="p">}</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the record deletion</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_many</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">DeclarativeMeta</span><span class="p">],</span>
        <span class="n">id_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pkid&quot;</span><span class="p">,</span>
        <span class="n">id_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes multiple records from the specified table in the database.</span>

<span class="sd">        This method takes a table, an optional id column name, and a list of id values. It deletes the records in the table where the id column matches any of the id values in the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Type[DeclarativeMeta]): The table from which to delete records.</span>
<span class="sd">            id_column_name (str, optional): The name of the id column in the table. Defaults to &quot;pkid&quot;.</span>
<span class="sd">            id_values (List[int], optional): A list of id values for the records to delete. Defaults to [].</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The number of records deleted from the table.</span>

<span class="sd">        Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # Delete multiple records</span>
<span class="sd">        deleted_count = await db_ops.delete_many(User, &#39;id&#39;, [1, 2, 3])</span>
<span class="sd">        print(f&quot;Deleted {deleted_count} records.&quot;)</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">id_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">id_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Start a timer to measure the operation time</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="c1"># Start a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Log the number of records being deleted</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">id_values</span><span class="p">)</span><span class="si">}</span><span class="s2"> records from session&quot;</span><span class="p">)</span>

                <span class="c1"># Create delete statement</span>
                <span class="n">stmt</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">id_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">id_values</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="c1"># Execute the delete statement and fetch result</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

                <span class="c1"># Commit the changes</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="c1"># Get the count of deleted records</span>
                <span class="n">deleted_count</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">rowcount</span>

                <span class="c1"># Log the deleted records</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records deleted from session: </span><span class="si">{</span><span class="n">deleted_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Calculate the operation time and log the successful record deletion</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Record operations were successful. </span><span class="si">{</span><span class="n">deleted_count</span><span class="si">}</span><span class="s2"> records were deleted in </span><span class="si">{</span><span class="n">t1</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
                <span class="p">)</span>

                <span class="k">return</span> <span class="n">deleted_count</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="c1"># Handle any exceptions that occur during the record deletion</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span></code>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Initializes a new instance of the DatabaseOperations class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>async_db</code></td>
            <td>
                  <code><span data-autorefs-optional-hover="module_name.AsyncDatabase">AsyncDatabase</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>

<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>

<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">async_db</span><span class="p">:</span> <span class="n">AsyncDatabase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes a new instance of the DatabaseOperations class.</span>

<span class="sd">    Args:</span>
<span class="sd">        async_db (module_name.AsyncDatabase): An instance of the</span>
<span class="sd">        AsyncDatabase class for performing asynchronous database operations.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import (</span>
<span class="sd">    async_database,</span>
<span class="sd">    base_schema,</span>
<span class="sd">    database_config,</span>
<span class="sd">    database_operations,</span>
<span class="sd">    )</span>

<span class="sd">    config = {</span>
<span class="sd">        # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">        &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">        &quot;echo&quot;: False,</span>
<span class="sd">        &quot;future&quot;: True,</span>
<span class="sd">        # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">        # &quot;pool_size&quot;: 10,</span>
<span class="sd">        # &quot;max_overflow&quot;: 10,</span>
<span class="sd">        &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">        # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    db_config = database_config.DBConfig(config)</span>

<span class="sd">    async_db = async_database.AsyncDatabase(db_config)</span>

<span class="sd">    db_ops = database_operations.DatabaseOperations(async_db)</span>

<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the initialization</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Initializing DatabaseOperations instance&quot;</span><span class="p">)</span>

    <span class="c1"># Store the AsyncDatabase instance in the async_db attribute This</span>
    <span class="c1"># instance will be used for performing asynchronous database operations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span> <span class="o">=</span> <span class="n">async_db</span>

    <span class="c1"># Log the successful initialization</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;DatabaseOperations instance initialized successfully&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.count_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">count_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.count_query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Executes a count query on the database and returns the number of records
that match the query.</p>
<p>This asynchronous method accepts a SQLAlchemy <code>Select</code> query object and
returns the count of records that match the query. This is particularly
useful for getting the total number of records that satisfy certain
conditions without actually fetching the records themselves.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td>
                  <code><span data-autorefs-optional="Select">Select</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A SQLAlchemy <code>Select</code> query object specifying the</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of records that match the query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the execution of the query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># count query</span>
<span class="n">count</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">count_query</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">))</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">count_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a count query on the database and returns the number of records</span>
<span class="sd">    that match the query.</span>

<span class="sd">    This asynchronous method accepts a SQLAlchemy `Select` query object and</span>
<span class="sd">    returns the count of records that match the query. This is particularly</span>
<span class="sd">    useful for getting the total number of records that satisfy certain</span>
<span class="sd">    conditions without actually fetching the records themselves.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        query (Select): A SQLAlchemy `Select` query object specifying the</span>
<span class="sd">        conditions to count records for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The number of records that match the query.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the execution of the query.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # count query</span>
<span class="sd">        count = await db_ops.count_query(select(User).where(User.age &gt; 30))</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting count_query operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the query being executed</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing count query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Execute the count query and retrieve the count</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="n">select</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">())</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">subquery</span><span class="p">())</span>
            <span class="p">)</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalar</span><span class="p">()</span>

            <span class="c1"># Log the successful query execution</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Count query executed successfully. Result: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">count</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the query execution</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.create_many" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_many</span><span class="p">(</span><span class="n">records</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.create_many" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Adds multiple records to the database.</p>
<p>This asynchronous method accepts a list of record objects and adds them
to the database. If the operation is successful, it returns the added
records. This method is useful for bulk inserting multiple rows into a
database table efficiently.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>records</code></td>
            <td>
                  <code><span data-autorefs-optional="list">list</span>[<span data-autorefs-optional="Base">Base</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of instances of the SQLAlchemy</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Base]: A list of instances of the records that were added to</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the database.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># create many records</span>
<span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_many</span><span class="p">([</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">),</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Jane Doe&#39;</span><span class="p">)])</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds multiple records to the database.</span>

<span class="sd">    This asynchronous method accepts a list of record objects and adds them</span>
<span class="sd">    to the database. If the operation is successful, it returns the added</span>
<span class="sd">    records. This method is useful for bulk inserting multiple rows into a</span>
<span class="sd">    database table efficiently.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        records (list[Base]): A list of instances of the SQLAlchemy</span>
<span class="sd">        declarative base class, each representing a record to be added to</span>
<span class="sd">        the database.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Base]: A list of instances of the records that were added to</span>
<span class="sd">        the database.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # create many records</span>
<span class="sd">        records = await db_ops.create_many([User(name=&#39;John Doe&#39;), User(name=&#39;Jane Doe&#39;)])</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting create_many operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a timer to measure the operation time</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the number of records being added</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2"> records to session&quot;</span><span class="p">)</span>

            <span class="c1"># Add the records to the session and commit the changes</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="c1"># Log the added records</span>
            <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records added to session: </span><span class="si">{</span><span class="n">records_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Calculate the operation time and log the successful record</span>
            <span class="c1"># addition</span>
            <span class="n">num_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Record operations were successful. </span><span class="si">{</span><span class="n">num_records</span><span class="si">}</span><span class="s2"> records were created in </span><span class="si">{</span><span class="n">t1</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">records</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the record addition</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.create_one" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_one</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.create_one" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Adds a single record to the database.</p>
<p>This asynchronous method accepts a record object and adds it to the
database. If the operation is successful, it returns the added record.
The method is useful for inserting a new row into a database table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>record</code></td>
            <td>
                  <code><span data-autorefs-optional="Base">Base</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the SQLAlchemy declarative base class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Base</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The instance of the record that was added to the database.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># create one record</span>
<span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a single record to the database.</span>

<span class="sd">    This asynchronous method accepts a record object and adds it to the</span>
<span class="sd">    database. If the operation is successful, it returns the added record.</span>
<span class="sd">    The method is useful for inserting a new row into a database table.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        record (Base): An instance of the SQLAlchemy declarative base class</span>
<span class="sd">        representing the record to be added to the database.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Base: The instance of the record that was added to the database.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # create one record</span>
<span class="sd">        record = await db_ops.create_one(User(name=&#39;John Doe&#39;))</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting create_one operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the record being added</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding record to session: </span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Add the record to the session and commit the changes</span>
            <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="c1"># Log the successful record addition</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record added successfully: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">record</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the record addition</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.delete_many" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">delete_many</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">id_column_name</span><span class="o">=</span><span class="s1">&#39;pkid&#39;</span><span class="p">,</span> <span class="n">id_values</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.delete_many" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Deletes multiple records from the specified table in the database.</p>
<p>This method takes a table, an optional id column name, and a list of id values. It deletes the records in the table where the id column matches any of the id values in the list.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td>
                  <code><span data-autorefs-optional-hover="typing.Type">Type</span>[<span data-autorefs-optional-hover="sqlalchemy.ext.declarative.DeclarativeMeta">DeclarativeMeta</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table from which to delete records.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>id_column_name</code></td>
            <td>
                  <code><span data-autorefs-optional="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the id column in the table. Defaults to "pkid".</p>
              </div>
            </td>
            <td>
                  <code>&#39;pkid&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>id_values</code></td>
            <td>
                  <code><span data-autorefs-optional-hover="typing.List">List</span>[<span data-autorefs-optional="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of id values for the records to delete. Defaults to [].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span data-autorefs-optional="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of records deleted from the table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># Delete multiple records</span>
<span class="n">deleted_count</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">delete_many</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted </span><span class="si">{</span><span class="n">deleted_count</span><span class="si">}</span><span class="s2"> records.&quot;</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_many</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">DeclarativeMeta</span><span class="p">],</span>
    <span class="n">id_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pkid&quot;</span><span class="p">,</span>
    <span class="n">id_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes multiple records from the specified table in the database.</span>

<span class="sd">    This method takes a table, an optional id column name, and a list of id values. It deletes the records in the table where the id column matches any of the id values in the list.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (Type[DeclarativeMeta]): The table from which to delete records.</span>
<span class="sd">        id_column_name (str, optional): The name of the id column in the table. Defaults to &quot;pkid&quot;.</span>
<span class="sd">        id_values (List[int], optional): A list of id values for the records to delete. Defaults to [].</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The number of records deleted from the table.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">    )</span>
<span class="sd">    # Create a DBConfig instance</span>
<span class="sd">    config = {</span>
<span class="sd">        &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">        &quot;echo&quot;: False,</span>
<span class="sd">        &quot;future&quot;: True,</span>
<span class="sd">        &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">    }</span>
<span class="sd">    # create database configuration</span>
<span class="sd">    db_config = database_config.DBConfig(config)</span>
<span class="sd">    # Create an AsyncDatabase instance</span>
<span class="sd">    async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">    # Create a DatabaseOperations instance</span>
<span class="sd">    db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">    # Delete multiple records</span>
<span class="sd">    deleted_count = await db_ops.delete_many(User, &#39;id&#39;, [1, 2, 3])</span>
<span class="sd">    print(f&quot;Deleted {deleted_count} records.&quot;)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">id_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">id_values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a timer to measure the operation time</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the number of records being deleted</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">id_values</span><span class="p">)</span><span class="si">}</span><span class="s2"> records from session&quot;</span><span class="p">)</span>

            <span class="c1"># Create delete statement</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">table</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">id_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">id_values</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Execute the delete statement and fetch result</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>

            <span class="c1"># Commit the changes</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="c1"># Get the count of deleted records</span>
            <span class="n">deleted_count</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">rowcount</span>

            <span class="c1"># Log the deleted records</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Records deleted from session: </span><span class="si">{</span><span class="n">deleted_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Calculate the operation time and log the successful record deletion</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Record operations were successful. </span><span class="si">{</span><span class="n">deleted_count</span><span class="si">}</span><span class="s2"> records were deleted in </span><span class="si">{</span><span class="n">t1</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">deleted_count</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the record deletion</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.delete_one" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">delete_one</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.delete_one" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Deletes a single record from the database based on the provided table
and record ID.</p>
<p>This asynchronous method accepts a SQLAlchemy <code>Table</code> object and a
record ID. It attempts to delete the record with the given ID from the
specified table. If the record is successfully deleted, it returns a
success message. If no record with the given ID is found, it returns an
error message.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td>
                  <code><span data-autorefs-optional="Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the SQLAlchemy <code>Table</code> class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>deleted.</code></td>
            <td>
                  <code>record_id (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the record to be deleted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing a success message if the record was</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>deleted successfully, or an error message if the record was not</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>found or an exception occurred.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the delete operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># delete one record</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">delete_one</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a single record from the database based on the provided table</span>
<span class="sd">    and record ID.</span>

<span class="sd">    This asynchronous method accepts a SQLAlchemy `Table` object and a</span>
<span class="sd">    record ID. It attempts to delete the record with the given ID from the</span>
<span class="sd">    specified table. If the record is successfully deleted, it returns a</span>
<span class="sd">    success message. If no record with the given ID is found, it returns an</span>
<span class="sd">    error message.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (Table): An instance of the SQLAlchemy `Table` class</span>
<span class="sd">        representing the database table from which the record will be</span>
<span class="sd">        deleted. record_id (str): The ID of the record to be deleted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing a success message if the record was</span>
<span class="sd">        deleted successfully, or an error message if the record was not</span>
<span class="sd">        found or an exception occurred.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the delete operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # delete one record</span>
<span class="sd">        result = await db_ops.delete_one(User, 1)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Starting delete_one operation for record_id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2"> in table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the record being fetched</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Fetch the record</span>
            <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>

            <span class="c1"># If the record doesn&#39;t exist, return an error</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No record found with pkid: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Record not found&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No record found with pkid </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">}</span>

            <span class="c1"># Log the record being deleted</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Delete the record</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

            <span class="c1"># Log the successful record deletion from the session</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record deleted from session: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Log the start of the commit</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Committing changes to delete record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Commit the changes</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="c1"># Log the successful record deletion</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record deleted successfully: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="s2">&quot;Record deleted successfully&quot;</span><span class="p">}</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the record deletion</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_columns_details" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_columns_details</span><span class="p">(</span><span class="n">table</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_columns_details" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the details of the columns of a given table.</p>
<p>This asynchronous method accepts a table object and returns a
dictionary. Each key in the dictionary is a column name from the table,
and the corresponding value is another dictionary containing details
about that column, such as type, if it's nullable, if it's a primary
key, if it's unique, its autoincrement status, and its default value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td>
                  <code><span data-autorefs-optional="Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the SQLAlchemy Table class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where each key is a column name, and each value</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>is a dictionary with the column's details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span>
<span class="n">Integer</span><span class="p">,</span> <span class="n">String</span> <span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">module_name</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
<span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
                <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">String</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># get columns details</span>
<span class="n">columns</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_columns_details</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_columns_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the details of the columns of a given table.</span>

<span class="sd">    This asynchronous method accepts a table object and returns a</span>
<span class="sd">    dictionary. Each key in the dictionary is a column name from the table,</span>
<span class="sd">    and the corresponding value is another dictionary containing details</span>
<span class="sd">    about that column, such as type, if it&#39;s nullable, if it&#39;s a primary</span>
<span class="sd">    key, if it&#39;s unique, its autoincrement status, and its default value.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (Table): An instance of the SQLAlchemy Table class</span>
<span class="sd">        representing the database table for which column details are</span>
<span class="sd">        required.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary where each key is a column name, and each value</span>
<span class="sd">        is a dictionary with the column&#39;s details.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from sqlalchemy import Table, MetaData, Column,</span>
<span class="sd">    Integer, String from dsg_lib.async_database_functions import module_name metadata = MetaData()</span>
<span class="sd">    my_table = Table(&#39;my_table&#39;, metadata,</span>
<span class="sd">                    Column(&#39;id&#39;, Integer, primary_key=True), Column(&#39;name&#39;,</span>
<span class="sd">                    String))</span>

<span class="sd">    from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">    )</span>
<span class="sd">    # Create a DBConfig instance</span>
<span class="sd">    config = {</span>
<span class="sd">        # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">        &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">        &quot;echo&quot;: False,</span>
<span class="sd">        &quot;future&quot;: True,</span>
<span class="sd">        # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">        # &quot;pool_size&quot;: 10,</span>
<span class="sd">        # &quot;max_overflow&quot;: 10,</span>
<span class="sd">        &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">        # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>
<span class="sd">    # create database configuration</span>
<span class="sd">    db_config = database_config.DBConfig(config)</span>
<span class="sd">    # Create an AsyncDatabase instance</span>
<span class="sd">    async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">    # Create a DatabaseOperations instance</span>
<span class="sd">    db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">    # get columns details</span>
<span class="sd">    columns = await db_ops.get_columns_details(my_table)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Starting get_columns_details operation for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Log the start of the column retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Retrieve the details of the columns and store them in a dictionary</span>
        <span class="c1"># The keys are the column names and the values are dictionaries</span>
        <span class="c1"># containing the column details</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">type</span><span class="p">),</span>
                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">nullable</span><span class="p">,</span>
                <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">primary_key</span><span class="p">,</span>
                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
                <span class="s2">&quot;autoincrement&quot;</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">autoincrement</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
                    <span class="k">else</span> <span class="kc">None</span>
                <span class="p">),</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">columns</span>
        <span class="p">}</span>

        <span class="c1"># Log the successful column retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully retrieved columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">columns</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Handle any exceptions that occur during the column retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;An error occurred while getting columns for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_primary_keys" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_primary_keys</span><span class="p">(</span><span class="n">table</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_primary_keys" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the primary keys of a given table.</p>
<p>This asynchronous method accepts a table object and returns a list
containing the names of its primary keys. It is useful for understanding
the structure of the table and for operations that require knowledge of
the primary keys.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td>
                  <code><span data-autorefs-optional="Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the SQLAlchemy Table class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list containing the names of the primary keys of the table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span>
    <span class="n">String</span> <span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">module_name</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
    <span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
                    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                    <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>

<span class="c1"># get primary keys</span>
<span class="n">primary_keys</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_primary_keys</span><span class="p">(</span><span class="n">my_table</span><span class="p">)</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_primary_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the primary keys of a given table.</span>

<span class="sd">    This asynchronous method accepts a table object and returns a list</span>
<span class="sd">    containing the names of its primary keys. It is useful for understanding</span>
<span class="sd">    the structure of the table and for operations that require knowledge of</span>
<span class="sd">    the primary keys.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (Table): An instance of the SQLAlchemy Table class</span>
<span class="sd">        representing the database table for which primary keys are required.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list containing the names of the primary keys of the table.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from sqlalchemy import Table, MetaData, Column, Integer,</span>
<span class="sd">            String from dsg_lib.async_database_functions import module_name metadata = MetaData()</span>
<span class="sd">            my_table = Table(&#39;my_table&#39;, metadata,</span>
<span class="sd">                            Column(&#39;id&#39;, Integer, primary_key=True),</span>
<span class="sd">                            Column(&#39;name&#39;, String, primary_key=True))</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">            async_database,</span>
<span class="sd">            base_schema,</span>
<span class="sd">            database_config,</span>
<span class="sd">            database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>

<span class="sd">        # get primary keys</span>
<span class="sd">        primary_keys = await db_ops.get_primary_keys(my_table)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting get_primary_keys operation for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Log the start of the primary key retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting primary keys for table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Retrieve the primary keys and store them in a list</span>
        <span class="n">primary_keys</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">__table__</span><span class="o">.</span><span class="n">primary_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="c1"># Log the successful primary key retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Primary keys retrieved successfully: </span><span class="si">{</span><span class="n">primary_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">primary_keys</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Handle any exceptions that occur during the primary key retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_table_names" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_table_names</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.get_table_names" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves the names of all tables in the database.</p>
<p>This asynchronous method returns a list containing the names of all
tables in the database. It is useful for database introspection,
allowing the user to know which tables are available in the current
database context.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list containing the names of all tables in the database.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># get table names</span>
<span class="n">table_names</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_table_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the names of all tables in the database.</span>

<span class="sd">    This asynchronous method returns a list containing the names of all</span>
<span class="sd">    tables in the database. It is useful for database introspection,</span>
<span class="sd">    allowing the user to know which tables are available in the current</span>
<span class="sd">    database context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list containing the names of all tables in the database.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # get table names</span>
<span class="sd">        table_names = await db_ops.get_table_names()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting get_table_names operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Log the start of the table name retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Retrieving table names&quot;</span><span class="p">)</span>

        <span class="c1"># Retrieve the table names and store them in a list The keys of the</span>
        <span class="c1"># metadata.tables dictionary are the table names</span>
        <span class="n">table_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="c1"># Log the successful table name retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table names retrieved successfully: </span><span class="si">{</span><span class="n">table_names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table_names</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Handle any exceptions that occur during the table name retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_multi_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">read_multi_query</span><span class="p">(</span><span class="n">queries</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_multi_query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Executes multiple fetch queries on the database and returns a dictionary
of results for each query.</p>
<p>This asynchronous method takes a dictionary where each key is a query
name and each value is a SQLAlchemy <code>Select</code> query object. The method executes each
query and returns a dictionary where each key is the query name, and the
corresponding value is a list of records that match that query.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>queries</code></td>
            <td>
                  <code><span data-autorefs-optional-hover="typing.Dict">Dict</span>[<span data-autorefs-optional="str">str</span>, <span data-autorefs-optional="Select">Select</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of SQLAlchemy <code>Select</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where each key is a query name and each value is</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of records that match the query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the execution of the queries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># read multi query</span>
<span class="n">queries</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;query1&quot;</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">),</span>
    <span class="s2">&quot;query2&quot;</span><span class="p">:</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">),</span>
<span class="p">}</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_multi_query</span><span class="p">(</span><span class="n">queries</span><span class="p">)</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">read_multi_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queries</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes multiple fetch queries on the database and returns a dictionary</span>
<span class="sd">    of results for each query.</span>

<span class="sd">    This asynchronous method takes a dictionary where each key is a query</span>
<span class="sd">    name and each value is a SQLAlchemy `Select` query object. The method executes each</span>
<span class="sd">    query and returns a dictionary where each key is the query name, and the</span>
<span class="sd">    corresponding value is a list of records that match that query.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        queries (Dict[str, Select]): A dictionary of SQLAlchemy `Select`</span>
<span class="sd">        query objects.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary where each key is a query name and each value is</span>
<span class="sd">        a list of records that match the query.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the execution of the queries.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # read multi query</span>
<span class="sd">        queries = {</span>
<span class="sd">            &quot;query1&quot;: select(User).where(User.age &gt; 30),</span>
<span class="sd">            &quot;query2&quot;: select(User).where(User.age &lt; 20),</span>
<span class="sd">        }</span>
<span class="sd">        results = await db_ops.read_multi_query(queries)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting read_multi_query operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">query_name</span><span class="p">,</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Log the query being executed</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing fetch query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Execute the fetch query and retrieve the records</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

                <span class="c1"># Convert the records to dictionaries for logging</span>
                <span class="n">data_dicts</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetch result for query &#39;</span><span class="si">{</span><span class="n">query_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">data_dicts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Store the records in the results dictionary</span>
                <span class="n">results</span><span class="p">[</span><span class="n">query_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the query execution</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_one_record" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">read_one_record</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_one_record" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Retrieves a single record from the database based on the provided query.</p>
<p>This asynchronous method accepts a SQL query object and returns the
first record that matches the query. If no record matches the query, it
returns None. This method is useful for fetching specific data
when the expected result is a single record.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td>
                  <code><span data-autorefs-optional="Select">Select</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the SQLAlchemy Select class,</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Result</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The first record that matches the query or None if no record matches.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the database operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># read one record</span>
<span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_one_record</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">read_one_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves a single record from the database based on the provided query.</span>

<span class="sd">    This asynchronous method accepts a SQL query object and returns the</span>
<span class="sd">    first record that matches the query. If no record matches the query, it</span>
<span class="sd">    returns None. This method is useful for fetching specific data</span>
<span class="sd">    when the expected result is a single record.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        query (Select): An instance of the SQLAlchemy Select class,</span>
<span class="sd">        representing the query to be executed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Result: The first record that matches the query or None if no record matches.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the database operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # read one record</span>
<span class="sd">        record = await db_ops.read_one_record(select(User).where(User.name == &#39;John Doe&#39;))</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting read_one_record operation for </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the start of the record retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting record with query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Execute the query and retrieve the first record</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="n">record</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalar_one</span><span class="p">()</span>

            <span class="c1"># Log the successful record retrieval</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record retrieved successfully: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">record</span>

    <span class="k">except</span> <span class="n">NoResultFound</span><span class="p">:</span>
        <span class="c1"># No record was found</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No record found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Handle any exceptions that occur during the record retrieval</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">read_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.read_query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Executes a fetch query on the database and returns a list of records
that match the query.</p>
<p>This asynchronous method accepts a SQLAlchemy <code>Select</code> query object.
It returns a list of records that match the query.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query</code></td>
            <td>
                  <code><span data-autorefs-optional="Select">Select</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A SQLAlchemy <code>Select</code> query object specifying the</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of records that match the query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the execution of the query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># read query</span>
<span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_query</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">))</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">read_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a fetch query on the database and returns a list of records</span>
<span class="sd">    that match the query.</span>

<span class="sd">    This asynchronous method accepts a SQLAlchemy `Select` query object.</span>
<span class="sd">    It returns a list of records that match the query.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        query (Select): A SQLAlchemy `Select` query object specifying the</span>
<span class="sd">        conditions to fetch records for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of records that match the query.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the execution of the query.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # read query</span>
<span class="sd">        records = await db_ops.read_query(select(User).where(User.age &gt; 30))</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting read_query operation&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the query being executed</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing fetch query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Execute the fetch query and retrieve the records</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalars</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result: </span><span class="si">{</span><span class="n">records</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Log the successful query execution</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span>
            <span class="p">):</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result is a tuple </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># If all records are tuples, convert them to dictionaries</span>
                <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">((</span><span class="s2">&quot;request_group_id&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">),</span> <span class="n">record</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
                    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;read_query result is a dictionary </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># Otherwise, try to convert the records to dictionaries using the __dict__ attribute</span>
                <span class="n">records_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">]</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Fetch query executed successfully. Records: </span><span class="si">{</span><span class="n">records_data</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">records</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the query execution</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.update_one" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_one</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">,</span> <span class="n">new_values</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.DatabaseOperations.update_one" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

      <p>Updates a single record in the database identified by its ID.</p>
<p>This asynchronous method takes a SQLAlchemy <code>Table</code> object, a record ID,
and a dictionary of new values to update the record. It updates the
specified record in the given table with the new values. The method does
not allow updating certain fields, such as 'id' or 'date_created'.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>table</code></td>
            <td>
                  <code><span data-autorefs-optional="Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQLAlchemy <code>Table</code> object representing the table</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>in</code></td>
            <td>
                  <code>the database. record_id (str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the record to be</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>updated.</code></td>
            <td>
                  <code>new_values (dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the fields to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Base</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The updated record if successful; otherwise, an error</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the update operation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">async_database</span><span class="p">,</span>
<span class="n">base_schema</span><span class="p">,</span>
<span class="n">database_config</span><span class="p">,</span>
<span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>
<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>
<span class="c1"># update one record</span>
<span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">update_one</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John Smith&#39;</span><span class="p">})</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span>
<span class="normal">991</span>
<span class="normal">992</span>
<span class="normal">993</span>
<span class="normal">994</span>
<span class="normal">995</span>
<span class="normal">996</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_values</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a single record in the database identified by its ID.</span>

<span class="sd">    This asynchronous method takes a SQLAlchemy `Table` object, a record ID,</span>
<span class="sd">    and a dictionary of new values to update the record. It updates the</span>
<span class="sd">    specified record in the given table with the new values. The method does</span>
<span class="sd">    not allow updating certain fields, such as &#39;id&#39; or &#39;date_created&#39;.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        table (Table): The SQLAlchemy `Table` object representing the table</span>
<span class="sd">        in the database. record_id (str): The ID of the record to be</span>
<span class="sd">        updated. new_values (dict): A dictionary containing the fields to</span>
<span class="sd">        update and their new values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Base: The updated record if successful; otherwise, an error</span>
<span class="sd">        dictionary.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the update operation.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        from dsg_lib.async_database_functions import (</span>
<span class="sd">        async_database,</span>
<span class="sd">        base_schema,</span>
<span class="sd">        database_config,</span>
<span class="sd">        database_operations,</span>
<span class="sd">        )</span>
<span class="sd">        # Create a DBConfig instance</span>
<span class="sd">        config = {</span>
<span class="sd">            # &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
<span class="sd">            &quot;database_uri&quot;: &quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;,</span>
<span class="sd">            &quot;echo&quot;: False,</span>
<span class="sd">            &quot;future&quot;: True,</span>
<span class="sd">            # &quot;pool_pre_ping&quot;: True,</span>
<span class="sd">            # &quot;pool_size&quot;: 10,</span>
<span class="sd">            # &quot;max_overflow&quot;: 10,</span>
<span class="sd">            &quot;pool_recycle&quot;: 3600,</span>
<span class="sd">            # &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>
<span class="sd">        # create database configuration</span>
<span class="sd">        db_config = database_config.DBConfig(config)</span>
<span class="sd">        # Create an AsyncDatabase instance</span>
<span class="sd">        async_db = async_database.AsyncDatabase(db_config)</span>
<span class="sd">        # Create a DatabaseOperations instance</span>
<span class="sd">        db_ops = database_operations.DatabaseOperations(async_db)</span>
<span class="sd">        # update one record</span>
<span class="sd">        record = await db_ops.update_one(User, 1, {&#39;name&#39;: &#39;John Smith&#39;})</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">non_updatable_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;date_created&quot;</span><span class="p">]</span>

    <span class="c1"># Log the start of the operation</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Starting update_one operation for record_id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2"> in table: </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Start a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_db</span><span class="o">.</span><span class="n">get_db_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Log the record being fetched</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching record with id: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Fetch the record</span>
            <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="p">:</span>
                <span class="c1"># Log the error if no record is found</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No record found with pkid: </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Record not found&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No record found with pkid </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">}</span>

            <span class="c1"># Log the record being updated</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating record with new values: </span><span class="si">{</span><span class="n">new_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Update the record with the new values</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">non_updatable_fields</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="c1"># Log the successful record update</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record updated successfully: </span><span class="si">{</span><span class="n">record</span><span class="o">.</span><span class="n">pkid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">record</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># Handle any exceptions that occur during the record update</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="database-database_operations-dsg_lib.async_database_functions.database_operations.handle_exceptions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span></code>

<a href="#database-database_operations-dsg_lib.async_database_functions.database_operations.handle_exceptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

      <p>Handles exceptions for database operations.</p>
<p>This function checks the type of the exception, logs an appropriate error
message, and returns a dictionary containing the error details.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ex</code></td>
            <td>
                  <code><span data-autorefs-optional="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exception to handle.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span data-autorefs-optional-hover="typing.Dict">Dict</span>[<span data-autorefs-optional="str">str</span>, <span data-autorefs-optional="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the error details. The dictionary has two</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>keys</code></td>            <td>
                  <code><span data-autorefs-optional-hover="typing.Dict">Dict</span>[<span data-autorefs-optional="str">str</span>, <span data-autorefs-optional="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'error' and 'details'.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_operations</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Some database operation that might raise an exception pass</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
    <span class="n">error_details</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">error_details</span><span class="p">)</span>
</code></pre></div></p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/async_database_functions/database_operations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handle_exceptions</span><span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles exceptions for database operations.</span>

<span class="sd">    This function checks the type of the exception, logs an appropriate error</span>
<span class="sd">    message, and returns a dictionary containing the error details.</span>

<span class="sd">    Args:</span>
<span class="sd">        ex (Exception): The exception to handle.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the error details. The dictionary has two</span>
<span class="sd">        keys: &#39;error&#39; and &#39;details&#39;.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    from dsg_lib.async_database_functions import database_operations</span>

<span class="sd">    try:</span>
<span class="sd">        # Some database operation that might raise an exception pass</span>
<span class="sd">    except Exception as ex:</span>
<span class="sd">        error_details = database_operations.handle_exceptions(ex)</span>
<span class="sd">        print(error_details)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract the error message before the SQL statement</span>
    <span class="n">error_only</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[SQL:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Check the type of the exception</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">IntegrityError</span><span class="p">):</span>
        <span class="c1"># Log the error and return the error details</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IntegrityError occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;IntegrityError&quot;</span><span class="p">,</span> <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="n">error_only</span><span class="p">}</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">SQLAlchemyError</span><span class="p">):</span>
        <span class="c1"># Log the error and return the error details</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SQLAlchemyError occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;SQLAlchemyError&quot;</span><span class="p">,</span> <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="n">error_only</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Log the error and return the error details</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception occurred: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;General Exception&quot;</span><span class="p">,</span> <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div></section><h1 class='nav-section-title-end'>Ended: Database Functions</h1>
                        <h1 class='nav-section-title' id='section-recipes'>
                            Recipes <a class='headerlink' href='#section-recipes' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="recipes-fastapi"><h1 id="recipes-fastapi-full-example-of-fastapi-with-aync-database-and-endpoints">Full Example of FastAPI with Aync Database and Endpoints<a class="headerlink" href="#recipes-fastapi-full-example-of-fastapi-with-aync-database-and-endpoints" title="Permanent link">&para;</a></h1>
<p>You can find this in the examples folder of the <a href="https://github.com/devsetgo/devsetgo_lib/tree/main/examples">repository</a>.</p>
<h2 id="recipes-fastapi-install-dependencies">Install dependencies<a class="headerlink" href="#recipes-fastapi-install-dependencies" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>dsg_lib<span class="o">[</span>all<span class="o">]</span><span class="w"> </span>tqdm
</code></pre></div>
<h2 id="recipes-fastapi-make-app">Make App<a class="headerlink" href="#recipes-fastapi-make-app" title="Permanent link">&para;</a></h2>
<p>Copy the fastapi code below after installing. (assumption is main.py)</p>
<div class="highlight"><pre><span></span><code><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">secrets</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">asynccontextmanager</span>

<span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">Body</span><span class="p">,</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Query</span>
<span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">RedirectResponse</span>
<span class="kn">from</span> <span class="nn">loguru</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">EmailStr</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Select</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">logging_config</span>

<span class="n">logging_config</span><span class="o">.</span><span class="n">config_log</span><span class="p">(</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="n">log_serializer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">log_name</span><span class="o">=</span><span class="s2">&quot;log.log&quot;</span>
<span class="p">)</span>


<span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">lifespan</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;starting up&quot;</span><span class="p">)</span>
    <span class="c1"># Create the tables in the database</span>
    <span class="k">await</span> <span class="n">async_db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">()</span>

    <span class="n">create_users</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">create_users</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">create_a_bunch_of_users</span><span class="p">(</span><span class="n">single_entry</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">many_entries</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
    <span class="k">yield</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;shutting down&quot;</span><span class="p">)</span>


<span class="c1"># Create an instance of the FastAPI class</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;FastAPI Example&quot;</span><span class="p">,</span>  <span class="c1"># The title of the API</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;This is an example of a FastAPI application using the DevSetGo Toolkit.&quot;</span><span class="p">,</span>  <span class="c1"># A brief description of the API</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>  <span class="c1"># The version of the API</span>
    <span class="n">docs_url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the API documentation will be served</span>
    <span class="n">redoc_url</span><span class="o">=</span><span class="s2">&quot;/redoc&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the ReDoc documentation will be served</span>
    <span class="n">openapi_url</span><span class="o">=</span><span class="s2">&quot;/openapi.json&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the OpenAPI schema will be served</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Enable debug mode</span>
    <span class="n">middleware</span><span class="o">=</span><span class="p">[],</span>  <span class="c1"># A list of middleware to include in the application</span>
    <span class="n">routes</span><span class="o">=</span><span class="p">[],</span>  <span class="c1"># A list of routes to include in the application</span>
    <span class="n">lifespan</span><span class="o">=</span><span class="n">lifespan</span><span class="p">,</span>  <span class="c1"># this is the replacement for the startup and shutdown events</span>
<span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">root</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Root endpoint of API</span>
<span class="sd">    Returns:</span>
<span class="sd">        Redrects to openapi document</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># redirect to openapi docs</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Redirecting to OpenAPI docs&quot;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">RedirectResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>


<span class="kn">from</span> <span class="nn">dsg_lib.fastapi_functions</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># , system_tools_endpoints</span>
    <span class="n">system_health_endpoints</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">config_health</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;enable_status_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;enable_uptime_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;enable_heapdump_endpoint&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span>
    <span class="n">system_health_endpoints</span><span class="o">.</span><span class="n">create_health_router</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config_health</span><span class="p">),</span>
    <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/api/health&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;system-health&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>
<span class="c1"># create database configuration</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>

<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBase</span><span class="p">,</span> <span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    User table storing user details like first name, last name, and email</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;users&quot;</span>
    <span class="n">__table_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;User table storing user details like first name, last name, and email&quot;</span>
    <span class="p">}</span>

    <span class="n">first_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># First name of the user</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Last name of the user</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>  <span class="c1"># Email of the user, must be unique</span>
    <span class="n">addresses</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;Address&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s2">&quot;Address.pkid&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;user&quot;</span>
    <span class="p">)</span>  <span class="c1"># Relationship to the Address class</span>


<span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBase</span><span class="p">,</span> <span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Address table storing address details like street, city, and zip code</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;addresses&quot;</span>
    <span class="n">__table_args__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Address table storing address details like street, city, and zip code&quot;</span>
    <span class="p">}</span>

    <span class="n">street</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Street of the address</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># City of the address</span>
    <span class="nb">zip</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Zip code of the address</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;users.pkid&quot;</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Foreign key to the User table</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
        <span class="s2">&quot;User&quot;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;addresses&quot;</span>
    <span class="p">)</span>  <span class="c1"># Relationship to the User class</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">create_a_bunch_of_users</span><span class="p">(</span><span class="n">single_entry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">many_entries</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;single_entry: </span><span class="si">{</span><span class="n">single_entry</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">async_db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">()</span>
    <span class="c1"># Create a list to hold the user data</span>

    <span class="c1"># Create a loop to generate user data</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">single_entry</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;executing one&quot;</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
            <span class="n">first_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;First</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created_users: </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Create a loop to generate user data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">many_entries</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;executing many&quot;</span><span class="p">):</span>
        <span class="n">value_one</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">value_two</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
            <span class="n">first_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;First</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created_users: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="c1"># Use db_ops to add the users to the database</span>
    <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-primary-key&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_primary_key</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting primary key of User table&quot;</span><span class="p">)</span>
    <span class="n">pk</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_primary_keys</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Primary key of User table: </span><span class="si">{</span><span class="n">pk</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-column-details&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_column_details</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting column details of User table&quot;</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_columns_details</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column details of User table: </span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="n">columns</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-tables&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_table_details</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting table names&quot;</span><span class="p">)</span>
    <span class="n">tables</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table names: </span><span class="si">{</span><span class="n">tables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;table_names&quot;</span><span class="p">:</span> <span class="n">tables</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-count&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_count</span><span class="p">():</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting count of users&quot;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">count_query</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Count of users: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">count</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-all&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span><span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">)):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting all users with offset </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2"> and limit </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_query</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span><span class="si">}</span><span class="s2"> users&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="n">records</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-one-record&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">read_one_record</span><span class="p">(</span><span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading one record with id </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_one_record</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">pkid</span> <span class="o">==</span> <span class="n">record_id</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Record with id </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>


<span class="k">class</span> <span class="nc">UserBase</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">EmailStr</span>


<span class="k">class</span> <span class="nc">UserCreate</span><span class="p">(</span><span class="n">UserBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/database/create-one-record&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">create_one_record</span><span class="p">(</span><span class="n">new_user</span><span class="p">:</span> <span class="n">UserCreate</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating one record: </span><span class="si">{</span><span class="n">new_user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">new_user</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created record: </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/database/create-many-records&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">create_many_records</span><span class="p">(</span><span class="n">number_of_users</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">)):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating </span><span class="si">{</span><span class="n">number_of_users</span><span class="si">}</span><span class="s2"> records&quot;</span><span class="p">)</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Create a loop to generate user data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">number_of_users</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;executing many&quot;</span><span class="p">):</span>
        <span class="n">value_one</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">value_two</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
            <span class="n">first_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;First</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created user: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="c1"># Use db_ops to add the users to the database</span>
    <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">process_time</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">,</span> <span class="s2">&quot;.4f&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created </span><span class="si">{</span><span class="n">number_of_users</span><span class="si">}</span><span class="s2"> records in </span><span class="si">{</span><span class="n">process_time</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;number_of_users&quot;</span><span class="p">:</span> <span class="n">number_of_users</span><span class="p">,</span> <span class="s2">&quot;process_time&quot;</span><span class="p">:</span> <span class="n">process_time</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;/database/update-one-record&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">update_one_record</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span>
        <span class="o">...</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;UUID to update&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;6087cce8-0bdd-48c2-ba96-7d557dae843e&quot;</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Agent&quot;</span><span class="p">]),</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Smith&quot;</span><span class="p">]),</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;jim@something.com&quot;</span><span class="p">]),</span>
<span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating one record with id </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># adding date_updated to new_values as it is not supported in sqlite \</span>
    <span class="c1"># and other database may not either.</span>
    <span class="n">new_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="n">first_name</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="n">last_name</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
        <span class="s2">&quot;date_updated&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">update_one</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="n">User</span><span class="p">,</span> <span class="n">record_id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">new_values</span><span class="o">=</span><span class="n">new_values</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated record with id </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;/database/delete-one-record&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">delete_one_record</span><span class="p">(</span><span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">)):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting one record with id </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">delete_one</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="n">User</span><span class="p">,</span> <span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted record with id </span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="s2">&quot;/database/delete-many-records-aka-this-is-a-bad-idea&quot;</span><span class="p">,</span>
    <span class="n">status_code</span><span class="o">=</span><span class="mi">201</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">delete_many_records</span><span class="p">(</span>
    <span class="n">id_values</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="n">id_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pkid&quot;</span>
<span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting many records with ids </span><span class="si">{</span><span class="n">id_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">delete_many</span><span class="p">(</span>
        <span class="n">table</span><span class="o">=</span><span class="n">User</span><span class="p">,</span> <span class="n">id_column_name</span><span class="o">=</span><span class="s2">&quot;pkid&quot;</span><span class="p">,</span> <span class="n">id_values</span><span class="o">=</span><span class="n">id_values</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted records with ids </span><span class="si">{</span><span class="n">id_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;/database/get-list-of-records-to-paste-into-delete-many-records&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Database Examples&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">read_list_of_records</span><span class="p">(</span>
    <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading list of records with offset </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2"> and limit </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_query</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">),</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="n">records_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
        <span class="n">records_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">pkid</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Read list of records: </span><span class="si">{</span><span class="n">records_list</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">records_list</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">uvicorn</span>

    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</code></pre></div>
<h2 id="recipes-fastapi-run-code">Run Code<a class="headerlink" href="#recipes-fastapi-run-code" title="Permanent link">&para;</a></h2>
<p>In the console (linux) run the code below. Open browser to http://127.0.0.1:5000 to see app.</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>main.py
</code></pre></div></section><section class="print-page" id="recipes-asyncdatabase"><h1 id="recipes-asyncdatabase-examples">Examples<a class="headerlink" href="#recipes-asyncdatabase-examples" title="Permanent link">&para;</a></h1>
<p>Here are a few examples of how to use the database functions</p>
<h2 id="recipes-asyncdatabase-asyncio-script-example">Asyncio Script Example<a class="headerlink" href="#recipes-asyncdatabase-asyncio-script-example" title="Permanent link">&para;</a></h2>
<p>Example of how to use in a script</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="nn">dsg_lib.async_database_functions</span> <span class="kn">import</span> <span class="n">database_config</span><span class="p">,</span> <span class="n">async_database</span><span class="p">,</span> <span class="n">database_operations</span>

<span class="c1"># Configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Create a DBConfig instance</span>
<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>

<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>

<span class="c1"># User class</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;users&quot;</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Async function to get all users</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_users</span><span class="p">():</span>
    <span class="c1"># Create a select query</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>

    <span class="c1"># Execute the query and fetch all results</span>
    <span class="n">users</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># Print the users</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;User: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">last_name</span><span class="si">}</span><span class="s2">, Email: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Run the async function</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">get_all_users</span><span class="p">())</span>
</code></pre></div>
<h2 id="recipes-asyncdatabase-fastapi-example">FastAPI Example<a class="headerlink" href="#recipes-asyncdatabase-fastapi-example" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">asynccontextmanager</span>

<span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">RedirectResponse</span>
<span class="kn">from</span> <span class="nn">loguru</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="kn">from</span> <span class="nn">dsg_lib</span> <span class="kn">import</span> <span class="n">logging_config</span>

<span class="n">logging_config</span><span class="o">.</span><span class="n">config_log</span><span class="p">(</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="s2">&quot;Debug&quot;</span><span class="p">,</span> <span class="n">log_serializer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">log_name</span><span class="o">=</span><span class="s2">&quot;log.log&quot;</span>
<span class="p">)</span>


<span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">lifespan</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;starting up&quot;</span><span class="p">)</span>
    <span class="c1"># Create the tables in the database</span>
    <span class="k">await</span> <span class="n">async_db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">()</span>

    <span class="n">create_users</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">create_users</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">create_a_bunch_of_users</span><span class="p">(</span><span class="n">single_entry</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">many_entries</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">yield</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;shutting down&quot;</span><span class="p">)</span>


<span class="c1"># Create an instance of the FastAPI class</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;FastAPI Example&quot;</span><span class="p">,</span>  <span class="c1"># The title of the API</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;This is an example of a FastAPI application using the DevSetGo Toolkit.&quot;</span><span class="p">,</span>  <span class="c1"># A brief description of the API</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>  <span class="c1"># The version of the API</span>
    <span class="n">docs_url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the API documentation will be served</span>
    <span class="n">redoc_url</span><span class="o">=</span><span class="s2">&quot;/redoc&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the ReDoc documentation will be served</span>
    <span class="n">openapi_url</span><span class="o">=</span><span class="s2">&quot;/openapi.json&quot;</span><span class="p">,</span>  <span class="c1"># The URL where the OpenAPI schema will be served</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Enable debug mode</span>
    <span class="n">middleware</span><span class="o">=</span><span class="p">[],</span>  <span class="c1"># A list of middleware to include in the application</span>
    <span class="n">routes</span><span class="o">=</span><span class="p">[],</span>  <span class="c1"># A list of routes to include in the application</span>
    <span class="n">lifespan</span><span class="o">=</span><span class="n">lifespan</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">root</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Root endpoint of API</span>
<span class="sd">    Returns:</span>
<span class="sd">        Redrects to openapi document</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># redirect to openapi docs</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Redirecting to OpenAPI docs&quot;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">RedirectResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Delete</span><span class="p">,</span> <span class="n">Select</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Update</span>

<span class="kn">from</span> <span class="nn">dsg_lib</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">async_database</span><span class="p">,</span>
    <span class="n">base_schema</span><span class="p">,</span>
    <span class="n">database_config</span><span class="p">,</span>
    <span class="n">database_operations</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Create a DBConfig instance</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;database_uri&quot;: &quot;postgresql+asyncpg://postgres:postgres@postgresdb/postgres&quot;,</span>
    <span class="s2">&quot;database_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite+aiosqlite:///:memory:?cache=shared&quot;</span><span class="p">,</span>
    <span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;future&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># &quot;pool_pre_ping&quot;: True,</span>
    <span class="c1"># &quot;pool_size&quot;: 10,</span>
    <span class="c1"># &quot;max_overflow&quot;: 10,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="c1"># &quot;pool_timeout&quot;: 30,</span>
<span class="p">}</span>

<span class="n">db_config</span> <span class="o">=</span> <span class="n">database_config</span><span class="o">.</span><span class="n">DBConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="c1"># Create an AsyncDatabase instance</span>
<span class="n">async_db</span> <span class="o">=</span> <span class="n">async_database</span><span class="o">.</span><span class="n">AsyncDatabase</span><span class="p">(</span><span class="n">db_config</span><span class="p">)</span>

<span class="c1"># Create a DatabaseOperations instance</span>
<span class="n">db_ops</span> <span class="o">=</span> <span class="n">database_operations</span><span class="o">.</span><span class="n">DatabaseOperations</span><span class="p">(</span><span class="n">async_db</span><span class="p">)</span>


<span class="c1"># User class inherits from SchemaBase and async_db.Base</span>
<span class="c1"># This class represents the User table in the database</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">base_schema</span><span class="o">.</span><span class="n">SchemaBase</span><span class="p">,</span> <span class="n">async_db</span><span class="o">.</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;users&quot;</span>  <span class="c1"># Name of the table in the database</span>

    <span class="c1"># Define the columns of the table</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># First name of the user</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Last name of the user</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>  <span class="c1"># Email of the user, must be unique</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">create_a_bunch_of_users</span><span class="p">(</span><span class="n">single_entry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">many_entries</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;single_entry: </span><span class="si">{</span><span class="n">single_entry</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">async_db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">()</span>
    <span class="c1"># Create a list to hold the user data</span>

    <span class="c1"># Create a loop to generate user data</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">single_entry</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;executing one&quot;</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
            <span class="n">first_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;First</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created_users: </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Create a loop to generate user data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">many_entries</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;executing many&quot;</span><span class="p">):</span>
        <span class="n">value_one</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">value_two</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">token_hex</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
            <span class="n">first_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;First</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">last_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">email</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;user</span><span class="si">{</span><span class="n">value_one</span><span class="si">}{</span><span class="n">i</span><span class="si">}{</span><span class="n">value_two</span><span class="si">}</span><span class="s2">@example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;created_users: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="c1"># Use db_ops to add the users to the database</span>
    <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-count&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_count</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">count_query</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="n">count</span><span class="p">}</span>


<span class="c1"># endpoint to get list of user</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-all&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span><span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
    <span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">read_query</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="n">records</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-primary-key&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_primary_key</span><span class="p">():</span>
    <span class="n">pk</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_primary_keys</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-column-details&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_column_details</span><span class="p">():</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_columns_details</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="n">columns</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-tables&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">table_table_details</span><span class="p">():</span>
    <span class="n">tables</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;table_names&quot;</span><span class="p">:</span> <span class="n">tables</span><span class="p">}</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/database/get-one-record&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_one_record</span><span class="p">(</span><span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">record</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_ops</span><span class="o">.</span><span class="n">get_one_record</span><span class="p">(</span><span class="n">Select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">pkid</span> <span class="o">==</span> <span class="n">record_id</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;record&quot;</span><span class="p">:</span> <span class="n">record</span><span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">uvicorn</span>

    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</code></pre></div></section><section class="print-page" id="recipes-loggingexample"><h1 id="recipes-loggingexample-logging-example">Logging Example<a class="headerlink" href="#recipes-loggingexample-logging-example" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">secrets</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">loguru</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="kn">from</span> <span class="nn">dsg_lib.common_functions</span> <span class="kn">import</span> <span class="n">logging_config</span>

<span class="n">logging_config</span><span class="o">.</span><span class="n">config_log</span><span class="p">(</span>
    <span class="n">logging_directory</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
    <span class="c1"># or None and defaults to logging</span>
    <span class="c1"># log_name=&quot;log.json&quot;,</span>
    <span class="c1"># or None and defaults to &quot;log.log&quot;</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span>
    <span class="c1"># or &quot;info&quot; or &quot;debug&quot; or &quot;warning&quot; or &quot;error&quot; or &quot;critical&quot;</span>
    <span class="c1"># or None and defaults to &quot;info&quot;</span>
    <span class="n">log_rotation</span><span class="o">=</span><span class="s2">&quot;10 MB&quot;</span><span class="p">,</span>
    <span class="c1"># or None and default is 10 MB</span>
    <span class="n">log_retention</span><span class="o">=</span><span class="s2">&quot;1 Day&quot;</span><span class="p">,</span>
    <span class="c1"># or None and defaults to &quot;14 Days&quot;</span>
    <span class="n">log_backtrace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># or None and defaults to False</span>
    <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;my_app&quot;</span><span class="p">,</span>
    <span class="c1"># app name is used to identify the application</span>
    <span class="c1"># this is an optional field</span>
    <span class="n">enable_trace_id</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># service id is used to identify the service</span>
    <span class="c1"># this is an optional field</span>
    <span class="n">append_app_name</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># append app name to log file name defaults to false</span>
    <span class="n">append_trace_id</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># append app name and service name to log file name defaults to false</span>
<span class="p">)</span>

<span class="c1"># after configuring logging</span>
<span class="c1"># user loguru to log messages</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a debug message&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is an info message&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;This is an error message&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;This is a warning message&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s2">&quot;This is a critical message&quot;</span><span class="p">)</span>

<span class="c1"># will intercept all standard logging messages also</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a debug message&quot;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is an info message&quot;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;This is an error message&quot;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;This is a warning message&quot;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s2">&quot;This is a critical message&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">div_zero</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="nd">@logger</span><span class="o">.</span><span class="n">catch</span>
<span class="k">def</span> <span class="nf">div_zero_two</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">div_zero</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">div_zero_two</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1"># log a lot of data</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lets make this a big message </span><span class="si">{</span><span class="n">secrets</span><span class="o">.</span><span class="n">token_urlsafe</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></section><section class="print-page" id="recipes-patterns"><h1 id="recipes-patterns-patterns">Patterns<a class="headerlink" href="#recipes-patterns-patterns" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="kn">from</span> <span class="nn">dsg_lib.common_functions.patterns</span> <span class="kn">import</span> <span class="n">pattern_between_two_char</span>

<span class="n">ASCII_LIST</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot; &quot;</span><span class="p">,</span>
    <span class="s2">&quot;!&quot;</span><span class="p">,</span>
    <span class="s1">&#39;&quot;&quot;&#39;</span><span class="p">,</span>
    <span class="s2">&quot;#&quot;</span><span class="p">,</span>
    <span class="s2">&quot;$&quot;</span><span class="p">,</span>
    <span class="s2">&quot;%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&amp;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;(&quot;</span><span class="p">,</span>
    <span class="s2">&quot;)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;+&quot;</span><span class="p">,</span>
    <span class="s2">&quot;,&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-&quot;</span><span class="p">,</span>
    <span class="s2">&quot;.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;4&quot;</span><span class="p">,</span>
    <span class="s2">&quot;5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;6&quot;</span><span class="p">,</span>
    <span class="s2">&quot;7&quot;</span><span class="p">,</span>
    <span class="s2">&quot;8&quot;</span><span class="p">,</span>
    <span class="s2">&quot;9&quot;</span><span class="p">,</span>
    <span class="s2">&quot;:&quot;</span><span class="p">,</span>
    <span class="s2">&quot;;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;=&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;?&quot;</span><span class="p">,</span>
    <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="s2">&quot;A&quot;</span><span class="p">,</span>
    <span class="s2">&quot;B&quot;</span><span class="p">,</span>
    <span class="s2">&quot;C&quot;</span><span class="p">,</span>
    <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="s2">&quot;E&quot;</span><span class="p">,</span>
    <span class="s2">&quot;F&quot;</span><span class="p">,</span>
    <span class="s2">&quot;G&quot;</span><span class="p">,</span>
    <span class="s2">&quot;H&quot;</span><span class="p">,</span>
    <span class="s2">&quot;I&quot;</span><span class="p">,</span>
    <span class="s2">&quot;J&quot;</span><span class="p">,</span>
    <span class="s2">&quot;K&quot;</span><span class="p">,</span>
    <span class="s2">&quot;L&quot;</span><span class="p">,</span>
    <span class="s2">&quot;M&quot;</span><span class="p">,</span>
    <span class="s2">&quot;N&quot;</span><span class="p">,</span>
    <span class="s2">&quot;O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;P&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Q&quot;</span><span class="p">,</span>
    <span class="s2">&quot;R&quot;</span><span class="p">,</span>
    <span class="s2">&quot;S&quot;</span><span class="p">,</span>
    <span class="s2">&quot;T&quot;</span><span class="p">,</span>
    <span class="s2">&quot;U&quot;</span><span class="p">,</span>
    <span class="s2">&quot;V&quot;</span><span class="p">,</span>
    <span class="s2">&quot;W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;X&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;[&quot;</span><span class="p">,</span>
    <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;]&quot;</span><span class="p">,</span>
    <span class="s2">&quot;^&quot;</span><span class="p">,</span>
    <span class="s2">&quot;_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;c&quot;</span><span class="p">,</span>
    <span class="s2">&quot;d&quot;</span><span class="p">,</span>
    <span class="s2">&quot;e&quot;</span><span class="p">,</span>
    <span class="s2">&quot;f&quot;</span><span class="p">,</span>
    <span class="s2">&quot;g&quot;</span><span class="p">,</span>
    <span class="s2">&quot;h&quot;</span><span class="p">,</span>
    <span class="s2">&quot;i&quot;</span><span class="p">,</span>
    <span class="s2">&quot;j&quot;</span><span class="p">,</span>
    <span class="s2">&quot;k&quot;</span><span class="p">,</span>
    <span class="s2">&quot;l&quot;</span><span class="p">,</span>
    <span class="s2">&quot;m&quot;</span><span class="p">,</span>
    <span class="s2">&quot;n&quot;</span><span class="p">,</span>
    <span class="s2">&quot;o&quot;</span><span class="p">,</span>
    <span class="s2">&quot;p&quot;</span><span class="p">,</span>
    <span class="s2">&quot;q&quot;</span><span class="p">,</span>
    <span class="s2">&quot;r&quot;</span><span class="p">,</span>
    <span class="s2">&quot;s&quot;</span><span class="p">,</span>
    <span class="s2">&quot;t&quot;</span><span class="p">,</span>
    <span class="s2">&quot;u&quot;</span><span class="p">,</span>
    <span class="s2">&quot;v&quot;</span><span class="p">,</span>
    <span class="s2">&quot;w&quot;</span><span class="p">,</span>
    <span class="s2">&quot;x&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y&quot;</span><span class="p">,</span>
    <span class="s2">&quot;z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;{&quot;</span><span class="p">,</span>
    <span class="s2">&quot;|&quot;</span><span class="p">,</span>
    <span class="s2">&quot;}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;~&quot;</span><span class="p">,</span>
    <span class="s2">&quot;€&quot;</span><span class="p">,</span>
    <span class="s2">&quot;‚&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ƒ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;„&quot;</span><span class="p">,</span>
    <span class="s2">&quot;…&quot;</span><span class="p">,</span>
    <span class="s2">&quot;†&quot;</span><span class="p">,</span>
    <span class="s2">&quot;‡&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ˆ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;‰&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Š&quot;</span><span class="p">,</span>
    <span class="s2">&quot;‹&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Œ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ž&quot;</span><span class="p">,</span>
    <span class="s2">&quot;‘&quot;</span><span class="p">,</span>
    <span class="s2">&quot;’&quot;</span><span class="p">,</span>
    <span class="s2">&quot;“&quot;</span><span class="p">,</span>
    <span class="s2">&quot;”&quot;</span><span class="p">,</span>
    <span class="s2">&quot;•&quot;</span><span class="p">,</span>
    <span class="s2">&quot;–&quot;</span><span class="p">,</span>
    <span class="s2">&quot;—&quot;</span><span class="p">,</span>
    <span class="s2">&quot;˜&quot;</span><span class="p">,</span>
    <span class="s2">&quot;™&quot;</span><span class="p">,</span>
    <span class="s2">&quot;š&quot;</span><span class="p">,</span>
    <span class="s2">&quot;›&quot;</span><span class="p">,</span>
    <span class="s2">&quot;œ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ž&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ÿ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¡&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¢&quot;</span><span class="p">,</span>
    <span class="s2">&quot;£&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¤&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¥&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¦&quot;</span><span class="p">,</span>
    <span class="s2">&quot;§&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¨&quot;</span><span class="p">,</span>
    <span class="s2">&quot;©&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ª&quot;</span><span class="p">,</span>
    <span class="s2">&quot;«&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¬&quot;</span><span class="p">,</span>
    <span class="s2">&quot;®&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¯&quot;</span><span class="p">,</span>
    <span class="s2">&quot;°&quot;</span><span class="p">,</span>
    <span class="s2">&quot;±&quot;</span><span class="p">,</span>
    <span class="s2">&quot;²&quot;</span><span class="p">,</span>
    <span class="s2">&quot;³&quot;</span><span class="p">,</span>
    <span class="s2">&quot;´&quot;</span><span class="p">,</span>
    <span class="s2">&quot;µ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¶&quot;</span><span class="p">,</span>
    <span class="s2">&quot;·&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¸&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¹&quot;</span><span class="p">,</span>
    <span class="s2">&quot;º&quot;</span><span class="p">,</span>
    <span class="s2">&quot;»&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¼&quot;</span><span class="p">,</span>
    <span class="s2">&quot;½&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¾&quot;</span><span class="p">,</span>
    <span class="s2">&quot;¿&quot;</span><span class="p">,</span>
    <span class="s2">&quot;À&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Á&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Â&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ã&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ä&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Å&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Æ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ç&quot;</span><span class="p">,</span>
    <span class="s2">&quot;È&quot;</span><span class="p">,</span>
    <span class="s2">&quot;É&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ê&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ë&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ì&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Í&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Î&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ï&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ð&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ñ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ò&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ó&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ô&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Õ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ö&quot;</span><span class="p">,</span>
    <span class="s2">&quot;×&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ø&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ù&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ú&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Û&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ü&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ý&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Þ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ß&quot;</span><span class="p">,</span>
    <span class="s2">&quot;à&quot;</span><span class="p">,</span>
    <span class="s2">&quot;á&quot;</span><span class="p">,</span>
    <span class="s2">&quot;â&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ã&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ä&quot;</span><span class="p">,</span>
    <span class="s2">&quot;å&quot;</span><span class="p">,</span>
    <span class="s2">&quot;æ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ç&quot;</span><span class="p">,</span>
    <span class="s2">&quot;è&quot;</span><span class="p">,</span>
    <span class="s2">&quot;é&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ê&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ë&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ì&quot;</span><span class="p">,</span>
    <span class="s2">&quot;í&quot;</span><span class="p">,</span>
    <span class="s2">&quot;î&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ï&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ð&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ñ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ò&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ó&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ô&quot;</span><span class="p">,</span>
    <span class="s2">&quot;õ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ö&quot;</span><span class="p">,</span>
    <span class="s2">&quot;÷&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ø&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ù&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ú&quot;</span><span class="p">,</span>
    <span class="s2">&quot;û&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ü&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ý&quot;</span><span class="p">,</span>
    <span class="s2">&quot;þ&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ÿ&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">pp</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">pattern_find</span><span class="p">(</span><span class="n">left_char</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">right_char</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text_block</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pattern_between_two_char</span><span class="p">(</span><span class="n">text_block</span><span class="p">,</span> <span class="n">left_char</span><span class="p">,</span> <span class="n">right_char</span><span class="p">)</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">run_examples</span><span class="p">():</span>
    <span class="n">text_block</span> <span class="o">=</span> <span class="s2">&quot;Lfound oneR Lfound twoR&quot;</span>
    <span class="n">left_char</span> <span class="o">=</span> <span class="s2">&quot;L&quot;</span>
    <span class="n">right_char</span> <span class="o">=</span> <span class="s2">&quot;R&quot;</span>
    <span class="n">pattern_find</span><span class="p">(</span><span class="n">left_char</span><span class="o">=</span><span class="n">left_char</span><span class="p">,</span> <span class="n">right_char</span><span class="o">=</span><span class="n">right_char</span><span class="p">,</span> <span class="n">text_block</span><span class="o">=</span><span class="n">text_block</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">long_input</span> <span class="o">=</span> <span class="s2">&quot;xyz&quot;</span> <span class="o">*</span> <span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
        <span class="n">long_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">long_input</span><span class="si">}</span><span class="s2">abc&lt;one&gt;123&lt;two&gt;456&lt;three&gt;</span><span class="si">{</span><span class="n">long_input</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">pattern_between_two_char</span><span class="p">(</span>
            <span class="n">text_string</span><span class="o">=</span><span class="n">long_text</span><span class="p">,</span> <span class="n">left_characters</span><span class="o">=</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="n">right_characters</span><span class="o">=</span><span class="s2">&quot;&gt;&quot;</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;found&quot;</span><span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">run_examples</span><span class="p">()</span>
</code></pre></div></section><section class="print-page" id="recipes-emailvalidation"><h1 id="recipes-emailvalidation-validating-email-addresses">Validating Email Addresses<a class="headerlink" href="#recipes-emailvalidation-validating-email-addresses" title="Permanent link">&para;</a></h1>
<p>Example of how to use in a script</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dsg_lib.common_functions.email_validation</span> <span class="kn">import</span> <span class="n">validate_email_address</span>

<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c1"># create a list of email addresses to check if valid</span>
    <span class="n">email_addresses</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;bob@devsetgo.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bob@devset.go&quot;</span><span class="p">,</span>
        <span class="s2">&quot;foo@yahoo.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bob@gmail.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;very fake@devsetgo.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;jane.doe@example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;john_doe@example.co.uk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user.name+tag+sorting@example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;x@example.com&quot;</span><span class="p">,</span>  <span class="c1"># shortest possible email address</span>
        <span class="s2">&quot;example-indeed@strange-example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;admin@mailserver1&quot;</span><span class="p">,</span>  <span class="c1"># local domain name with no TLD</span>
        <span class="s2">&quot;example@s.example&quot;</span><span class="p">,</span>  <span class="c1"># see the list of Internet top-level domains</span>
        <span class="s1">&#39;&quot; &quot;@example.org&#39;</span><span class="p">,</span>  <span class="c1"># space between the quotes</span>
        <span class="s1">&#39;&quot;john..doe&quot;@example.org&#39;</span><span class="p">,</span>  <span class="c1"># quoted double dot</span>
        <span class="s2">&quot;mailhost!username@example.org&quot;</span><span class="p">,</span>  <span class="c1"># bangified host route used for uucp mailers</span>
        <span class="s2">&quot;user</span><span class="si">%e</span><span class="s2">xample.com@example.org&quot;</span><span class="p">,</span>  <span class="c1"># percent sign in local part</span>
        <span class="s2">&quot;user-@example.org&quot;</span><span class="p">,</span>  <span class="c1"># valid due to the last character being an allowed character</span>
        <span class="c1"># Invalid email addresses</span>
        <span class="s2">&quot;Abc.example.com&quot;</span><span class="p">,</span>  <span class="c1"># no @ character</span>
        <span class="s2">&quot;A@b@c@example.com&quot;</span><span class="p">,</span>  <span class="c1"># only one @ is allowed outside quotation marks</span>
        <span class="s1">&#39;a&quot;b(c)d,e:f;g&lt;h&gt;i[j</span><span class="se">\\</span><span class="s1">k]l@example.com&#39;</span><span class="p">,</span>  <span class="c1"># none of the special characters in this local part are allowed outside quotation marks</span>
        <span class="s1">&#39;just&quot;not&quot;right@example.com&#39;</span><span class="p">,</span>  <span class="c1"># quoted strings must be dot separated or the only element making up the local-part</span>
        <span class="s1">&#39;this is&quot;not</span><span class="se">\\</span><span class="s1">allowed@example.com&#39;</span><span class="p">,</span>  <span class="c1"># spaces, quotes, and backslashes may only exist when within quoted strings and preceded by a backslash</span>
        <span class="s1">&#39;this</span><span class="se">\\</span><span class="s1"> still</span><span class="se">\\</span><span class="s1">&quot;not</span><span class="se">\\\\</span><span class="s1">allowed@example.com&#39;</span><span class="p">,</span>  <span class="c1"># even if escaped (preceded by a backslash), spaces, quotes, and backslashes must still be contained by quotes</span>
        <span class="s2">&quot;1234567890123456789012345678901234567890123456789012345678901234+x@example.com&quot;</span><span class="p">,</span>  <span class="c1"># local part is longer than 64 characters</span>

        <span class="c1"># Emails with empty local part</span>
        <span class="s2">&quot;@example.com&quot;</span><span class="p">,</span>  <span class="c1"># only valid if allow_empty_local is True</span>

        <span class="c1"># Emails with non-ASCII characters</span>
        <span class="s2">&quot;üñîçøðé@example.com&quot;</span><span class="p">,</span>  <span class="c1"># only valid if allow_smtputf8 is True</span>
        <span class="s2">&quot;user@üñîçøðé.com&quot;</span><span class="p">,</span>  <span class="c1"># only valid if allow_smtputf8 is True</span>

        <span class="c1"># Emails with quoted local part</span>
        <span class="s1">&#39;&quot;john.doe&quot;@example.com&#39;</span><span class="p">,</span>  <span class="c1"># only valid if allow_quoted_local is True</span>
        <span class="s1">&#39;&quot;john..doe&quot;@example.com&#39;</span><span class="p">,</span>  <span class="c1"># only valid if allow_quoted_local is True</span>

        <span class="c1"># Emails with display name</span>
        <span class="s1">&#39;John Doe &lt;john@example.com&gt;&#39;</span><span class="p">,</span>  <span class="c1"># only valid if allow_display_name is True</span>

        <span class="c1"># Emails with domain literal</span>
        <span class="s1">&#39;user@[192.0.2.1]&#39;</span><span class="p">,</span>  <span class="c1"># only valid if allow_domain_literal is True</span>

        <span class="c1"># Emails with long local part</span>
        <span class="s2">&quot;a&quot;</span><span class="o">*</span><span class="mi">65</span> <span class="o">+</span> <span class="s2">&quot;@example.com&quot;</span><span class="p">,</span>  <span class="c1"># local part is longer than 64 characters</span>

        <span class="c1"># Emails with invalid characters</span>
        <span class="s2">&quot;john doe@example.com&quot;</span><span class="p">,</span>  <span class="c1"># space is not allowed</span>
        <span class="s2">&quot;john@doe@example.com&quot;</span><span class="p">,</span>  <span class="c1"># only one @ is allowed</span>
        <span class="s2">&quot;john.doe@.com&quot;</span><span class="p">,</span>  <span class="c1"># domain can&#39;t start with a dot</span>
        <span class="s2">&quot;john.doe@example..com&quot;</span><span class="p">,</span>  <span class="c1"># domain can&#39;t have two consecutive dots</span>
        <span class="s2">&quot;test@google.com&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="c1"># create a list of configurations</span>
    <span class="n">configurations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;dns&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;dns&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;dns&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;dns&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;check_deliverability&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;test_environment&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_smtputf8&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_empty_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_quoted_local&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;allow_display_name&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;allow_domain_literal&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;globally_deliverable&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="s2">&quot;dns_type&quot;</span><span class="p">:</span> <span class="s1">&#39;timeout&#39;</span><span class="p">},</span>
    <span class="p">]</span>

    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">validity</span><span class="o">=</span><span class="p">[]</span>

    <span class="k">for</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">email_addresses</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">configurations</span><span class="p">:</span>

            <span class="n">res</span> <span class="o">=</span> <span class="n">validate_email_address</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span>
            <span class="n">validity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">validity</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">validity</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">validity</span><span class="p">:</span>
            <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time taken: </span><span class="si">{</span><span class="n">t1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></section><h1 class='nav-section-title-end'>Ended: Recipes</h1>
                        <h1 class='nav-section-title' id='section-about'>
                            About <a class='headerlink' href='#section-about' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="contribute"><h1 id="contribute-contributing">Contributing<a class="headerlink" href="#contribute-contributing" title="Permanent link">&para;</a></h1>
<p>Please feel to contribute to this project. Adding common functions is the intent and if you have one to add or improve an existing it is greatly appreciated.</p>
<h3 id="contribute-ways-to-contribute">Ways to Contribute!<a class="headerlink" href="#contribute-ways-to-contribute" title="Permanent link">&para;</a></h3>
<ul>
<li>Add or improve a function</li>
<li>Add or improve documentation</li>
<li>Add or improve Tests</li>
<li>Report or fix a bug</li>
</ul></section><h1 class='nav-section-title-end'>Ended: About</h1><section class="print-page" id="release-notes"><h1 id="release-notes-changelog">Changelog<a class="headerlink" href="#release-notes-changelog" title="Permanent link">&para;</a></h1>
<p>All notable changes to this project will be documented in this file.</p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a></p>
<h2 id="release-notes-latest-changes">Latest Changes<a class="headerlink" href="#release-notes-latest-changes" title="Permanent link">&para;</a></h2>
<h3 id="release-notes-v0130-republish"><span style='color:blue'></span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.13.0-republish">v0.13.0-republish</a>)<a class="headerlink" href="#release-notes-v0130-republish" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed">What's Changed<a class="headerlink" href="#release-notes-whats-changed" title="Permanent link">&para;</a></h4>
<p>Republishing v0.13.0 for pypi.</p>
<p>Published Date: 2024 May 26, 17:13</p>
<h3 id="release-notes-v0130"><span style='color:blue'></span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.13.0">v0.13.0</a>)<a class="headerlink" href="#release-notes-v0130" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_1">What's Changed<a class="headerlink" href="#release-notes-whats-changed_1" title="Permanent link">&para;</a></h4>
<ul>
<li>Breaking Change: Removing Limit and Offset from read queries (#419) @devsetgo</li>
</ul>
<p>Published Date: 2024 May 26, 15:44</p>
<h3 id="release-notes-adding-missing-requirement-v0124"><span style='color:blue'>Adding missing requirement</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.12.4">v0.12.4</a>)<a class="headerlink" href="#release-notes-adding-missing-requirement-v0124" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_2">What's Changed<a class="headerlink" href="#release-notes-whats-changed_2" title="Permanent link">&para;</a></h4>
<ul>
<li>adding missing requirement (#417) @devsetgo</li>
</ul>
<p>Published Date: 2024 May 16, 14:40</p>
<h3 id="release-notes-adding-email-validation-v0123"><span style='color:blue'>Adding Email Validation</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.12.3">v0.12.3</a>)<a class="headerlink" href="#release-notes-adding-email-validation-v0123" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_3">What's Changed<a class="headerlink" href="#release-notes-whats-changed_3" title="Permanent link">&para;</a></h4>
<ul>
<li>bump to 0.12.3 (#416) @devsetgo</li>
<li>Add email validation capabilities (#415) @devsetgo</li>
<li>pip(deps): bump mkdocs-material from 9.5.20 to 9.5.21 (#414) @dependabot</li>
<li>pip(deps): bump ruff from 0.4.2 to 0.4.4 (#413) @dependabot</li>
<li>pip(deps): bump coverage-badge from 1.1.0 to 1.1.1 (#409) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.5.18 to 9.5.20 (#408) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python,shell] from 0.24.3 to 0.25.0 (#407) @dependabot</li>
<li>pip(deps): bump ruff from 0.4.1 to 0.4.2 (#410) @dependabot</li>
<li>pip(deps): bump tqdm from 4.66.2 to 4.66.3 (#412) @dependabot</li>
</ul>
<p>Published Date: 2024 May 16, 14:19</p>
<h3 id="release-notes-logging-changes-v0122"><span style='color:blue'>logging changes</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.12.2">v0.12.2</a>)<a class="headerlink" href="#release-notes-logging-changes-v0122" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_4">What's Changed<a class="headerlink" href="#release-notes-whats-changed_4" title="Permanent link">&para;</a></h4>
<ul>
<li>Logging Changes, Documentation Updates, Using Ruff (#406) @devsetgo</li>
</ul>
<p>Published Date: 2024 April 22, 16:17</p>
<h3 id="release-notes-updates-for-metadata-and-all-http-codes-v0121"><span style='color:blue'>Updates for MetaData and All HTTP Codes</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.12.1">v0.12.1</a>)<a class="headerlink" href="#release-notes-updates-for-metadata-and-all-http-codes-v0121" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_5">What's Changed<a class="headerlink" href="#release-notes-whats-changed_5" title="Permanent link">&para;</a></h4>
<ul>
<li>Enhancements and fixes (#405) @devsetgo</li>
</ul>
<p>Published Date: 2024 April 19, 18:52</p>
<h3 id="release-notes-breaking-change-base-schema-per-database-type-v0120"><span style='color:blue'>Breaking Change: Base Schema per Database Type</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.12.0">v0.12.0</a>)<a class="headerlink" href="#release-notes-breaking-change-base-schema-per-database-type-v0120" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_6">What's Changed<a class="headerlink" href="#release-notes-whats-changed_6" title="Permanent link">&para;</a></h4>
<ul>
<li>Adding new base schema for database types (#402) @devsetgo</li>
<li>creating main release for 0.11.2 (#390) @devsetgo</li>
<li>Working on bug in read_query (#389) @devsetgo</li>
<li>Reorganizing Library Structure (#388) @devsetgo</li>
<li>Python Build and Publish fix (#382) @devsetgo</li>
</ul>
<h4 id="release-notes-_1"><a class="headerlink" href="#release-notes-_1" title="Permanent link">&para;</a></h4>
<p>Breaking Change - SchemaBase is now SchemaBaseSQLite</p>
<p>Published Date: 2024 April 13, 22:55</p>
<h3 id="release-notes-reorganizing-library-stucture-v0112-main"><span style='color:blue'>Reorganizing Library Stucture</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.2-main">v0.11.2-main</a>)<a class="headerlink" href="#release-notes-reorganizing-library-stucture-v0112-main" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_7">What's Changed<a class="headerlink" href="#release-notes-whats-changed_7" title="Permanent link">&para;</a></h4>
<ul>
<li>creating main release for 0.11.2 (#390) @devsetgo</li>
<li>Working on bug in read_query (#389) @devsetgo</li>
<li>Reorganizing Library Structure (#388) @devsetgo</li>
<li>Python Build and Publish fix (#382) @devsetgo</li>
</ul>
<p>Breaking Changes are included in this release for import paths. See documents for more information.</p>
<p>Published Date: 2024 February 17, 19:09</p>
<h3 id="release-notes-read-query-fix-beta-testing-v0112-beta1"><span style='color:blue'>Read Query Fix Beta Testing</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.2-beta1">v0.11.2-beta1</a>)<a class="headerlink" href="#release-notes-read-query-fix-beta-testing-v0112-beta1" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_8">What's Changed<a class="headerlink" href="#release-notes-whats-changed_8" title="Permanent link">&para;</a></h4>
<ul>
<li>Working on bug in read_query (#389) @devsetgo</li>
<li>Reorganizing Library Structure (#388) @devsetgo</li>
<li>Python Build and Publish fix (#382) @devsetgo</li>
</ul>
<p>Published Date: 2024 February 16, 22:01</p>
<h3 id="release-notes-pre-release-to-test-new-structure-and-publishing-v0112-beta"><span style='color:blue'>Pre-Release to test new structure and publishing</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.2-beta">v0.11.2-beta</a>)<a class="headerlink" href="#release-notes-pre-release-to-test-new-structure-and-publishing-v0112-beta" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_9">What's Changed<a class="headerlink" href="#release-notes-whats-changed_9" title="Permanent link">&para;</a></h4>
<ul>
<li>Reorganizing Library Structure (#388) @devsetgo</li>
<li>Python Build and Publish fix (#382) @devsetgo</li>
</ul>
<p>Published Date: 2024 February 10, 21:16</p>
<h3 id="release-notes-v0112-fix2"><span style='color:blue'></span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.2-fix2">v0.11.2-fix2</a>)<a class="headerlink" href="#release-notes-v0112-fix2" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_10">What's Changed<a class="headerlink" href="#release-notes-whats-changed_10" title="Permanent link">&para;</a></h4>
<ul>
<li>Python Build and Publish fix (#382) @devsetgo</li>
</ul>
<p>Published Date: 2024 January 21, 15:01</p>
<h3 id="release-notes-adding-delete-many-and-minor-fixes-v0112"><span style='color:blue'>Adding Delete Many and minor fixes</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.2">v0.11.2</a>)<a class="headerlink" href="#release-notes-adding-delete-many-and-minor-fixes-v0112" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_11">What's Changed<a class="headerlink" href="#release-notes-whats-changed_11" title="Permanent link">&para;</a></h4>
<ul>
<li>Adding Delete Many and Other Updates  (#381) @devsetgo</li>
<li>pip(deps): bump mkdocs-material from 9.5.2 to 9.5.3 (#377) @dependabot</li>
<li>pip(deps): bump fastapi[all] from 0.105.0 to 0.108.0 (#375) @dependabot</li>
<li>pip(deps): bump sqlalchemy from 2.0.23 to 2.0.24 (#374) @dependabot</li>
<li>pip(deps): bump pytest from 7.4.3 to 7.4.4 (#373) @dependabot</li>
<li>pip(deps): bump black from 23.12.0 to 23.12.1 (#376) @dependabot</li>
<li>github actionts(deps): bump actions/setup-python from 4 to 5 (#378) @dependabot</li>
</ul>
<p>Published Date: 2024 January 20, 00:07</p>
<h3 id="release-notes-breaking-change-v0111"><span style='color:blue'>Breaking Change</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.1">v0.11.1</a>)<a class="headerlink" href="#release-notes-breaking-change-v0111" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_12">What's Changed<a class="headerlink" href="#release-notes-whats-changed_12" title="Permanent link">&para;</a></h4>
<ul>
<li>Bump of Version to 0.11.1 (#371) @devsetgo</li>
<li>Query Improvement (#370) @devsetgo</li>
<li>368 get one record should return an empty value when called (#369) @devsetgo</li>
<li>updating docs from v0.11.0 release (#367) @devsetgo</li>
</ul>
<p>Published Date: 2023 December 23, 10:49</p>
<h3 id="release-notes-full-release-of-new-features-v0110"><span style='color:blue'>Full Release of New Features</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0">v0.11.0</a>)<a class="headerlink" href="#release-notes-full-release-of-new-features-v0110" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_13">What's Changed<a class="headerlink" href="#release-notes-whats-changed_13" title="Permanent link">&para;</a></h4>
<ul>
<li>Prep for Release (#366) @devsetgo</li>
<li>Fixing sonar settings (#365) @devsetgo</li>
<li>Fixes and improvements (#364) @devsetgo</li>
<li>Dev (#362) @devsetgo</li>
<li>Fix of issues from Beta release (#361) @devsetgo</li>
<li>359 tables are created before create tables is called (#360) @devsetgo</li>
<li>Change Log (#358) @devsetgo</li>
<li>fixing latest-changes (#357) @devsetgo</li>
<li>removing jinja template from Latest Changes Action (#356) @devsetgo</li>
<li>Action fixing adding main (#355) @devsetgo</li>
<li>Fixing actions (#354) @devsetgo</li>
<li>Fixing Beta Publishing issues and Documentation Improvements (#353) @devsetgo</li>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 17, 22:00</p>
<h3 id="release-notes-beta-release-with-fixes-for-multiple-issues-v0110-beta3-fix1"><span style='color:blue'>Beta Release with fixes for multiple issues</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta3-fix1">v0.11.0-beta3-fix1</a>)<a class="headerlink" href="#release-notes-beta-release-with-fixes-for-multiple-issues-v0110-beta3-fix1" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_14">What's Changed<a class="headerlink" href="#release-notes-whats-changed_14" title="Permanent link">&para;</a></h4>
<ul>
<li>Dev (#362) @devsetgo</li>
<li>Fix of issues from Beta release (#361) @devsetgo</li>
<li>359 tables are created before create tables is called (#360) @devsetgo</li>
<li>Change Log (#358) @devsetgo</li>
<li>fixing latest-changes (#357) @devsetgo</li>
<li>removing jinja template from Latest Changes Action (#356) @devsetgo</li>
<li>Action fixing adding main (#355) @devsetgo</li>
<li>Fixing actions (#354) @devsetgo</li>
<li>Fixing Beta Publishing issues and Documentation Improvements (#353) @devsetgo</li>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 17, 16:23</p>
<h3 id="release-notes-fixing-asyncdatabase-create-tables-v0110-beta3"><span style='color:blue'>Fixing AsyncDatabase create tables</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta3">v0.11.0-beta3</a>)<a class="headerlink" href="#release-notes-fixing-asyncdatabase-create-tables-v0110-beta3" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_15">What's Changed<a class="headerlink" href="#release-notes-whats-changed_15" title="Permanent link">&para;</a></h4>
<ul>
<li>Fix of issues from Beta release (#361) @devsetgo</li>
<li>359 tables are created before create tables is called (#360) @devsetgo</li>
<li>Change Log (#358) @devsetgo</li>
<li>fixing latest-changes (#357) @devsetgo</li>
<li>removing jinja template from Latest Changes Action (#356) @devsetgo</li>
<li>Action fixing adding main (#355) @devsetgo</li>
<li>Fixing actions (#354) @devsetgo</li>
<li>Fixing Beta Publishing issues and Documentation Improvements (#353) @devsetgo</li>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 17, 16:18</p>
<h3 id="release-notes-build-updates-v0110-beta2"><span style='color:blue'>Build Updates </span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta2">v0.11.0-beta2</a>)<a class="headerlink" href="#release-notes-build-updates-v0110-beta2" title="Permanent link">&para;</a></h3>
<h4 id="release-notes-whats-changed_16">What's Changed<a class="headerlink" href="#release-notes-whats-changed_16" title="Permanent link">&para;</a></h4>
<ul>
<li>Change Log (#358) @devsetgo</li>
<li>fixing latest-changes (#357) @devsetgo</li>
<li>removing jinja template from Latest Changes Action (#356) @devsetgo</li>
<li>Action fixing adding main (#355) @devsetgo</li>
<li>Fixing actions (#354) @devsetgo</li>
<li>Fixing Beta Publishing issues and Documentation Improvements (#353) @devsetgo</li>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 16, 20:34</p>
<h3 id="release-notes-beta-release-with-fixes-for-multiple-issues-v0110-beta1-fix5"><span style='color:blue'>Beta Release with fixes for multiple issues</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta1-fix5">v0.11.0-beta1-fix5</a>)<a class="headerlink" href="#release-notes-beta-release-with-fixes-for-multiple-issues-v0110-beta1-fix5" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_17">What's Changed<a class="headerlink" href="#release-notes-whats-changed_17" title="Permanent link">&para;</a></h1>
<ul>
<li>fixing latest-changes (#357) @devsetgo</li>
<li>removing jinja template from Latest Changes Action (#356) @devsetgo</li>
<li>Action fixing adding main (#355) @devsetgo</li>
<li>Fixing actions (#354) @devsetgo</li>
<li>Fixing Beta Publishing issues and Documentation Improvements (#353) @devsetgo</li>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 16, 16:33</p>
<h3 id="release-notes-build-fixes-v0110-beta1-fix4"><span style='color:blue'>Build Fixes </span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta1-fix4">v0.11.0-beta1-fix4</a>)<a class="headerlink" href="#release-notes-build-fixes-v0110-beta1-fix4" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_18">What's Changed<a class="headerlink" href="#release-notes-whats-changed_18" title="Permanent link">&para;</a></h1>
<ul>
<li>Update setup.py for sub packages (#352) @devsetgo</li>
<li>Import Bug Fix (#351) @devsetgo</li>
<li>Latest Changes Action Fix (#350) @devsetgo</li>
<li>Next Release (#349) @devsetgo</li>
<li>Dev (#348) @devsetgo</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 12, 11:45</p>
<h3 id="release-notes-async-database-and-fastapi-functions-v0110-beta0"><span style='color:blue'>Async Database and FastAPI functions</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.11.0-beta0">v0.11.0-beta0</a>)<a class="headerlink" href="#release-notes-async-database-and-fastapi-functions-v0110-beta0" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_19">What's Changed<a class="headerlink" href="#release-notes-whats-changed_19" title="Permanent link">&para;</a></h1>
<ul>
<li>Dev (#348) @devsetgo - New functionality and documentation for FastAPI Endpoints and Async Database Functionality</li>
<li>pip(deps): bump autopep8 from 2.0.2 to 2.0.4 (#343) @dependabot</li>
<li>pip(deps): bump wheel from 0.41.2 to 0.42.0 (#345) @dependabot</li>
<li>pip(deps): bump mkdocstrings[python] from 0.21.2 to 0.24.0 (#346) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.3 to 1.5.3 (#347) @dependabot</li>
<li>pip(deps): bump flake8 from 6.0.0 to 6.1.0 (#332) @dependabot</li>
<li>pip(deps): bump click from 8.1.3 to 8.1.7 (#337) @dependabot</li>
<li>pip(deps): bump wheel from 0.40.0 to 0.41.2 (#339) @dependabot</li>
<li>github actionts(deps): bump actions/checkout from 2 to 4 (#340) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.17 to 9.4.2 (#341) @dependabot</li>
<li>pip(deps): bump black from 23.3.0 to 23.9.1 (#342) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.15 to 9.1.17 (#326) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.1 to 7.4.0 (#327) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.4.2 to 1.4.3 (#328) @dependabot</li>
<li>pip(deps): bump autoflake from 2.1.1 to 2.2.0 (#329) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.2 to 3.3.3 (#330) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.9 to 9.1.15 (#325) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.2 to 2.1.1 (#324) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.2.1 to 3.3.1 (#323) @dependabot</li>
<li>pip(deps): bump tox from 4.4.11 to 4.5.2 (#322) @dependabot</li>
<li>pip(deps): bump pytest-cov from 4.0.0 to 4.1.0 (#321) @dependabot</li>
<li>pip(deps): bump loguru from 0.6.0 to 0.7.0 (#317) @dependabot</li>
<li>pip(deps): bump mkdocs-gen-files from 0.4.0 to 0.5.0 (#314) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.2 to 2.17.4 (#319) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 9.1.6 to 9.1.9 (#320) @dependabot</li>
<li>pip(deps): bump pytest from 7.3.0 to 7.3.1 (#318) @dependabot</li>
</ul>
<p>Published Date: 2023 December 10, 20:17</p>
<h3 id="release-notes-pattern-analysis-update-and-bug-fix-v0101"><span style='color:blue'>Pattern Analysis Update and Bug Fix</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.10.1">v0.10.1</a>)<a class="headerlink" href="#release-notes-pattern-analysis-update-and-bug-fix-v0101" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_20">What's Changed<a class="headerlink" href="#release-notes-whats-changed_20" title="Permanent link">&para;</a></h1>
<ul>
<li>Improvement to the patterns analysis (#313) @devsetgo</li>
<li>pip(deps): bump mkdocs-material from 9.1.3 to 9.1.5 (#308) @dependabot</li>
<li>pip(deps): bump pre-commit from 3.2.0 to 3.2.1 (#310) @dependabot</li>
<li>pip(deps): bump watchdog from 2.3.1 to 3.0.0 (#309) @dependabot</li>
<li>pip(deps): bump pylint from 2.17.0 to 2.17.1 (#311) @dependabot</li>
<li>pip(deps): bump tox from 4.4.7 to 4.4.8 (#312) @dependabot</li>
</ul>
<p>Published Date: 2023 April 08, 21:45</p>
<h3 id="release-notes-chatgpt-driven-improvements-v0100"><span style='color:blue'>ChatGPT Driven Improvements</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.10.0">v0.10.0</a>)<a class="headerlink" href="#release-notes-chatgpt-driven-improvements-v0100" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-chatgpt">ChatGPT<a class="headerlink" href="#release-notes-chatgpt" title="Permanent link">&para;</a></h1>
<p>Using <a href="https://chat.openai.com/">ChatGPT</a> to improve tests, find bugs, and improve performance. Code coverage is at 100% and the code base appears to be performing better than before.</p>
<p>Major changes are in PR #304 </p>
<h1 id="release-notes-whats-changed_21">What's Changed<a class="headerlink" href="#release-notes-whats-changed_21" title="Permanent link">&para;</a></h1>
<ul>
<li>latest change fix for regex pattern. (#307) @devsetgo</li>
<li>Dev (#306) @devsetgo</li>
<li>Workflow changes (#305) @devsetgo</li>
<li>ChatGPT Driven Improvements (#304) @devsetgo</li>
<li>pip(deps): bump pre-commit from 3.0.2 to 3.1.1 (#300) @dependabot</li>
<li>pip(deps): bump pytest-xdist from 3.1.0 to 3.2.0 (#302) @dependabot</li>
<li>pip(deps): bump autoflake from 2.0.0 to 2.0.1 (#299) @dependabot</li>
<li>pip(deps): bump watchdog from 2.1.9 to 2.3.1 (#301) @dependabot</li>
<li>pip(deps): bump pytest from 7.2.0 to 7.2.1 (#303) @dependabot</li>
<li>pip(deps): bump pylint from 2.15.7 to 2.16.1 (#298) @dependabot</li>
<li>pip(deps): bump autopep8 from 2.0.0 to 2.0.1 (#289) @dependabot</li>
<li>pip(deps): bump pylint from 2.15.7 to 2.15.10 (#295) @dependabot</li>
<li>pip(deps): bump black from 22.10.0 to 23.1.0 (#294) @dependabot</li>
<li>pip(deps): bump tox from 3.27.1 to 4.4.4 (#296) @dependabot</li>
<li>pip(deps): bump pre-commit from 2.20.0 to 3.0.2 (#297) @dependabot</li>
</ul>
<p>Published Date: 2023 April 01, 00:27</p>
<h3 id="release-notes-open-csv-enhancements-and-library-updates-v090"><span style='color:blue'>Open CSV enhancements and library updates</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.9.0">v0.9.0</a>)<a class="headerlink" href="#release-notes-open-csv-enhancements-and-library-updates-v090" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_22">What's Changed<a class="headerlink" href="#release-notes-whats-changed_22" title="Permanent link">&para;</a></h1>
<ul>
<li>fix of latest changes (#288) @devsetgo</li>
<li>Open_CSV Enhancements (#287) @devsetgo</li>
<li>pip(deps): bump pytest-cov from 3.0.0 to 4.0.0 (#274) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.4.2 to 8.5.5 (#276) @dependabot</li>
<li>pip(deps): bump autoflake from 1.5.3 to 1.6.1 (#275) @dependabot</li>
<li>pip(deps): bump tqdm from 4.64.0 to 4.64.1 (#273) @dependabot</li>
<li>pip(deps): bump pytest from 7.1.2 to 7.1.3 (#272) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.3.1 to 1.4.0 (#271) @dependabot</li>
<li>pip(deps): bump tox from 3.25.1 to 3.26.0 (#269) @dependabot</li>
<li>pip(deps): bump pylint from 2.15.0 to 2.15.3 (#270) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.3.9 to 8.4.2 (#268) @dependabot</li>
<li>pip(deps): bump autopep8 from 1.6.0 to 1.7.0 (#264) @dependabot</li>
<li>pip(deps): bump pylint from 2.14.5 to 2.15.0 (#265) @dependabot</li>
<li>pip(deps): bump autoflake from 1.4 to 1.5.3 (#263) @dependabot</li>
<li>pip(deps): bump black from 22.6.0 to 22.8.0 (#267) @dependabot</li>
<li>pip(deps): bump flake8 from 5.0.1 to 5.0.4 (#266) @dependabot</li>
<li>pip(deps): bump pre-commit from 2.19.0 to 2.20.0 (#260) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.3.0 to 1.3.1 (#261) @dependabot</li>
<li>pip(deps): bump flake8 from 4.0.1 to 5.0.1 (#259) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.3.8 to 8.3.9 (#258) @dependabot</li>
<li>pip(deps): bump pylint from 2.14.4 to 2.14.5 (#262) @dependabot</li>
<li>pip(deps): bump twine from 4.0.0 to 4.0.1 (#252) @dependabot</li>
<li>pip(deps): bump pylint from 2.14.0 to 2.14.4 (#251) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.2.16 to 8.3.8 (#253) @dependabot</li>
<li>pip(deps): bump black from 22.3.0 to 22.6.0 (#254) @dependabot</li>
<li>pip(deps): bump tox from 3.25.0 to 3.25.1 (#255) @dependabot</li>
<li>pip(deps): bump watchdog from 2.1.8 to 2.1.9 (#256) @dependabot</li>
<li>github actionts(deps): bump actions/setup-python from 3 to 4 (#257) @dependabot</li>
<li>pip(deps): bump pylint from 2.13.7 to 2.14.0 (#250) @dependabot</li>
<li>pip(deps): bump watchdog from 2.1.7 to 2.1.8 (#246) @dependabot</li>
<li>pip(deps): bump pre-commit from 2.18.1 to 2.19.0 (#248) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.2.12 to 8.2.16 (#249) @dependabot</li>
<li>pip(deps): bump tox from 3.24.5 to 3.25.0 (#242) @dependabot</li>
<li>pip(deps): bump pre-commit from 2.17.0 to 2.18.1 (#243) @dependabot</li>
<li>pip(deps): bump click from 8.1.2 to 8.1.3 (#245) @dependabot</li>
<li>pip(deps): bump pylint from 2.13.4 to 2.13.7 (#240) @dependabot</li>
<li>pip(deps): bump tqdm from 4.63.1 to 4.64.0 (#244) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.2.8 to 8.2.12 (#241) @dependabot</li>
<li>pip(deps): bump pytest from 7.1.1 to 7.1.2 (#239) @dependabot</li>
<li>pip(deps): bump watchdog from 2.1.6 to 2.1.7 (#238) @dependabot</li>
<li>pip(deps): bump pylint from 2.12.2 to 2.13.4 (#237) @dependabot</li>
<li>pip(deps): bump mkdocs from 1.2.3 to 1.3.0 (#234) @dependabot</li>
<li>pip(deps): bump tqdm from 4.63.0 to 4.63.1 (#233) @dependabot</li>
<li>pip(deps): bump black from 22.1.0 to 22.3.0 (#236) @dependabot</li>
<li>pip(deps): bump pytest from 7.0.1 to 7.1.1 (#231) @dependabot</li>
<li>pip(deps): bump click from 8.0.4 to 8.1.2 (#235) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.2.5 to 8.2.8 (#232) @dependabot</li>
<li>pip(deps): bump twine from 3.8.0 to 4.0.0 (#230) @dependabot</li>
<li>document updates (#229) @devsetgo</li>
</ul>
<p>Published Date: 2022 December 04, 16:55</p>
<h3 id="release-notes-additional-logging-configuration-v080"><span style='color:blue'>Additional Logging Configuration</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.8.0">v0.8.0</a>)<a class="headerlink" href="#release-notes-additional-logging-configuration-v080" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_23">What's Changed<a class="headerlink" href="#release-notes-whats-changed_23" title="Permanent link">&para;</a></h1>
<ul>
<li>New Logging Configuration items (#228) @devsetgo</li>
<li>pip(deps): bump tqdm from 4.62.3 to 4.63.0 (#224) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.2.3 to 8.2.4 (#227) @dependabot</li>
<li>github actionts(deps): bump actions/setup-python from 2.3.1 to 3 (#226) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.1.9 to 8.2.3 (#225) @dependabot</li>
<li>pip(deps): bump twine from 3.7.1 to 3.8.0 (#223) @dependabot</li>
<li>pip(deps): bump pytest from 6.2.5 to 7.0.1 (#222) @dependabot</li>
<li>pip(deps): bump pytest-runner from 5.3.1 to 6.0.0 (#221) @dependabot</li>
<li>pip(deps): bump loguru from 0.5.3 to 0.6.0 (#218) @dependabot</li>
<li>pip(deps): bump black from 21.12b0 to 22.1.0 (#219) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 8.1.8 to 8.1.9 (#220) @dependabot</li>
</ul>
<p>Published Date: 2022 March 12, 21:07</p>
<h3 id="release-notes-v071"><span style='color:blue'></span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.7.1">v0.7.1</a>)<a class="headerlink" href="#release-notes-v071" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_24">What's Changed<a class="headerlink" href="#release-notes-whats-changed_24" title="Permanent link">&para;</a></h1>
<ul>
<li>Bump version: 0.7.0 → 0.7.1 (#217) @devsetgo</li>
<li>Hotfix for setup file (#216) @devsetgo</li>
</ul>
<p>Published Date: 2022 January 29, 01:51</p>
<h3 id="release-notes-logging-to-beta-testing-v070"><span style='color:blue'>Logging to Beta Testing</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.7.0">v0.7.0</a>)<a class="headerlink" href="#release-notes-logging-to-beta-testing-v070" title="Permanent link">&para;</a></h3>
<p>Logging is now has basic unit tests and is more ready to use with live application.</p>
<h1 id="release-notes-whats-changed_25">What's Changed<a class="headerlink" href="#release-notes-whats-changed_25" title="Permanent link">&para;</a></h1>
<ul>
<li>Adding Logging Config (#215) @devsetgo</li>
<li>pip(deps): bump pre-commit from 2.15.0 to 2.16.0 (#210) @dependabot</li>
<li>pip(deps): bump pylint from 2.12.1 to 2.12.2 (#211) @dependabot</li>
<li>pip(deps): bump tox from 3.24.4 to 3.24.5 (#212) @dependabot</li>
<li>pip(deps): bump black from 21.11b1 to 21.12b0 (#213) @dependabot</li>
<li>pip(deps): bump twine from 3.6.0 to 3.7.1 (#214) @dependabot</li>
<li>pip(deps): bump twine from 3.5.0 to 3.6.0 (#204) @dependabot</li>
<li>pip(deps): bump coverage-badge from 1.0.2 to 1.1.0 (#205) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 7.3.6 to 8.0.2 (#206) @dependabot</li>
<li>pip(deps): bump pylint from 2.11.1 to 2.12.1 (#207) @dependabot</li>
<li>pip(deps): bump black from 21.10b0 to 21.11b1 (#208) @dependabot</li>
<li>github actionts(deps): bump actions/setup-python from 2.2.2 to 2.3.1 (#209) @dependabot</li>
<li>Dev (#203) @devsetgo</li>
<li>pip(deps): bump tox from 3.24.3 to 3.24.4 (#193) @dependabot</li>
<li>pip(deps): bump tqdm from 4.62.2 to 4.62.3 (#194) @dependabot</li>
<li>pip(deps): bump pylint from 2.10.2 to 2.11.1 (#195) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 7.2.6 to 7.3.0 (#196) @dependabot</li>
<li>pip(deps): bump black from 21.8b0 to 21.9b0 (#197) @dependabot</li>
<li>pip(deps): bump mkdocs-material from 7.2.4 to 7.2.6 (#189) @dependabot</li>
<li>pip(deps): bump pytest from 6.2.4 to 6.2.5 (#191) @dependabot</li>
<li>pip(deps): bump watchdog from 2.1.3 to 2.1.5 (#192) @dependabot</li>
<li>pip(deps): bump tox from 3.24.1 to 3.24.3 (#190) @dependabot</li>
<li>pip(deps): bump pre-commit from 2.14.0 to 2.15.0 (#188) @dependabot</li>
<li>pip(deps): bump black from 21.7b0 to 21.8b0 (#187) @dependabot</li>
<li>pip(deps): bump pylint from 2.9.6 to 2.10.2 (#184) @dependabot</li>
<li>pip(deps): bump tqdm from 4.62.0 to 4.62.2 (#185) @dependabot</li>
<li>github actionts(deps): bump actions/setup-python from 1 to 2.2.2 (#182) @dependabot</li>
<li>Bump wheel from 0.36.2 to 0.37.0 (#180) @dependabot</li>
<li>Bump mkdocs-material from 7.2.2 to 7.2.4 (#181) @dependabot</li>
<li>Bump tox from 3.24.0 to 3.24.1 (#177) @dependabot</li>
<li>Bump mkdocs-material from 7.2.1 to 7.2.2 (#178) @dependabot</li>
<li>Bump pre-commit from 2.13.0 to 2.14.0 (#179) @dependabot</li>
<li>Bump pylint from 2.9.5 to 2.9.6 (#176) @dependabot</li>
<li>Bump tqdm from 4.61.2 to 4.62.0 (#175) @dependabot</li>
<li>Bump mkdocs-material from 7.1.10 to 7.2.1 (#174) @dependabot</li>
<li>Bump twine from 3.4.1 to 3.4.2 (#171) @dependabot</li>
<li>Bump pylint from 2.9.3 to 2.9.5 (#170) @dependabot</li>
<li>Bump mkdocs from 1.2.1 to 1.2.2 (#173) @dependabot</li>
<li>documentation update (#169) @devsetgo</li>
<li>README fix (#168) @devsetgo</li>
</ul>
<p>Published Date: 2022 January 29, 01:42</p>
<h3 id="release-notes-logging-configuration-v060"><span style='color:blue'>Logging Configuration</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.6.0">v0.6.0</a>)<a class="headerlink" href="#release-notes-logging-configuration-v060" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_26">What's Changed<a class="headerlink" href="#release-notes-whats-changed_26" title="Permanent link">&para;</a></h1>
<ul>
<li>Adding Logging and Cleanup (#167) @devsetgo</li>
<li>Bump tqdm from 4.61.1 to 4.61.2 (#166) @dependabot</li>
<li>Bump pylint from 2.8.3 to 2.9.3 (#165) @dependabot</li>
<li>Bump watchdog from 2.1.2 to 2.1.3 (#164) @dependabot</li>
<li>Bump mkdocs-material from 7.1.8 to 7.1.9 (#163) @dependabot</li>
<li>Bump tqdm from 4.61.0 to 4.61.1 (#162) @dependabot</li>
<li>Bump mkdocs-material from 7.1.7 to 7.1.8 (#161) @dependabot</li>
<li>Bump mkdocs from 1.1.2 to 1.2.1 (#159) @dependabot</li>
<li>Bump black from 21.5b2 to 21.6b0 (#158) @dependabot</li>
<li>Bump mkdocs-material from 7.1.6 to 7.1.7 (#160) @dependabot</li>
<li>Bump pytest-cov from 2.12.0 to 2.12.1 (#154) @dependabot</li>
<li>Bump pylint from 2.8.2 to 2.8.3 (#155) @dependabot</li>
<li>Bump black from 21.5b1 to 21.5b2 (#156) @dependabot</li>
<li>Bump mkdocs-material from 7.1.5 to 7.1.6 (#157) @dependabot</li>
<li>Bump tqdm from 4.60.0 to 4.61.0 (#153) @dependabot</li>
<li>Bump pre-commit from 2.12.1 to 2.13.0 (#151) @dependabot</li>
<li>Bump pytest-runner from 5.3.0 to 5.3.1 (#152) @dependabot</li>
<li>Bump mkdocs-material from 7.1.4 to 7.1.5 (#150) @dependabot</li>
<li>Bump watchdog from 2.1.1 to 2.1.2 (#149) @dependabot</li>
<li>Bump click from 7.1.2 to 8.0.1 (#148) @dependabot</li>
<li>Bump black from 21.5b0 to 21.5b1 (#147) @dependabot</li>
<li>Bump watchdog from 2.1.0 to 2.1.1 (#146) @dependabot</li>
<li>Bump pytest-cov from 2.11.1 to 2.12.0 (#145) @dependabot</li>
<li>Bump flake8 from 3.9.1 to 3.9.2 (#143) @dependabot</li>
<li>Bump pytest from 6.2.3 to 6.2.4 (#139) @dependabot</li>
<li>Bump watchdog from 2.0.3 to 2.1.0 (#138) @dependabot</li>
<li>Bump black from 21.4b2 to 21.5b0 (#140) @dependabot</li>
<li>Bump mkdocs-material from 7.1.3 to 7.1.4 (#141) @dependabot</li>
<li>Dev (#142) @devsetgo</li>
<li>Bump tox from 3.23.0 to 3.23.1 (#137) @dependabot</li>
<li>Bump autopep8 from 1.5.6 to 1.5.7 (#136) @dependabot</li>
<li>Bump pylint from 2.7.4 to 2.8.2 (#135) @dependabot</li>
<li>Bump black from 20.8b1 to 21.4b2 (#134) @dependabot</li>
<li>Bump mkdocs-material from 7.1.2 to 7.1.3 (#133) @dependabot</li>
<li>Adding SonarCloud Code Coverage (#130) @devsetgo</li>
<li>Bump mkdocs-material from 7.1.1 to 7.1.2 (#132) @dependabot</li>
<li>Bump watchdog from 2.0.2 to 2.0.3 (#131) @dependabot</li>
<li>Bump pre-commit from 2.12.0 to 2.12.1 (#129) @dependabot</li>
<li>Bump flake8 from 3.9.0 to 3.9.1 (#128) @dependabot</li>
<li>Bump mkdocs-material from 7.1.0 to 7.1.1 (#127) @dependabot</li>
<li>Bump tqdm from 4.59.0 to 4.60.0 (#124) @dependabot</li>
<li>Bump pytest from 6.2.2 to 6.2.3 (#125) @dependabot</li>
<li>Bump pre-commit from 2.11.1 to 2.12.0 (#126) @dependabot</li>
<li>Bump pylint from 2.7.2 to 2.7.4 (#122) @dependabot</li>
<li>Bump mkdocs-material from 7.0.6 to 7.1.0 (#123) @dependabot</li>
<li>Bump mkdocs-material from 7.0.5 to 7.0.6 (#121) @dependabot</li>
<li>Bump flake8 from 3.8.4 to 3.9.0 (#120) @dependabot</li>
<li>Bump twine from 3.3.0 to 3.4.1 (#118) @dependabot</li>
<li>Bump autopep8 from 1.5.5 to 1.5.6 (#119) @dependabot</li>
</ul>
<p>Published Date: 2021 July 16, 23:44</p>
<h3 id="release-notes-fixing-publish-v050-2"><span style='color:blue'>Fixing Publish</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.5.0-2">v0.5.0-2</a>)<a class="headerlink" href="#release-notes-fixing-publish-v050-2" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_27">What's Changed<a class="headerlink" href="#release-notes-whats-changed_27" title="Permanent link">&para;</a></h1>
<ul>
<li>adding update for publish (#117) @devsetgo</li>
</ul>
<p>Published Date: 2021 March 18, 17:19</p>
<h3 id="release-notes-calendar-and-regex-function-documentation-v050"><span style='color:blue'>Calendar and RegEx Function + Documentation</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.5.0">v0.5.0</a>)<a class="headerlink" href="#release-notes-calendar-and-regex-function-documentation-v050" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_28">What's Changed<a class="headerlink" href="#release-notes-whats-changed_28" title="Permanent link">&para;</a></h1>
<ul>
<li>Adding Calendar Functions (#116) @devsetgo</li>
<li>Bump pre-commit from 2.10.1 to 2.11.1 (#113) @dependabot</li>
<li>update to Saturday (#115) @devsetgo</li>
<li>Bump tqdm from 4.58.0 to 4.59.0 (#112) @dependabot</li>
<li>Bump mkdocs-material from 7.0.4 to 7.0.5 (#114) @dependabot</li>
<li>fixes for mkdoc material update (#111) @devsetgo</li>
<li>Bump tox from 3.22.0 to 3.23.0 (#109) @dependabot</li>
<li>Bump mkdocs-material from 7.0.2 to 7.0.4 (#108) @dependabot</li>
<li>Bump pylint from 2.7.1 to 2.7.2 (#107) @dependabot</li>
<li>Bump coverage from 5.4 to 5.5 (#110) @dependabot</li>
<li>Bump pylint from 2.6.2 to 2.7.1 (#103) @dependabot</li>
<li>Bump mkdocs-material from 6.2.8 to 7.0.2 (#104) @dependabot</li>
<li>Bump watchdog from 2.0.1 to 2.0.2 (#105) @dependabot</li>
<li>Bump tqdm from 4.57.0 to 4.58.0 (#106) @dependabot</li>
<li>Bump tox from 3.21.4 to 3.22.0 (#101) @dependabot</li>
<li>Bump watchdog from 2.0.0 to 2.0.1 (#99) @dependabot</li>
<li>Bump pylint from 2.6.0 to 2.6.2 (#102) @dependabot</li>
<li>Bump tqdm from 4.56.2 to 4.57.0 (#100) @dependabot</li>
<li>Bump pytest-runner from 5.2 to 5.3.0 (#98) @dependabot</li>
<li>Bump tqdm from 4.56.0 to 4.56.2 (#97) @dependabot</li>
<li>Bump watchdog from 1.0.2 to 2.0.0 (#96) @dependabot</li>
<li>Bump pre-commit from 2.10.0 to 2.10.1 (#95) @dependabot</li>
<li>Bump mkdocs-material from 6.2.6 to 6.2.8 (#94) @dependabot</li>
<li>Bump tox from 3.21.3 to 3.21.4 (#93) @dependabot</li>
<li>Bump autopep8 from 1.5.4 to 1.5.5 (#92) @dependabot</li>
<li>Bump tox from 3.21.2 to 3.21.3 (#87) @dependabot</li>
<li>Bump mkdocs-material from 6.2.5 to 6.2.6 (#88) @dependabot</li>
<li>Bump pytest from 6.2.1 to 6.2.2 (#89) @dependabot</li>
<li>Bump coverage from 5.3.1 to 5.4 (#91) @dependabot</li>
<li>Bump pre-commit from 2.9.3 to 2.10.0 (#90) @dependabot</li>
<li>Bump tox from 3.21.1 to 3.21.2 (#84) @dependabot</li>
<li>Bump mkdocs-material from 6.2.4 to 6.2.5 (#85) @dependabot</li>
<li>Bump pytest-cov from 2.10.1 to 2.11.1 (#86) @dependabot</li>
<li>Bump tox from 3.20.1 to 3.21.1 (#81) @dependabot</li>
<li>Bump mkdocs-material from 6.2.3 to 6.2.4 (#82) @dependabot</li>
<li>Bump tqdm from 4.55.1 to 4.56.0 (#83) @dependabot</li>
<li>Bump tqdm from 4.55.0 to 4.55.1 (#80) @dependabot</li>
<li>Bump mkdocs-material from 6.2.2 to 6.2.3 (#79) @dependabot</li>
</ul>
<p>Published Date: 2021 March 18, 17:06</p>
<h3 id="release-notes-minor-updates-and-library-updates-v041"><span style='color:blue'>Minor updates and library updates.</span> (<a href="https://github.com/devsetgo/devsetgo_lib/releases/tag/v0.4.1">v0.4.1</a>)<a class="headerlink" href="#release-notes-minor-updates-and-library-updates-v041" title="Permanent link">&para;</a></h3>
<h1 id="release-notes-whats-changed_29">What's Changed<a class="headerlink" href="#release-notes-whats-changed_29" title="Permanent link">&para;</a></h1>
<ul>
<li>Updates and Minor updates (#78) @devsetgo</li>
<li>Bump tqdm from 4.54.1 to 4.55.0 (#77) @dependabot</li>
<li>Bump twine from 3.2.0 to 3.3.0 (#76) @dependabot</li>
<li>Bump coverage from 5.3 to 5.3.1 (#74) @dependabot</li>
<li>Bump mkdocs-material from 6.1.7 to 6.2.2 (#75) @dependabot</li>
<li>Bump watchdog from 0.10.4 to 1.0.2 (#73) @dependabot</li>
<li>Bump pytest from 6.1.2 to 6.2.1 (#71) @dependabot</li>
<li>Bump wheel from 0.36.1 to 0.36.2 (#70) @dependabot</li>
<li>Bump tqdm from 4.54.0 to 4.54.1 (#67) @dependabot</li>
<li>Bump mkdocs-material from 6.1.6 to 6.1.7 (#68) @dependabot</li>
<li>Bump pre-commit from 2.9.2 to 2.9.3 (#69) @dependabot</li>
<li>Bump wheel from 0.36.0 to 0.36.1 (#66) @dependabot</li>
<li>Bump wheel from 0.35.1 to 0.36.0 (#64) @dependabot</li>
<li>Bump tqdm from 4.53.0 to 4.54.0 (#65) @dependabot</li>
<li>Bump pre-commit from 2.8.2 to 2.9.2 (#61) @dependabot</li>
<li>Bump mkdocs-material from 6.1.5 to 6.1.6 (#60) @dependabot</li>
<li>Bump tqdm from 4.52.0 to 4.53.0 (#62) @dependabot</li>
<li>Bump watchdog from 0.10.3 to 0.10.4 (#63) @dependabot</li>
<li>Bump tqdm from 4.51.0 to 4.52.0 (#59) @dependabot</li>
<li>Bump mkdocs-material from 6.1.4 to 6.1.5 (#58) @dependabot</li>
<li>Bump mkdocs-material from 6.1.2 to 6.1.4 (#57) @dependabot</li>
<li>Bump pre-commit from 2.8.0 to 2.8.2 (#55) @dependabot</li>
<li>Bump mkdocs-material from 6.1.0 to 6.1.2 (#56) @dependabot</li>
<li>Bump pytest from 6.1.1 to 6.1.2 (#52) @dependabot</li>
<li>Bump pre-commit from 2.7.1 to 2.8.0 (#53) @dependabot</li>
<li>Bump tqdm from 4.50.2 to 4.51.0 (#54) @dependabot</li>
<li>Bump mkdocs-material from 6.0.2 to 6.1.0 (#51) @dependabot</li>
<li>Bump tqdm from 4.50.1 to 4.50.2 (#49) @dependabot</li>
<li>Bump tox from 3.20.0 to 3.20.1 (#50) @dependabot</li>
<li>Bump pytest from 6.1.0 to 6.1.1 (#48) @dependabot</li>
<li>Bump mkdocs-material from 6.0.1 to 6.0.2 (#47) @dependabot</li>
<li>Bump flake8 from 3.8.3 to 3.8.4 (#45) @dependabot</li>
<li>Bump tqdm from 4.50.0 to 4.50.1 (#44) @dependabot</li>
<li>Bump bump2version from 1.0.0 to 1.0.1 (#46) @dependabot</li>
<li>Bump tqdm from 4.49.0 to 4.50.0 (#42) @dependabot</li>
<li>Bump black from 19.10b0 to 20.8b1 (#43) @dependabot</li>
<li>Bump tqdm from 4.46.0 to 4.49.0 (#40) @dependabot</li>
<li>Bump pytest from 5.4.2 to 6.1.0 (#39) @dependabot</li>
<li>Bump coverage from 5.1 to 5.3 (#38) @dependabot</li>
<li>Bump autoflake from 1.3.1 to 1.4 (#41) @dependabot</li>
<li>Bump twine from 3.1.1 to 3.2.0 (#37) @dependabot</li>
<li>Bump wheel from 0.34.2 to 0.35.1 (#34) @dependabot</li>
<li>Bump pytest-cov from 2.9.0 to 2.10.1 (#36) @dependabot</li>
<li>Bump watchdog from 0.10.2 to 0.10.3 (#35) @dependabot</li>
<li>Bump mkdocs-material from 5.2.2 to 6.0.1 (#33) @dependabot</li>
<li>Bump pylint from 2.5.2 to 2.6.0 (#32) @dependabot-preview</li>
<li>Bump pre-commit from 2.4.0 to 2.7.1 (#31) @dependabot-preview</li>
<li>Bump tox from 3.15.1 to 3.20.0 (#30) @dependabot-preview</li>
<li>Bump flake8 from 3.8.2 to 3.8.3 (#29) @dependabot-preview</li>
<li>Bump autopep8 from 1.5.2 to 1.5.4 (#28) @dependabot-preview</li>
</ul>
<p>Published Date: 2020 December 26, 23:51</p></section></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2024 Mike Ryan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/devsetgo" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/_devsetgo" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/", "features": ["navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "toc.integrate", "toc.follow", "navigation.top"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>