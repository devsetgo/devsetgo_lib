
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Common functions for Python applications. This is to increase reusability and limit rewritting the same functions in multiple applications. It also allows for defects to be addressed quickly and then be propigated across applications.">
      
      
        <meta name="author" content="Mike Ryan">
      
      
      
        <link rel="prev" href="../../endpoints/system_health_endpoints/">
      
      
        <link rel="next" href="../async_database_setup/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.2">
    
    
      
        <title>Database Configuration - DSG_LIB</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DSG_LIB" class="md-header__button md-logo" aria-label="DSG_LIB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DSG_LIB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Database Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/devsetgo/dsg_lib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devsetgo/dsg_lib
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstart/" class="md-tabs__link">
        
  
    
  
  QuickStart

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../functions/logging/" class="md-tabs__link">
          
  
  Common Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../endpoints/http_codes/" class="md-tabs__link">
          
  
  FastAPI Functions

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Database Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../recipes/fastapi/" class="md-tabs__link">
          
  
  Recipes

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contribute/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../release-notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../print_page/" class="md-tabs__link">
        
  
    
  
  Print Site

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DSG_LIB" class="md-nav__button md-logo" aria-label="DSG_LIB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DSG_LIB
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/devsetgo/dsg_lib" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devsetgo/dsg_lib
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QuickStart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Common Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Common Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functions/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functions/file_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functions/folder_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functions/regex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RegEx Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functions/calendar_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calendar Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    FastAPI Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            FastAPI Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../endpoints/http_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP Codes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../endpoints/system_health_endpoints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Health
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Database Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Database Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Database Configuration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Database Configuration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dsg_lib.database_config" class="md-nav__link">
    <span class="md-ellipsis">
      database_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="database_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config--define-your-database-configuration-config" class="md-nav__link">
    <span class="md-ellipsis">
      Define your database configuration config = {
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config--create-a-dbconfig-instance-db_config-database_configdbconfigconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Create a DBConfig instance db_config = database_config.DBConfig(config)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config--use-the-dbconfig-instance-to-get-a-database-session-async-with" class="md-nav__link">
    <span class="md-ellipsis">
      Use the DBConfig instance to get a database session async with
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig" class="md-nav__link">
    <span class="md-ellipsis">
      DBConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DBConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig--define-your-database-configuration-config" class="md-nav__link">
    <span class="md-ellipsis">
      Define your database configuration config = {
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig--create-a-dbconfig-instance-db_config-database_configdbconfigconfig" class="md-nav__link">
    <span class="md-ellipsis">
      Create a DBConfig instance db_config = database_config.DBConfig(config)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig--use-the-dbconfig-instance-to-get-a-database-session-async-with" class="md-nav__link">
    <span class="md-ellipsis">
      Use the DBConfig instance to get a database session async with
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.__init__--define-your-database-configuration-config" class="md-nav__link">
    <span class="md-ellipsis">
      Define your database configuration config = {
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.__init__--create-a-dbconfig-instance-db_config" class="md-nav__link">
    <span class="md-ellipsis">
      Create a DBConfig instance db_config =
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.get_db_session" class="md-nav__link">
    <span class="md-ellipsis">
      get_db_session()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_db_session()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.get_db_session--define-your-database-configuration-config" class="md-nav__link">
    <span class="md-ellipsis">
      Define your database configuration config = {
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.get_db_session--create-a-dbconfig-instance-db_config" class="md-nav__link">
    <span class="md-ellipsis">
      Create a DBConfig instance db_config =
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.DBConfig.get_db_session--use-the-dbconfig-instance-to-get-a-database-session-async-with" class="md-nav__link">
    <span class="md-ellipsis">
      Use the DBConfig instance to get a database session async with
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsg_lib.database_config.import_sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      import_sqlalchemy()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../async_database_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Database Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database_operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../base_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base Schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/fastapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/asyncDatabase/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/loggingExample/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Patterns
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../print_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Print Site
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">




<h2 id="dsg_lib.database_config" class="doc doc-heading">
          <code>dsg_lib.database_config</code>


<a href="#dsg_lib.database_config" class="headerlink" title="Permanent link">&para;</a></h2>

  <div class="doc doc-contents first">
  
      <p>This module provides classes and functions for managing asynchronous database
operations using SQLAlchemy and asyncio.</p>
<p>The main classes are DBConfig, which manages the database configuration and
creates a SQLAlchemy engine and a MetaData instance, and AsyncDatabase, which
uses an instance of DBConfig to perform asynchronous database operations.</p>
<p>The module also provides a function, import_sqlalchemy, which tries to import
SQLAlchemy and its components, and raises an ImportError if SQLAlchemy is not
installed or if the installed version is not compatible.</p>
<p>The module uses the logger from the <code>dsg_lib</code> for logging, and the <code>time</code> module
for working with times. It also uses the <code>contextlib</code> module for creating
context managers, and the <code>typing</code> module for type hinting.</p>
<p>The <code>BASE</code> variable is a base class for declarative database models. It is
created using the <code>declarative_base</code> function from <code>sqlalchemy.orm</code>.</p>
<p>This module is part of the <code>dsg_lib</code> package, which provides utilities for
working with databases in Python.</p>
<p>Example: ```python from dsg_lib import database_config</p>
<h3 id="dsg_lib.database_config--define-your-database-configuration-config">Define your database configuration config = {<a class="headerlink" href="#dsg_lib.database_config--define-your-database-configuration-config" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>&quot;database_uri&quot;: &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;,
&quot;echo&quot;: True, &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,
&quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,
</code></pre></div>

<p>}</p>
<h3 id="dsg_lib.database_config--create-a-dbconfig-instance-db_config-database_configdbconfigconfig">Create a DBConfig instance db_config = database_config.DBConfig(config)<a class="headerlink" href="#dsg_lib.database_config--create-a-dbconfig-instance-db_config-database_configdbconfigconfig" title="Permanent link">&para;</a></h3>
<h3 id="dsg_lib.database_config--use-the-dbconfig-instance-to-get-a-database-session-async-with">Use the DBConfig instance to get a database session async with<a class="headerlink" href="#dsg_lib.database_config--use-the-dbconfig-instance-to-get-a-database-session-async-with" title="Permanent link">&para;</a></h3>
<p>db_config.get_db_session() as session:
    # Perform your database operations here pass
```</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h3 id="dsg_lib.database_config.DBConfig" class="doc doc-heading">
          <code>DBConfig</code>


<a href="#dsg_lib.database_config.DBConfig" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">

  
      <p>A class used to manage the database configuration and create a SQLAlchemy
engine.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>config</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary containing the database configuration</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>parameters.</code></td>
          <td>
                <code>engine (Engine</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The SQLAlchemy engine created with the</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>database</code></td>
          <td>
                <code>URI from the config. metadata (MetaData</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The SQLAlchemy</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Create Engine Support Functions by Database Type Confirmed by testing
[SQLITE, PostrgeSQL] To Be Tested [MySQL, Oracle, MSSQL] and should be
considered experimental ------- Option          SQLite  PostgreSQL  MySQL
Oracle  MSSQL echo                Yes         Yes         Yes     Yes
Yes future              Yes         Yes         Yes     Yes     Yes
pool_pre_ping       Yes         Yes         Yes     Yes     Yes pool_size
No          Yes         Yes     Yes     Yes max_overflow        No
Yes         Yes     Yes     Yes pool_recycle        Yes         Yes
Yes     Yes     Yes pool_timeout        No          Yes         Yes     Yes
Yes</p>
<p>Example: ```python from dsg_lib import database_config</p>
<h4 id="dsg_lib.database_config.DBConfig--define-your-database-configuration-config">Define your database configuration config = {<a class="headerlink" href="#dsg_lib.database_config.DBConfig--define-your-database-configuration-config" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>&quot;database_uri&quot;: &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;,
&quot;echo&quot;: True, &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,
&quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,
</code></pre></div>

<p>}</p>
<h4 id="dsg_lib.database_config.DBConfig--create-a-dbconfig-instance-db_config-database_configdbconfigconfig">Create a DBConfig instance db_config = database_config.DBConfig(config)<a class="headerlink" href="#dsg_lib.database_config.DBConfig--create-a-dbconfig-instance-db_config-database_configdbconfigconfig" title="Permanent link">&para;</a></h4>
<h4 id="dsg_lib.database_config.DBConfig--use-the-dbconfig-instance-to-get-a-database-session-async-with">Use the DBConfig instance to get a database session async with<a class="headerlink" href="#dsg_lib.database_config.DBConfig--use-the-dbconfig-instance-to-get-a-database-session-async-with" title="Permanent link">&para;</a></h4>
<p>db_config.get_db_session() as session:
    # Perform your database operations here pass
```</p>

            <details class="quote">
              <summary>Source code in <code>dsg_lib/database_config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DBConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class used to manage the database configuration and create a SQLAlchemy</span>
<span class="sd">    engine.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        config (dict): A dictionary containing the database configuration</span>
<span class="sd">        parameters. engine (Engine): The SQLAlchemy engine created with the</span>
<span class="sd">        database URI from the config. metadata (MetaData): The SQLAlchemy</span>
<span class="sd">        MetaData instance.</span>


<span class="sd">    Create Engine Support Functions by Database Type Confirmed by testing</span>
<span class="sd">    [SQLITE, PostrgeSQL] To Be Tested [MySQL, Oracle, MSSQL] and should be</span>
<span class="sd">    considered experimental ------- Option          SQLite  PostgreSQL  MySQL</span>
<span class="sd">    Oracle  MSSQL echo                Yes         Yes         Yes     Yes</span>
<span class="sd">    Yes future              Yes         Yes         Yes     Yes     Yes</span>
<span class="sd">    pool_pre_ping       Yes         Yes         Yes     Yes     Yes pool_size</span>
<span class="sd">    No          Yes         Yes     Yes     Yes max_overflow        No</span>
<span class="sd">    Yes         Yes     Yes     Yes pool_recycle        Yes         Yes</span>
<span class="sd">    Yes     Yes     Yes pool_timeout        No          Yes         Yes     Yes</span>
<span class="sd">    Yes</span>

<span class="sd">    Example: ```python from dsg_lib import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;: &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;,</span>
<span class="sd">        &quot;echo&quot;: True, &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config = database_config.DBConfig(config)</span>

<span class="sd">    # Use the DBConfig instance to get a database session async with</span>
<span class="sd">    db_config.get_db_session() as session:</span>
<span class="sd">        # Perform your database operations here pass</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">SUPPORTED_PARAMETERS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sqlite&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;future&quot;</span><span class="p">,</span> <span class="s2">&quot;pool_recycle&quot;</span><span class="p">},</span>
        <span class="s2">&quot;postgresql&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;echo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;future&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_pre_ping&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_size&quot;</span><span class="p">,</span>
            <span class="s2">&quot;max_overflow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_recycle&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_timeout&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="c1"># Add other engines here...</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the DBConfig instance with the given database configuration.</span>

<span class="sd">        The configuration should be a dictionary with the following keys: -</span>
<span class="sd">        &quot;database_uri&quot;: The URI for the database. - &quot;echo&quot;: If True, the engine</span>
<span class="sd">        will log all statements as well as a `repr()` of their parameter lists</span>
<span class="sd">        to the engines logger, which defaults to sys.stdout. - &quot;future&quot;: If</span>
<span class="sd">        True, use the future version of SQLAlchemy, which supports asyncio. -</span>
<span class="sd">        &quot;pool_pre_ping&quot;: If True, the pool will test the connection for liveness</span>
<span class="sd">        upon each checkout. - &quot;pool_size&quot;: The size of the connection pool to be</span>
<span class="sd">        maintained. - &quot;max_overflow&quot;: The number of connections that can be</span>
<span class="sd">        opened above the `pool_size` setting, when all other connections are in</span>
<span class="sd">        use. - &quot;pool_recycle&quot;: The number of seconds after which a connection is</span>
<span class="sd">        automatically recycled. This is required for MySQL, which removes</span>
<span class="sd">        connections after 8 hours idle by default. - &quot;pool_timeout&quot;: The number</span>
<span class="sd">        of seconds to wait before giving up on getting a connection from the</span>
<span class="sd">        pool.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (Dict): A dictionary containing the database configuration</span>
<span class="sd">            parameters.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there are unsupported parameters for the database</span>
<span class="sd">            engine type.</span>

<span class="sd">        Example: ```python from dsg_lib import database_config</span>

<span class="sd">        # Define your database configuration config = {</span>
<span class="sd">            &quot;database_uri&quot;:</span>
<span class="sd">            &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">            &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">            &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>

<span class="sd">        # Create a DBConfig instance db_config =</span>
<span class="sd">        database_config.DBConfig(config) ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="n">engine_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">supported_parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUPPORTED_PARAMETERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">engine_type</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
        <span class="n">unsupported_parameters</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">supported_parameters</span> <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;database_uri&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">unsupported_parameters</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported parameters for </span><span class="si">{</span><span class="n">engine_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">unsupported_parameters</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

        <span class="n">engine_parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">param</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">supported_parameters</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">engine_parameters</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

    <span class="nd">@asynccontextmanager</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method returns a context manager that provides a new database</span>
<span class="sd">        session.</span>

<span class="sd">        The session is created using the SQLAlchemy engine from the DBConfig</span>
<span class="sd">        instance, and it does not expire on commit. The session is of type</span>
<span class="sd">        AsyncSession.</span>

<span class="sd">        This method should be used with the `async with` statement.</span>

<span class="sd">        Yields:</span>
<span class="sd">            AsyncSession: A new SQLAlchemy asynchronous session.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SQLAlchemyError: If a database error occurs.</span>

<span class="sd">        Example: ```python from dsg_lib import database_config</span>

<span class="sd">        # Define your database configuration config = {</span>
<span class="sd">            &quot;database_uri&quot;:</span>
<span class="sd">            &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">            &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">            &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">        }</span>

<span class="sd">        # Create a DBConfig instance db_config =</span>
<span class="sd">        database_config.DBConfig(config)</span>

<span class="sd">        # Use the DBConfig instance to get a database session async with</span>
<span class="sd">        db_config.get_db_session() as session:</span>
<span class="sd">            # Perform your database operations here pass</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating new database session&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Create a new database session</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">sessionmaker</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
            <span class="p">)()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="c1"># Yield the session to the context manager</span>
                <span class="k">yield</span> <span class="n">session</span>
        <span class="k">except</span> <span class="n">SQLAlchemyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Log the error and raise it</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">finally</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># Log the end of the database session</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Database session ended&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h4 id="dsg_lib.database_config.DBConfig.__init__" class="doc doc-heading">
          <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

<a href="#dsg_lib.database_config.DBConfig.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


  <div class="doc doc-contents ">
  
      <p>Initializes the DBConfig instance with the given database configuration.</p>
<p>The configuration should be a dictionary with the following keys: -
"database_uri": The URI for the database. - "echo": If True, the engine
will log all statements as well as a <code>repr()</code> of their parameter lists
to the engines logger, which defaults to sys.stdout. - "future": If
True, use the future version of SQLAlchemy, which supports asyncio. -
"pool_pre_ping": If True, the pool will test the connection for liveness
upon each checkout. - "pool_size": The size of the connection pool to be
maintained. - "max_overflow": The number of connections that can be
opened above the <code>pool_size</code> setting, when all other connections are in
use. - "pool_recycle": The number of seconds after which a connection is
automatically recycled. This is required for MySQL, which removes
connections after 8 hours idle by default. - "pool_timeout": The number
of seconds to wait before giving up on getting a connection from the
pool.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>config</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary containing the database configuration</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Exception</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If there are unsupported parameters for the database</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Example: ```python from dsg_lib import database_config</p>
<h5 id="dsg_lib.database_config.DBConfig.__init__--define-your-database-configuration-config">Define your database configuration config = {<a class="headerlink" href="#dsg_lib.database_config.DBConfig.__init__--define-your-database-configuration-config" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code>&quot;database_uri&quot;:
&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,
&quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,
&quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,
</code></pre></div>

<p>}</p>
<h5 id="dsg_lib.database_config.DBConfig.__init__--create-a-dbconfig-instance-db_config">Create a DBConfig instance db_config =<a class="headerlink" href="#dsg_lib.database_config.DBConfig.__init__--create-a-dbconfig-instance-db_config" title="Permanent link">&para;</a></h5>
<p>database_config.DBConfig(config) ```</p>

          <details class="quote">
            <summary>Source code in <code>dsg_lib/database_config.py</code></summary>
            <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the DBConfig instance with the given database configuration.</span>

<span class="sd">    The configuration should be a dictionary with the following keys: -</span>
<span class="sd">    &quot;database_uri&quot;: The URI for the database. - &quot;echo&quot;: If True, the engine</span>
<span class="sd">    will log all statements as well as a `repr()` of their parameter lists</span>
<span class="sd">    to the engines logger, which defaults to sys.stdout. - &quot;future&quot;: If</span>
<span class="sd">    True, use the future version of SQLAlchemy, which supports asyncio. -</span>
<span class="sd">    &quot;pool_pre_ping&quot;: If True, the pool will test the connection for liveness</span>
<span class="sd">    upon each checkout. - &quot;pool_size&quot;: The size of the connection pool to be</span>
<span class="sd">    maintained. - &quot;max_overflow&quot;: The number of connections that can be</span>
<span class="sd">    opened above the `pool_size` setting, when all other connections are in</span>
<span class="sd">    use. - &quot;pool_recycle&quot;: The number of seconds after which a connection is</span>
<span class="sd">    automatically recycled. This is required for MySQL, which removes</span>
<span class="sd">    connections after 8 hours idle by default. - &quot;pool_timeout&quot;: The number</span>
<span class="sd">    of seconds to wait before giving up on getting a connection from the</span>
<span class="sd">    pool.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (Dict): A dictionary containing the database configuration</span>
<span class="sd">        parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If there are unsupported parameters for the database</span>
<span class="sd">        engine type.</span>

<span class="sd">    Example: ```python from dsg_lib import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;:</span>
<span class="sd">        &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">        &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config =</span>
<span class="sd">    database_config.DBConfig(config) ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="n">engine_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">supported_parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUPPORTED_PARAMETERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">engine_type</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
    <span class="n">unsupported_parameters</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">set</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">supported_parameters</span> <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;database_uri&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">unsupported_parameters</span><span class="p">:</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unsupported parameters for </span><span class="si">{</span><span class="n">engine_type</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">unsupported_parameters</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

    <span class="n">engine_parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">param</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">supported_parameters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;database_uri&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">engine_parameters</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="dsg_lib.database_config.DBConfig.get_db_session" class="doc doc-heading">
          <code class=" language-python"><span class="n">get_db_session</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dsg_lib.database_config.DBConfig.get_db_session" class="headerlink" title="Permanent link">&para;</a></h4>


  <div class="doc doc-contents ">
  
      <p>This method returns a context manager that provides a new database
session.</p>
<p>The session is created using the SQLAlchemy engine from the DBConfig
instance, and it does not expire on commit. The session is of type
AsyncSession.</p>
<p>This method should be used with the <code>async with</code> statement.</p>



  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>AsyncSession</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A new SQLAlchemy asynchronous session.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>SQLAlchemyError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If a database error occurs.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Example: ```python from dsg_lib import database_config</p>
<h5 id="dsg_lib.database_config.DBConfig.get_db_session--define-your-database-configuration-config">Define your database configuration config = {<a class="headerlink" href="#dsg_lib.database_config.DBConfig.get_db_session--define-your-database-configuration-config" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code>&quot;database_uri&quot;:
&quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,
&quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,
&quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,
</code></pre></div>

<p>}</p>
<h5 id="dsg_lib.database_config.DBConfig.get_db_session--create-a-dbconfig-instance-db_config">Create a DBConfig instance db_config =<a class="headerlink" href="#dsg_lib.database_config.DBConfig.get_db_session--create-a-dbconfig-instance-db_config" title="Permanent link">&para;</a></h5>
<p>database_config.DBConfig(config)</p>
<h5 id="dsg_lib.database_config.DBConfig.get_db_session--use-the-dbconfig-instance-to-get-a-database-session-async-with">Use the DBConfig instance to get a database session async with<a class="headerlink" href="#dsg_lib.database_config.DBConfig.get_db_session--use-the-dbconfig-instance-to-get-a-database-session-async-with" title="Permanent link">&para;</a></h5>
<p>db_config.get_db_session() as session:
    # Perform your database operations here pass
```</p>

          <details class="quote">
            <summary>Source code in <code>dsg_lib/database_config.py</code></summary>
            <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_db_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method returns a context manager that provides a new database</span>
<span class="sd">    session.</span>

<span class="sd">    The session is created using the SQLAlchemy engine from the DBConfig</span>
<span class="sd">    instance, and it does not expire on commit. The session is of type</span>
<span class="sd">    AsyncSession.</span>

<span class="sd">    This method should be used with the `async with` statement.</span>

<span class="sd">    Yields:</span>
<span class="sd">        AsyncSession: A new SQLAlchemy asynchronous session.</span>

<span class="sd">    Raises:</span>
<span class="sd">        SQLAlchemyError: If a database error occurs.</span>

<span class="sd">    Example: ```python from dsg_lib import database_config</span>

<span class="sd">    # Define your database configuration config = {</span>
<span class="sd">        &quot;database_uri&quot;:</span>
<span class="sd">        &quot;postgresql+asyncpg://user:password@localhost/dbname&quot;, &quot;echo&quot;: True,</span>
<span class="sd">        &quot;future&quot;: True, &quot;pool_pre_ping&quot;: True, &quot;pool_size&quot;: 5,</span>
<span class="sd">        &quot;max_overflow&quot;: 10, &quot;pool_recycle&quot;: 3600, &quot;pool_timeout&quot;: 30,</span>
<span class="sd">    }</span>

<span class="sd">    # Create a DBConfig instance db_config =</span>
<span class="sd">    database_config.DBConfig(config)</span>

<span class="sd">    # Use the DBConfig instance to get a database session async with</span>
<span class="sd">    db_config.get_db_session() as session:</span>
<span class="sd">        # Perform your database operations here pass</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating new database session&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a new database session</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">sessionmaker</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span>
        <span class="p">)()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># Yield the session to the context manager</span>
            <span class="k">yield</span> <span class="n">session</span>
    <span class="k">except</span> <span class="n">SQLAlchemyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Log the error and raise it</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">finally</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="c1"># Log the end of the database session</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Database session ended&quot;</span><span class="p">)</span>  <span class="c1"># pragma: no cover</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h3 id="dsg_lib.database_config.import_sqlalchemy" class="doc doc-heading">
          <code class=" language-python"><span class="n">import_sqlalchemy</span><span class="p">()</span></code>

<a href="#dsg_lib.database_config.import_sqlalchemy" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>This function tries to import SQLAlchemy and its components, and raises an
ImportError if SQLAlchemy is not installed or if the installed version is
not compatible with the minimum required version.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>Tuple</code></td>          <td>
                <code><span title="typing.Tuple">Tuple</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A tuple containing the imported SQLAlchemy module and its</p>
            </div>
          </td>
        </tr>
        <tr>
<td></td>          <td>
                <code><span title="typing.Tuple">Tuple</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>components (MetaData, create_engine, text, IntegrityError,</p>
            </div>
          </td>
        </tr>
        <tr>
<td></td>          <td>
                <code><span title="typing.Tuple">Tuple</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>SQLAlchemyError, AsyncSession, create_async_engine, select,</p>
            </div>
          </td>
        </tr>
        <tr>
<td></td>          <td>
                <code><span title="typing.Tuple">Tuple</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>declarative_base, sessionmaker).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ImportError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If SQLAlchemy is not installed or if the installed version</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Example: <code>python from dsg_lib import database_config sqlalchemy, MetaData,
create_engine, text, IntegrityError, SQLAlchemyError, AsyncSession,
create_async_engine, select, declarative_base, sessionmaker =
database_config.import_sqlalchemy()</code></p>

          <details class="quote">
            <summary>Source code in <code>dsg_lib/database_config.py</code></summary>
            <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">import_sqlalchemy</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function tries to import SQLAlchemy and its components, and raises an</span>
<span class="sd">    ImportError if SQLAlchemy is not installed or if the installed version is</span>
<span class="sd">    not compatible with the minimum required version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple: A tuple containing the imported SQLAlchemy module and its</span>
<span class="sd">        components (MetaData, create_engine, text, IntegrityError,</span>
<span class="sd">        SQLAlchemyError, AsyncSession, create_async_engine, select,</span>
<span class="sd">        declarative_base, sessionmaker).</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If SQLAlchemy is not installed or if the installed version</span>
<span class="sd">        is not compatible with the minimum required version.</span>

<span class="sd">    Example: ```python from dsg_lib import database_config sqlalchemy, MetaData,</span>
<span class="sd">    create_engine, text, IntegrityError, SQLAlchemyError, AsyncSession,</span>
<span class="sd">    create_async_engine, select, declarative_base, sessionmaker =</span>
<span class="sd">    database_config.import_sqlalchemy() ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Try to import SQLAlchemy, handle ImportError if SQLAlchemy is not</span>
    <span class="c1"># installed</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">sqlalchemy</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span><span class="p">,</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">SQLAlchemyError</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span><span class="p">,</span> <span class="n">create_async_engine</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy.future</span> <span class="kn">import</span> <span class="n">select</span>
        <span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span><span class="p">,</span> <span class="n">sessionmaker</span>

    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">create_engine</span> <span class="o">=</span> <span class="n">text</span> <span class="o">=</span> <span class="n">sqlalchemy</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># pragma: no cover</span>

    <span class="c1"># Check SQLAlchemy version</span>
    <span class="n">min_version</span> <span class="o">=</span> <span class="s2">&quot;2.0.0&quot;</span>  <span class="c1"># replace with your minimum required version</span>
    <span class="k">if</span> <span class="n">sqlalchemy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">packaging_version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
        <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">__version__</span>
    <span class="p">)</span> <span class="o">&lt;</span> <span class="n">packaging_version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">min_version</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;SQLAlchemy version &gt;= </span><span class="si">{</span><span class="n">min_version</span><span class="si">}</span><span class="s2"> required, run `pip install --upgrade sqlalchemy`&quot;</span>
        <span class="p">)</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="n">sqlalchemy</span><span class="p">,</span>
        <span class="n">MetaData</span><span class="p">,</span>
        <span class="n">create_engine</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">IntegrityError</span><span class="p">,</span>
        <span class="n">SQLAlchemyError</span><span class="p">,</span>
        <span class="n">AsyncSession</span><span class="p">,</span>
        <span class="n">create_async_engine</span><span class="p">,</span>
        <span class="n">select</span><span class="p">,</span>
        <span class="n">declarative_base</span><span class="p">,</span>
        <span class="n">sessionmaker</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2023 Mike Ryan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/devsetgo" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/_devsetgo" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "toc.integrate", "toc.follow", "navigation.top"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>